---
title: "playwright.config.ts"
---

## High-level description
This file configures Playwright for end-to-end testing of a connect-widget package. It sets up environment variables, defines test execution parameters, and specifies browser configurations for running tests across multiple platforms and devices.

## Code Structure
The code is structured into two main parts: environment configuration using dotenv and Playwright configuration using `defineConfig`. The Playwright configuration includes test directory settings, execution parameters, and browser project definitions.

## Symbols

### `defineConfig`
#### Description
This function from Playwright is used to define the configuration for running tests. It sets up various testing parameters and browser configurations.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| config | Object | An object containing various configuration options for Playwright |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| config | Object | A Playwright configuration object |

#### Internal Logic
1. Sets the test directory and file matching pattern
2. Configures test execution parameters (parallelization, timeout, retries)
3. Sets up reporting
4. Defines shared settings for all projects
5. Configures browser projects for different platforms and devices

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| dotenv | For loading environment variables from .env files |
| @playwright/test | For importing Playwright testing utilities |

### Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| testDir | string | "./src/__tests__" | Directory containing test files |
| testMatch | RegExp | /.*(e2e\|spec\|test).ts/ | Pattern to match test files |
| fullyParallel | boolean | true | Run tests in parallel |
| timeout | number | 10000 | Test timeout in milliseconds |
| forbidOnly | boolean | !!process.env.CI | Fail if `test.only` is left in code (CI only) |
| retries | number | CI ? 2 : 0 | Number of retries for failed tests |
| workers | number\|undefined | CI ? 1 : undefined | Number of parallel workers |
| reporter | Array | [["html", \{ open: "never" \}]] | Test result reporter configuration |
| trace | string | "on-first-retry" | When to collect trace |

## Error Handling
The configuration doesn't explicitly define error handling mechanisms, relying on Playwright's default error handling.

## TODOs
- TODO: Still need to validate this approach when we enable tests on CI (regarding loading .env.staging in CI environment)
