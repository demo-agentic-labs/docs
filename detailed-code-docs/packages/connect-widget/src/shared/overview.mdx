---
title: "Overview"
---

## High-level description
This directory contains shared utilities, components, and constants used throughout the connect-widget application. It provides functionality for analytics, API communication, local storage management, UI components, error handling, and various utility functions. These shared resources ensure consistency and reusability across different parts of the application.

## What does it do?
The shared directory serves several key purposes:

1. Analytics: It provides an Analytics class for tracking user events and identifying users using PostHog.

2. API Communication: It sets up an API client for making requests to the backend, handling token management and environment-specific configurations.

3. UI Components: It includes a WidgetContainer component that provides a consistent layout and theming for the widget's content.

4. Local Storage Management: It offers utilities for managing various aspects of local storage, including user agreements, color preferences, and provider information.

5. Error Handling: It defines custom error classes for token-related issues and provides a wrapper for Sentry error capturing.

6. Utility Functions: It includes various utility functions for environment detection, URL parameter handling, and redirection.

7. Constants: It defines a set of constant values used throughout the application for consistency and easy configuration.

These shared resources work together to provide a foundation for the connect-widget application, ensuring consistent behavior, styling, and functionality across different components and pages.

## Key Files

1. `analytics.ts`: Implements an Analytics class for event tracking and user identification using PostHog.

2. `api.ts`: Sets up an API client using Axios, handling token management and environment-specific configurations.

3. `components/WidgetContainer.tsx`: Provides a reusable container component for the widget's content, including theming and layout.

4. `constants.ts`: Defines a Constants class with various static readonly properties used throughout the application.

5. `localStorage/`: A directory containing modules for managing different aspects of local storage, such as user agreements, color preferences, and provider information.

6. `notifications.ts`: Provides a wrapper for Sentry error and message capturing functionality.

7. `token-errors.ts`: Defines custom error classes for token-related issues.

8. `util.ts`: Contains utility functions for environment detection, URL parameter handling, redirection, and environment variable management.

## Dependencies
The shared components and utilities rely on several external libraries and frameworks:

1. React and React Router for UI components and navigation
2. Chakra UI for theming and UI components
3. Axios for API communication
4. PostHog for analytics
5. Sentry for error tracking

Additionally, the code makes use of browser APIs like localStorage and window.location for various functionalities.

## Configuration
The shared resources use several configuration options and environment variables:

1. API URLs for different environments (local, sandbox, production)
2. PostHog API key and host
3. Various URL parameters for token, sandbox mode, color mode, etc.
4. Default colors and breakpoints for theming

These configurations are primarily managed through the Constants class and environment variables, allowing for easy customization and environment-specific behavior.

In summary, the shared directory provides a comprehensive set of utilities, components, and configurations that form the foundation of the connect-widget application. These shared resources ensure consistency, reusability, and maintainability across the entire application.