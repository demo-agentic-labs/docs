---
title: "apple.ts"
---

## High-level description
This code defines functionality for handling Apple-specific behavior in a connect widget. It provides a method to determine if the current session is Apple-related based on URL parameters and local storage.

## Symbols

### `getIsApple`
#### Description
This function determines whether the current session is Apple-related by checking URL parameters and local storage.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| searchParams | URLSearchParams | The URL search parameters of the current page |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| isApple | boolean | Whether the session is Apple-related |

#### Internal Logic
1. Retrieves the 'apple' parameter from the URL search params.
2. Checks if the parameter is present and set to "true".
3. If true, stores this value in local storage (if not in demo mode and localStorage is available).
4. If the URL parameter is not set to true, checks local storage for a previously stored value.
5. Returns the determined boolean value.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Constants | Provides constant values, specifically `APPLE_PARAM` |
| isDemo | A boolean flag indicating whether the application is in demo mode |

## References
- `Constants.APPLE_PARAM`: Used to retrieve the Apple-specific parameter from URL search params.
- `isDemo`: Used to determine whether to store the Apple status in local storage.

## Side Effects
- If the Apple parameter is set to "true" in the URL and the application is not in demo mode, the function will store this value in local storage.

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| isAppleStorageKey | string | "is-apple" | The key used to store and retrieve the Apple status in local storage |

## Error Handling
The function includes basic error handling by checking for the existence of `localStorage` before attempting to use it, preventing potential errors in environments where it's not available.

---

This code is part of a larger system for managing user connections, possibly in a healthcare or fitness-related application. It specifically handles the detection and persistence of Apple-related sessions, which may be used to customize the user experience or enable specific features for Apple users.