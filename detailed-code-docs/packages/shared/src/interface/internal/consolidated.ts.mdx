---
title: "consolidated.ts"
---

## High-level description
This code defines a Zod schema for validating and parsing data related to sending consolidated medical records. It also exports a TypeScript type derived from this schema. The schema is used to ensure that the data sent for consolidated medical records is in the correct format and contains all necessary information.

## Symbols

### `internalSendConsolidatedSchema`
#### Description
This is a Zod schema that defines the structure and validation rules for the data used in sending consolidated medical records internally.

#### Internal Logic
The schema includes the following fields:
- `bundleLocation`: A required string representing the location of the bundle.
- `bundleFilename`: A required string representing the filename of the bundle.
- `requestId`: A required string representing the ID of the request.
- `conversionType`: An optional enum field that can be one of the values in `consolidationConversionType`.
- `generateAiBrief`: An optional boolean field.
- `resources`: An optional array of enum values from `resourceTypeForConsolidation`.
- `dateFrom`: An optional string field.
- `dateTo`: An optional string field.

### `InternalSendConsolidated`
#### Description
This is a TypeScript type derived from the `internalSendConsolidatedSchema` using Zod's `z.infer` utility. It represents the shape of the data that conforms to the schema.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| zod | Used for creating and validating schemas |
| @metriport/shared/medical | Imports `consolidationConversionType` and `resourceTypeForConsolidation` |

## References
This code references:
- `consolidationConversionType` from the medical module
- `resourceTypeForConsolidation` from the medical module

These references are used in defining the schema fields for `conversionType` and `resources` respectively.

The `InternalSendConsolidated` type and `internalSendConsolidatedSchema` are likely used in other parts of the application where consolidated medical records are processed or sent, ensuring type safety and data validation.