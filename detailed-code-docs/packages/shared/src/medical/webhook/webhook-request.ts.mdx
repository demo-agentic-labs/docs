---
title: "webhook-request.ts"
---

## High-level description
This file defines TypeScript types and schemas for webhook requests in a medical API context. It uses the Zod library for schema validation and defines various webhook types, their corresponding schemas, and utility functions for type checking.

## Code Structure
The code defines several webhook types and their corresponding schemas using Zod. It also includes utility functions to check the type of a webhook request. The main symbols are interconnected through type definitions and schema compositions.

## Symbols

### `pingWebhookTypeSchema`
#### Description
Defines the schema for a ping webhook type.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| pingWebhookTypeSchema | z.ZodLiteral&lt;"ping"&gt; | Schema for ping webhook type |

### `consolidatedWebhookTypeSchema`
#### Description
Defines the schema for a consolidated webhook type.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| consolidatedWebhookTypeSchema | z.ZodLiteral&lt;"medical.consolidated-data"&gt; | Schema for consolidated webhook type |

### `docDownloadWebhookTypeSchema`
#### Description
Defines the schema for a document download webhook type.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| docDownloadWebhookTypeSchema | z.ZodLiteral&lt;"medical.document-download"&gt; | Schema for document download webhook type |

### `docConversionWebhookTypeSchema`
#### Description
Defines the schema for a document conversion webhook type.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| docConversionWebhookTypeSchema | z.ZodLiteral&lt;"medical.document-conversion"&gt; | Schema for document conversion webhook type |

### `docBulkDownloadWebhookTypeSchema`
#### Description
Defines the schema for a document bulk download webhook type.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| docBulkDownloadWebhookTypeSchema | z.ZodLiteral&lt;"medical.document-bulk-download-urls"&gt; | Schema for document bulk download webhook type |

### `mapiWebhookTypeSchema`
#### Description
Combines all medical API webhook type schemas.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mapiWebhookTypeSchema | z.ZodUnion&lt;[...]&gt; | Combined schema for all medical API webhook types |

### `webhookTypeSchema`
#### Description
Combines ping webhook type schema with medical API webhook type schema.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| webhookTypeSchema | z.ZodUnion&lt;[...]&gt; | Combined schema for all webhook types |

### `webhookRequestStatus`
#### Description
Defines possible webhook request statuses.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| webhookRequestStatus | readonly ["processing", "success", "failure"] | Array of possible webhook request statuses |

### `baseWebhookMetadataSchema`
#### Description
Defines the base schema for webhook metadata.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| baseWebhookMetadataSchema | z.ZodObject&lt;...&gt; | Base schema for webhook metadata |

### `webhookMetadataSchema`
#### Description
Extends the base webhook metadata schema with a type field.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| webhookMetadataSchema | z.ZodObject&lt;...&gt; | Extended schema for webhook metadata |

### `createWebhookMetadataSchema`
#### Description
Creates a webhook metadata schema with a specific type.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| itemSchema | z.ZodType&lt;WebhookType&gt; | Schema for the webhook type |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | z.ZodObject&lt;...&gt; | Webhook metadata schema with specific type |

### `pingWebhookRequestDataSchema`
#### Description
Defines the schema for a ping webhook request.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| pingWebhookRequestDataSchema | z.ZodObject&lt;...&gt; | Schema for ping webhook request |

### `filtersSchema`
#### Description
Defines the schema for filters used in webhook requests.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| filtersSchema | z.ZodRecord&lt;...&gt; | Schema for filters |

### `consolidatedWebhookPatientSchema`
#### Description
Defines the schema for a patient in a consolidated webhook request.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| consolidatedWebhookPatientSchema | z.ZodObject&lt;...&gt; | Schema for patient in consolidated webhook |

### `consolidatedWebhookRequestSchema`
#### Description
Defines the schema for a consolidated webhook request.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| consolidatedWebhookRequestSchema | z.ZodObject&lt;...&gt; | Schema for consolidated webhook request |

### `documentDownloadWebhookRequestSchema`
#### Description
Defines the schema for a document download webhook request.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| documentDownloadWebhookRequestSchema | z.ZodObject&lt;...&gt; | Schema for document download webhook request |

### `documentConversionWebhookRequestSchema`
#### Description
Defines the schema for a document conversion webhook request.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| documentConversionWebhookRequestSchema | z.ZodObject&lt;...&gt; | Schema for document conversion webhook request |

### `documentBulkDownloadWebhookRequestSchema`
#### Description
Defines the schema for a document bulk download webhook request.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| documentBulkDownloadWebhookRequestSchema | z.ZodObject&lt;...&gt; | Schema for document bulk download webhook request |

### `webhookRequestSchema`
#### Description
Combines all webhook request schemas into a single union schema.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| webhookRequestSchema | z.ZodUnion&lt;[...]&gt; | Combined schema for all webhook request types |

### `WebhookRequestParsingFailure`
#### Description
Represents a failure in parsing a webhook request.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| errors | ZodError&lt;WebhookRequest&gt; | Zod error object |
| flattened | ZodFormattedError&lt;WebhookRequest&gt; | Formatted Zod error |

#### Outputs
None (class definition)

### `isPingWebhookRequest`
#### Description
Type guard function to check if a webhook request is a ping request.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| whRequest | WebhookRequest | The webhook request to check |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | boolean | True if the request is a ping request, false otherwise |

### `isConsolidatedWebhookRequest`
#### Description
Type guard function to check if a webhook request is a consolidated request.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| whRequest | WebhookRequest | The webhook request to check |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | boolean | True if the request is a consolidated request, false otherwise |

### `isDocumentDownloadWebhookRequest`
#### Description
Type guard function to check if a webhook request is a document download request.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| whRequest | WebhookRequest | The webhook request to check |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | boolean | True if the request is a document download request, false otherwise |

### `isDocumentConversionWebhookRequest`
#### Description
Type guard function to check if a webhook request is a document conversion request.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| whRequest | WebhookRequest | The webhook request to check |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | boolean | True if the request is a document conversion request, false otherwise |

### `isDocumentBulkDownloadWebhookRequest`
#### Description
Type guard function to check if a webhook request is a document bulk download request.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| whRequest | WebhookRequest | The webhook request to check |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | boolean | True if the request is a document bulk download request, false otherwise |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| zod | Schema validation and type inference |
| @metriport/shared/common/date | Date schema definition |
| @metriport/shared/medical/fhir/bundle | FHIR bundle type definition |

## TODOs
- Implement `documentDownloadWebhookRequestSchema`
- Implement `documentConversionWebhookRequestSchema`
- Implement `documentBulkDownloadWebhookRequestSchema`