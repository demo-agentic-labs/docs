---
title: "email.ts"
---

## High-level description
This code provides a utility function to extract the domain name from an email address without including the top-level domain (TLD) or subdomains. It's designed to work with simple email formats and doesn't handle complex cases involving subdomains.

## Symbols

### `getDomainFromEmailWithoutTld`
#### Description
This function extracts the domain name from an email address, excluding the top-level domain (TLD) and any subdomains. It splits the email address at the "@" symbol and then at the "." symbol to isolate the main domain name.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| email | string \| undefined | The email address to process |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| domain | string \| undefined | The extracted domain name without TLD, or undefined if input is invalid |

#### Internal Logic
1. Check if the input email is falsy (undefined, null, or empty string). If so, return undefined.
2. Split the email string at the "@" symbol and take the second part (index 1).
3. Split the resulting string at the "." symbol and take the first part (index 0).
4. Return the extracted domain name.

## Side Effects
This function has no side effects as it doesn't modify any external state or resources.

## Performance Considerations
The function uses simple string operations (split) which are generally efficient. However, for processing large volumes of emails, more optimized methods might be considered.

## Error Handling
The function handles potential errors implicitly:
- If the input is falsy (undefined, null, or empty string), it returns undefined.
- If the email format is invalid (doesn't contain "@" or "." in the domain part), it may return undefined or an unexpected result.

## Limitations
As noted in the comment, this function does not handle subdomains correctly. For example:
- For "john@example.com", it will correctly return "example".
- For "john@support.metriport.com", it will incorrectly return "support" instead of "metriport".

Additionally, it doesn't validate the email format, so invalid email addresses may produce unexpected results.