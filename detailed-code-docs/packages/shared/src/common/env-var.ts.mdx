---
title: "env-var.ts"
---

## High-level description
This code defines utility functions for handling environment variables in a TypeScript project. It includes an enumeration of environment types, functions to retrieve environment variables, and a function to determine the current environment type.

## Code Structure
The code defines an `EnvType` enum and three functions: `getEnvVar`, `getEnvVarOrFail`, and `getEnvType`. These functions are used to retrieve environment variables and determine the current environment type.

## Symbols

### `EnvType`
#### Description
An enumeration that defines different environment types.

#### Inputs
N/A

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| production | string | Represents the production environment |
| sandbox | string | Represents the sandbox environment |
| staging | string | Represents the staging environment |
| development | string | Represents the development environment |

### `getEnvVar`
#### Description
Retrieves the value of an environment variable.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| varName | string | The name of the environment variable to retrieve |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| value | string \| undefined | The value of the environment variable, or undefined if not set |

### `getEnvVarOrFail`
#### Description
Retrieves the value of an environment variable, throwing an error if it's not set or empty.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| varName | string | The name of the environment variable to retrieve |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| value | string | The value of the environment variable |

#### Internal Logic
1. Calls `getEnvVar` to retrieve the environment variable value.
2. Checks if the value is falsy or an empty string after trimming.
3. Throws an error if the value is not set or empty.
4. Returns the value if it exists and is not empty.

### `getEnvType`
#### Description
Determines the current environment type based on the `ENV_TYPE` environment variable.

#### Inputs
N/A

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| envType | EnvType | The current environment type |

#### Internal Logic
1. Retrieves the `ENV_TYPE` environment variable using `getEnvVarOrFail`.
2. Validates that the retrieved value is one of the defined `EnvType` values.
3. Throws a `MetriportError` if the value is invalid.
4. Returns the environment type as an `EnvType` enum value.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/shared | Imports the `MetriportError` class for error handling |

## Error Handling
- `getEnvVarOrFail` throws an `Error` if the requested environment variable is not set or empty.
- `getEnvType` throws a `MetriportError` if the `ENV_TYPE` environment variable is set to an invalid value.

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.