---
title: "Overview"
---

## High-level description
The `packages/shared/src` directory contains a collection of shared utilities, types, and functions used across the Metriport application. It provides a centralized location for common functionality, including error handling, data validation, network operations, and domain-specific utilities for medical data processing.

## What does it do?
This directory serves several key purposes:

1. Common Utilities: It provides a wide range of utility functions for handling arrays, booleans, dates, strings, numbers, and more.

2. Domain-Specific Operations: It includes modules for address validation, contact information processing, date of birth normalization, and gender normalization.

3. Error Handling: It defines custom error classes and utility functions for consistent error management across the application.

4. Medical Data Processing: It contains types and utilities for working with FHIR (Fast Healthcare Interoperability Resources) data and managing webhook requests in a healthcare context.

5. Network Operations: It provides utilities for URL validation, network error handling, and implementing retry logic for network operations.

6. Data Validation: It uses Zod for schema definition and validation, ensuring type safety and consistency in data structures throughout the application.

## Entry points
The main entry point for this directory is the `index.ts` file, which aggregates and re-exports various utilities, types, and functions from different modules. This allows other parts of the application to easily import and use these shared functionalities.

Key subdirectories include:

- `common`: Contains general-purpose utility functions.
- `domain`: Holds domain-specific utilities and types.
- `error`: Defines custom error classes and error handling utilities.
- `interface`: Provides schemas and types for internal consolidated medical records and a feedback system.
- `medical`: Contains FHIR-related types and webhook handling utilities.
- `net`: Includes network-related utilities and retry mechanisms.

## Dependencies
The shared utilities rely on several external libraries:

1. Zod: Used for schema validation and type inference.
2. dayjs: Utilized for date parsing and manipulation.
3. lodash: Provides various utility functions.
4. @medplum/fhirtypes: Offers FHIR-specific types.
5. axios: Used for making HTTP requests and handling network errors.

## Configuration
While there are no explicit configuration files, many modules use constants or default options that act as configuration:

- Error classes use default HTTP status codes.
- The retry mechanism in the `net` module has configurable options for retry attempts, delays, and conditions.
- FHIR-related modules define constants for resource types and conversion formats.

These shared utilities form the foundation for many operations throughout the Metriport project, providing consistent and reliable implementations of frequently needed functionality. By centralizing these utilities, the codebase maintains better consistency and reduces the likelihood of errors that could arise from multiple implementations of the same functionality.