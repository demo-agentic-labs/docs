---
title: "dob.ts"
---

## High-level description
This code defines utility functions for normalizing and validating date of birth (DOB) strings. It provides two main functions: `normalizeDateSafe` and `normalizeDate`, which handle the conversion of date strings to a standardized ISO date format.

## Code Structure
The code imports the `ISO_DATE` constant from a common date module and uses the `dayjs` library for date parsing and formatting. It then defines two functions that work together to normalize date strings.

## Symbols

### `normalizeDateSafe`
#### Description
This function attempts to normalize a given date string to the ISO date format. It trims the input, parses it using dayjs, and returns the formatted date if valid, or undefined if invalid.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| date | string | The input date string to be normalized |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | string \| undefined | The normalized ISO date string if valid, or undefined if invalid |

#### Internal Logic
1. Trims the input date string
2. Parses the trimmed date using dayjs
3. Checks if the parsed date is valid
4. If valid, returns the date formatted in ISO_DATE format
5. If invalid, returns undefined

#### TODOs
There is a TODO comment to check if the date is in the future.

### `normalizeDate`
#### Description
This function wraps `normalizeDateSafe` and throws an error if the date is invalid instead of returning undefined.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| date | string | The input date string to be normalized |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | string | The normalized ISO date string |

#### Internal Logic
1. Calls `normalizeDateSafe` with the input date
2. If the result is undefined, throws an "Invalid date" error
3. Otherwise, returns the normalized date string

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| dayjs | Used for parsing and formatting dates |

## Error Handling
The `normalizeDate` function throws an error with the message "Invalid date." if the input date cannot be normalized.

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.