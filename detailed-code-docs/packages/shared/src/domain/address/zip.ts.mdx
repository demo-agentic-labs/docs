---
title: "zip.ts"
---

## High-level description
This code defines utility functions for validating and normalizing zip codes. It includes functions to check if a zip code is valid and to normalize zip codes by taking the first 4-5 characters.

## Code Structure
The code consists of three main functions: `isValidZipCode`, `normalizeZipCode`, and `normalizeZipCodeSafe`. These functions work together to validate and normalize zip codes.

## Symbols

### `isValidZipCode`
#### Description
This function checks if a given zip code is valid.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| zipCode | string | The zip code to be validated |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| isValid | boolean | Whether the zip code is valid or not |

#### Internal Logic
1. Check if the zip code is not empty or undefined.
2. Check if the zip code contains only numbers and hyphens.

### `normalizeZipCode`
#### Description
This function normalizes a zip code by taking the first 4-5 characters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| zipCode | string | The zip code to be normalized |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| normalizedZip | string | The normalized zip code |

#### Internal Logic
1. Call `normalizeZipCodeSafe` to get the normalized zip code.
2. If the result is undefined, throw an error.
3. Return the normalized zip code.

### `normalizeZipCodeSafe`
#### Description
This function safely normalizes a zip code by taking the first 4-5 characters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| zipCode | string | The zip code to be normalized |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| normalizedZip | string \| undefined | The normalized zip code or undefined if invalid |

#### Internal Logic
1. Trim the input zip code.
2. Check if the trimmed zip code is valid using `isValidZipCode`.
3. If the zip code includes a hyphen and is 9 characters long, return the first 4 characters.
4. If the zip code is 8 characters long, return the first 4 characters.
5. Otherwise, return the first 5 characters.

## TODOs
- Refactor `normalize` to simply return a zip of a certain format and return undefined if it cannot, while `validate` would throw an error.

## Dependencies
This code does not have any external dependencies.

## Error Handling
The `normalizeZipCode` function throws an error if the zip code is invalid. The `normalizeZipCodeSafe` function returns `undefined` for invalid zip codes instead of throwing an error.