---
title: "url.ts"
---

## High-level description
This code defines a utility function `isValidUrl` that checks whether a given string is a valid URL. It uses the built-in `URL` constructor to validate the input string.

## Symbols

### `isValidUrl`
#### Description
The `isValidUrl` function takes a string or undefined as input and returns a boolean indicating whether the input is a valid URL. It accomplishes this by attempting to create a new `URL` object with the input string.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| url | string \| undefined | The URL string to be validated |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| isValid | boolean | True if the input is a valid URL, false otherwise |

#### Internal Logic
1. If the input `url` is falsy (undefined, null, empty string, etc.), the function immediately returns `false`.
2. The function attempts to create a new `URL` object with the input string.
3. If the `URL` constructor succeeds, the function returns `true`.
4. If the `URL` constructor throws an error (which happens for invalid URLs), the function catches the error and returns `false`.

## Dependencies
This function relies on the built-in `URL` class, which is part of the JavaScript standard library.

## Error Handling
The function uses a try-catch block to handle the potential error thrown by the `URL` constructor. Instead of propagating the error, it catches it and returns `false`, effectively treating any URL that causes an error as invalid.

## References
The `isValidUrl` function is used in the related code snippet `packages/api/src/external/carequality/command/cq-directory/parse-cq-directory-entry.ts`. Specifically, it's used in the `getUrls` function to validate the URLs for different endpoints (XCPD, DQ, and DR) before adding them to the `CQOrgUrls` object.

```typescript
if (isValidUrl(urlXCPD)) {
  urls.urlXCPD = urlXCPD;
}
if (isValidUrl(urlDQ)) {
  urls.urlDQ = urlDQ;
}
if (isValidUrl(urlDR)) {
  urls.urlDR = urlDR;
}
```

This usage demonstrates the practical application of the `isValidUrl` function in validating URLs before they are used or stored in the application, helping to ensure data integrity and prevent issues that could arise from invalid URLs.