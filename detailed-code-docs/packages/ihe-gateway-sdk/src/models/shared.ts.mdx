---
title: "shared.ts"
---

## High-level description
This file defines shared schemas and types for the IHE Gateway SDK using Zod for runtime type checking. It includes schemas for various data structures used in IHE (Integrating the Healthcare Enterprise) transactions, such as NPI (National Provider Identifier), OID (Object Identifier), SAML attributes, and various request and response types for document queries and retrievals.

## Code Structure
The file exports multiple Zod schemas and their corresponding TypeScript types. These schemas define the structure and validation rules for various data objects used in IHE Gateway communications. The schemas are interconnected, with some schemas referencing others to create more complex data structures.

## Symbols

### `npiStringSchema`
#### Description
Defines a schema for a valid NPI string.

#### Internal Logic
Uses Zod to define a string of length 10 and refines it with a custom validation function `validateNPI`.

### `NPIString`
#### Description
TypeScript type inferred from `npiStringSchema`.

### `npiStringArraySchema`
#### Description
Defines a schema for an array of NPI strings.

### `NPIStringArray`
#### Description
TypeScript type inferred from `npiStringArraySchema`.

### `oidStringSchema`
#### Description
Defines a schema for a valid OID string.

#### Internal Logic
Uses Zod to define a string and refines it with a custom validation function `normalizeOid`.

### `SamlAttributesSchema`
#### Description
Defines a schema for SAML (Security Assertion Markup Language) attributes.

#### Internal Logic
Uses Zod to define an object with various properties related to SAML attributes.

### `SamlAttributes`
#### Description
TypeScript type inferred from `SamlAttributesSchema`.

### `baseRequestSchema`
#### Description
Defines a base schema for request objects.

#### Internal Logic
Uses Zod to define an object with common properties for request objects.

### `BaseRequest`
#### Description
TypeScript type inferred from `baseRequestSchema`.

### `codeSchema`
#### Description
Defines a schema for code objects.

### `Code`
#### Description
TypeScript type inferred from `codeSchema`.

### `detailsSchema`
#### Description
Defines a schema for details objects.

### `Details`
#### Description
TypeScript type inferred from `detailsSchema`.

### `issueSchema`
#### Description
Defines a schema for issue objects.

### `Issue`
#### Description
TypeScript type inferred from `issueSchema`.

### `operationOutcomeSchema`
#### Description
Defines a schema for operation outcome objects.

### `OperationOutcome`
#### Description
TypeScript type inferred from `operationOutcomeSchema`.

### `externalGatewayPatientSchema`
#### Description
Defines a schema for external gateway patient objects.

### `XCPDPatientId`
#### Description
TypeScript type inferred from `externalGatewayPatientSchema`.

### `baseResponseSchema`
#### Description
Defines a base schema for response objects.

### `BaseResponse`
#### Description
TypeScript type inferred from `baseResponseSchema`.

### `baseErrorResponseSchema`
#### Description
Defines a schema for error response objects.

### `BaseErrorResponse`
#### Description
TypeScript type inferred from `baseErrorResponseSchema`.

### `isBaseErrorResponse`
#### Description
Function to check if an object is a `BaseErrorResponse`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| obj | unknown | The object to check |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | boolean | True if the object is a `BaseErrorResponse`, false otherwise |

### `xcaGatewaySchema`
#### Description
Defines a schema for XCA (Cross-Community Access) gateway objects.

### `XCAGateway`
#### Description
TypeScript type inferred from `xcaGatewaySchema`.

### `XCPDGatewaySchema`
#### Description
Defines a schema for XCPD (Cross-Community Patient Discovery) gateway objects.

### `XCPDGateway`
#### Description
TypeScript type inferred from `XCPDGatewaySchema`.

### `documentReferenceSchema`
#### Description
Defines a schema for document reference objects.

### `DocumentReference`
#### Description
TypeScript type inferred from `documentReferenceSchema`.

## Dependencies
- `z` from "zod"
- `validateNPI`, `normalizeOid` from "@metriport/shared"

## Error Handling
The code uses Zod for schema validation, which will throw errors if the data doesn't match the defined schemas.

## Logging
This file does not implement any logging mechanisms.

## API/Interface Reference
This file primarily defines schemas and types, and does not expose an API or interface directly. However, the exported types and schemas can be used as part of an API in other parts of the application.

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.