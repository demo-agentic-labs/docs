---
title: "ihe-gateway.ts"
---

## High-level description
This code defines the `IHEGateway` class, which provides an interface for making IHE (Integrating the Healthcare Enterprise) protocol requests. It includes methods for patient discovery, document query, and document retrieval, following specific IHE profiles and transactions.

## Code Structure
The `IHEGateway` class encapsulates the functionality for interacting with an IHE gateway. It uses Axios for making HTTP requests and provides methods that correspond to different IHE transactions.

## Symbols

### `IHEGateway`
#### Description
A class that represents an IHE Gateway client, providing methods to interact with IHE profiles and transactions.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| options | \{ url: string; timeout?: number \} | Configuration options for the IHE Gateway |

#### Internal Logic
- Creates an Axios instance with the provided URL and timeout
- Defines static endpoints for different IHE transactions
- Provides methods for patient discovery, document query, and document retrieval

### `startPatientDiscovery`
#### Description
Initiates a Patient Discovery (XCPD ITI-55) request to the IHE Gateway.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| outboundPatientDiscoveryReq | OutboundPatientDiscoveryReq | Patient discovery transaction request |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise&lt;void&gt; | Promise&lt;void&gt; | A promise that resolves when the request is complete |

### `startDocumentsQuery`
#### Description
Initiates a Query Documents (XCA-ITI-38) request to the IHE Gateway.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| outboundDocumentQueryReq | OutboundDocumentQueryReq[] | An array of document query transaction requests |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise&lt;void&gt; | Promise&lt;void&gt; | A promise that resolves when the request is complete |

### `startDocumentsRetrieval`
#### Description
Initiates a Retrieve Documents (XCA-ITI-39) request to the IHE Gateway.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| outboundDocumentRetrievalReq | OutboundDocumentRetrievalReq[] | An array of document retrieval transaction requests |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise&lt;void&gt; | Promise&lt;void&gt; | A promise that resolves when the request is complete |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| axios | Used for making HTTP requests to the IHE Gateway |
| dayjs | Used for handling date and time operations |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| DEFAULT_AXIOS_TIMEOUT | Duration | 2 minutes | Default timeout for Axios requests |

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /xcpd/ | POST | OutboundPatientDiscoveryReq | void | Patient Discovery (XCPD ITI-55) |
| /xcadq/ | POST | OutboundDocumentQueryReq[] | void | Query Documents (XCA-ITI-38) |
| /xcadr/ | POST | OutboundDocumentRetrievalReq[] | void | Retrieve Documents (XCA-ITI-39) |

This code provides a clean and structured interface for interacting with an IHE Gateway, encapsulating the complexity of the underlying protocols and transactions. It uses modern JavaScript features and follows best practices for API design and error handling.
