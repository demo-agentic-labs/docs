---
title: "TestCreatePatient.java"
---

## High-level description
This code is a JUnit test class (`TestCreatePatient`) that demonstrates how to create a patient using the Metriport API client. It sets up the necessary data structures, including personal identifiers and address information, and then uses the Metriport client to send a create patient request.

## Code Structure
The main class `TestCreatePatient` contains a single test method `createPatient()`. This method sets up the Metriport client, creates the necessary data structures, and then sends a request to create a patient.

## Symbols

### TestCreatePatient
#### Description
This is the main test class that contains the `createPatient()` test method.

### createPatient()
#### Description
This test method demonstrates the process of creating a patient using the Metriport API client.

#### Internal Logic
1. Load environment variables using Dotenv.
2. Initialize the Metriport client with API key and base URL.
3. Create a driver's license personal identifier.
4. Create an SSN personal identifier.
5. Build the base patient data structure.
6. Create a patient create request.
7. Send the request to create a patient and print the received patient ID.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| com.metriport.generated.Metriport | Main Metriport API client |
| com.metriport.generated.resources.medical.patient.requests.PatientCreate | Patient creation request structure |
| com.metriport.generated.resources.medical.patient.types.BasePatient | Base patient data structure |
| com.metriport.generated.resources.medical.patient.types.PersonalIdentifier | Personal identifier structure |
| com.metriport.generated.resources.medical.patient.types.DriversLicense | Driver's license structure |
| com.metriport.generated.resources.medical.patient.types.Ssn | SSN structure |
| com.metriport.generated.resources.commons.types.Address | Address structure |
| com.metriport.generated.resources.commons.types.UsState | US state enumeration |
| io.github.cdimascio.dotenv.Dotenv | Environment variable loading |
| org.junit.jupiter.api.Test | JUnit 5 test annotation |

## Configuration
The test uses environment variables for configuration:
| Option | Type | Description |
|:-------|:-----|:------------|
| API_KEY | String | API key for authentication |
| FACILITY_ID | String | ID of the facility |
| BASE_URL | String | Base URL for the Metriport API |

## Error Handling
This test does not implement explicit error handling. Any exceptions thrown during the execution will cause the test to fail.

## Logging
The test uses `System.out.println()` to log the received patient ID after successful creation.

## Notes
1. The test creates a patient with both a driver's license and SSN as personal identifiers.
2. The patient's address is set to a single address in Los Angeles, CA.
3. The test uses hardcoded values for patient details (name, DOB, gender, etc.). In a real-world scenario, these might be parameterized or randomized.
4. The test doesn't include any assertions, it only prints the received patient ID. To make it a proper unit test, assertions should be added to verify the expected behavior.