---
title: "TestMatchPatient.java"
---

## High-level description
This Java code defines a test class `TestMatchPatient` that demonstrates the process of creating a patient record and then matching it using the Metriport API. It showcases how to use the Metriport client to interact with the patient-related endpoints, including creating a new patient and matching an existing patient based on demographic information.

## Code Structure
The code consists of a single test method `matchPatient()` within the `TestMatchPatient` class. This method sets up the Metriport client, creates a patient record, and then attempts to match the patient using the same demographic information.

## Symbols

### TestMatchPatient
#### Description
This class contains a test method to demonstrate the creation and matching of a patient using the Metriport API.

### matchPatient()
#### Description
This test method demonstrates the process of creating a patient record and then matching it using the Metriport API.

#### Internal Logic
1. Load environment variables using Dotenv.
2. Initialize the Metriport client with API key and base URL.
3. Create a `DriversLicense` object with state and license number.
4. Create a `PersonalIdentifier` using the driver's license.
5. Build a `BasePatient` object with demographic information.
6. Create a patient record using the Metriport client.
7. Build a `Demographics` object with the same information as the created patient.
8. Attempt to match the patient using the Metriport client.
9. Print the ID of the matched patient.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| com.metriport.generated.Metriport | Metriport API client |
| io.github.cdimascio.dotenv.Dotenv | Loading environment variables |
| org.junit.jupiter.api.Test | JUnit 5 test annotation |

## Configuration
The code uses environment variables for configuration:
| Option | Type | Description |
|:-------|:-----|:------------|
| API_KEY | String | API key for authenticating with Metriport |
| FACILITY_ID | String | ID of the facility associated with the patient |
| BASE_URL | String | Base URL for the Metriport API |

## Error Handling
The code does not implement explicit error handling. It relies on the default exception handling provided by JUnit and the Metriport client.

## API/Interface Reference
The code demonstrates the use of two main API endpoints:
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| patient().create() | POST | Creates a new patient record |
| patient().match() | POST | Matches an existing patient based on demographic information |

Note: The actual endpoint URLs are abstracted by the Metriport client library.