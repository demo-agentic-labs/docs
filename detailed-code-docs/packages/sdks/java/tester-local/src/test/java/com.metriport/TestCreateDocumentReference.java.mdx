---
title: "TestCreateDocumentReference.java"
---

## High-level description
This code is a JUnit test class that demonstrates the creation of a DocumentReference using the Metriport API. It constructs a DocumentReference object with various FHIR-compliant components and sends it to the API using the Metriport client.

## Symbols

### TestCreateDocumentReference
#### Description
This is the main test class containing a single test method to create and upload a DocumentReference.

### test_start_doc_query
#### Description
This test method demonstrates the process of creating a DocumentReference and uploading it using the Metriport API.

#### Internal Logic
1. Loads environment variables using Dotenv.
2. Initializes the Metriport client with API key and base URL.
3. Creates various FHIR-compliant objects (Coding, CodeableConcept, Period, etc.) to construct the DocumentReference.
4. Builds the DocumentReference object with the created components.
5. Creates an UploadDocumentRequest with the DocumentReference and patient ID.
6. Sends the request to the Metriport API and prints the response.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| com.metriport.generated.Metriport | Metriport API client |
| com.metriport.generated.resources.fhir.types.* | FHIR data types |
| com.metriport.generated.resources.medical.document.requests.UploadDocumentRequest | Request object for document upload |
| org.junit.jupiter.api.Test | JUnit 5 test annotation |
| io.github.cdimascio.dotenv.Dotenv | Environment variable loading |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| API_KEY | String | N/A | API key for Metriport authentication |
| BASE_URL | String | N/A | Base URL for the Metriport API |
| PATIENT_ID | String | N/A | ID of the patient for whom the document is being uploaded |

## Error Handling
This test method does not implement explicit error handling. Any exceptions thrown during the execution will cause the test to fail.

## Logging
The code uses `System.out.println()` to print the API response, which is not a formal logging mechanism but serves as a simple way to display the result.