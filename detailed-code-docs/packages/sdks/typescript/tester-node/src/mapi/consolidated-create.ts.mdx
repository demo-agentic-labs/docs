---
title: "consolidated-create.ts"
---

## High-level description
This code defines a function `main()` that demonstrates the usage of the Metriport Medical API to create consolidated patient data. It uses environment variables to configure the API client and then calls the `createPatientConsolidated` method with a sample FHIR Bundle containing an Appointment resource.

## Code Structure
The code imports necessary dependencies, sets up configuration using environment variables, and defines a `main()` function that initializes the Metriport Medical API client and calls the `createPatientConsolidated` method.

## References
- `MetriportMedicalApi` from "@metriport/api-sdk"
- `getEnvVarOrFail` from "@metriport/core/util/env-var"

## Symbols

### `main()`
#### Description
An asynchronous function that demonstrates the usage of the Metriport Medical API to create consolidated patient data.

#### Internal Logic
1. Logs a message indicating the start of the operation.
2. Initializes a `MetriportMedicalApi` instance with the API token and base address.
3. Calls `createPatientConsolidated` method with a patient ID and a FHIR Bundle containing an Appointment resource.
4. Logs the result of the operation.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/api-sdk | Provides the MetriportMedicalApi class for interacting with the Metriport Medical API |
| @metriport/core/util/env-var | Provides utility functions for accessing environment variables |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| API_URL | string | N/A | The base URL for the Metriport API |
| API_KEY | string | N/A | The API key for authenticating with the Metriport API |
| PATIENT_ID | string | N/A | The ID of the patient for which to create consolidated data |

## Error Handling
The code does not implement explicit error handling. Errors thrown by the API calls or environment variable retrieval will propagate up the call stack.

## Logging
The code uses `console.log` to output information about the operation being performed and its result.