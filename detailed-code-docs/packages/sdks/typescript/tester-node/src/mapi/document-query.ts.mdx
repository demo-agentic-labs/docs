---
title: "document-query.ts"
---

## High-level description
This code is a Node.js script that demonstrates how to use the Metriport Medical API to retrieve the status of a document query for a specific patient. It uses environment variables for configuration and the `@metriport/api-sdk` package to interact with the API.

## Code Structure
The script imports necessary dependencies, retrieves environment variables, initializes the Metriport Medical API client, and then executes a function to get the document query status for a patient.

## Symbols

### `main`
#### Description
An asynchronous function that serves as the entry point for the script. It initializes the API client and retrieves the document query status for a patient.

#### Internal Logic
1. Retrieves required environment variables (API key, API address, and patient ID).
2. Initializes the MetriportMedicalApi client with the provided API key and address.
3. Logs the start of the operation.
4. Calls the `getDocumentQueryStatus` method of the API client with the patient ID.
5. Logs the response from the API.
6. Logs completion of the operation.

#### Side Effects
- Logs messages to the console.
- Makes an HTTP request to the Metriport Medical API.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| dotenv | Loads environment variables from a .env file |
| @metriport/api-sdk | Provides the MetriportMedicalApi client for interacting with the Metriport Medical API |
| @metriport/core/util/env-var | Provides utility functions for working with environment variables |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| API_KEY | string | N/A | The API key for authenticating with the Metriport Medical API |
| API_ADRESS | string | N/A | The base address of the Metriport Medical API |
| PATIENT_ID | string | N/A | The ID of the patient for which to retrieve the document query status |

## Error Handling
The script uses the `getEnvVarOrFail` function, which throws an error if a required environment variable is missing. Any errors during the API call will be thrown and not caught in this script.