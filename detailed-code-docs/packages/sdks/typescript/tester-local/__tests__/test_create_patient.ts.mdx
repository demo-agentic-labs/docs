---
title: "test_create_patient.ts"
---

## High-level description
This code defines a test suite for creating a patient using the MetriportClient. It demonstrates how to set up the client, construct patient data, and make an API call to create a patient record.

## Code Structure
The code is structured as a Jest test suite, with a single test case for creating a patient. It uses environment variables for configuration and imports necessary types and classes from the MetriportClient SDK.

## Symbols

### `MetriportClient`
#### Description
A client class used to interact with the Metriport API. It is instantiated with configuration options including the API URL and token.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| config | object | Configuration object containing environment and apiKey functions |

### `describe("Patient tests", ...)`
#### Description
A Jest test suite that groups related test cases for patient operations.

### `test("create a patient", ...)`
#### Description
A test case that demonstrates the process of creating a patient using the MetriportClient.

#### Internal Logic
1. Defines patient data including personal information and identifiers.
2. Creates a patient creation request object.
3. Calls the `metriport.medical.patient.create` method with the request.
4. Logs the received patient ID.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| dotenv | Loading environment variables from a .env file |
| path | Resolving file paths |
| MetriportClient | Main client for interacting with the Metriport API |
| BasePatient | Type definition for patient data |
| PatientCreate | Type definition for patient creation request |
| UsState | Enumeration of US states |
| Address | Type definition for address data |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| BASE_URL | string | N/A | The base URL for the Metriport API |
| API_KEY | string | N/A | The API key for authentication |
| FACILITY_ID | string | N/A | The ID of the facility creating the patient |

## Error Handling
The code includes basic error handling by throwing an error if required environment variables are not set.

```typescript
if (!apiUrl || !apiToken || !facilityId) {
  throw new Error("Required environment variables are not set");
}
```

## TODOs
There are no explicit TODOs in the code.

This test file demonstrates how to use the MetriportClient SDK to create a patient record. It showcases the structure of patient data, including personal identifiers and address information. The test is designed to verify that the patient creation process works correctly and logs the received patient ID for confirmation.