---
title: "test_get_patient.ts"
---

## High-level description
This code contains unit tests for the MetriportClient's patient-related functionality. It tests the ability to retrieve a list of all patients and to fetch a specific patient by ID using the Metriport API.

## Code Structure
The code sets up the testing environment, initializes the MetriportClient, and defines two test cases within a "Patient tests" describe block.

## Symbols

### `describe("Patient tests", ...)`
#### Description
This is a Jest test suite that groups related tests for patient operations.

#### Internal Logic
The suite contains two test cases: one for retrieving all patients and another for fetching a specific patient.

### `test("get all patients", ...)`
#### Description
This test case verifies the functionality of retrieving all patients using the MetriportClient.

#### Internal Logic
1. Calls the `metriport.medical.patient.list()` method to fetch all patients.
2. Iterates through the received patients and logs their IDs.

### `test("get specific patient", ...)`
#### Description
This test case verifies the functionality of retrieving a specific patient by ID using the MetriportClient.

#### Internal Logic
1. Calls the `metriport.medical.patient.get(patientId)` method to fetch a specific patient.
2. Logs the ID of the received patient.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| dotenv | To load environment variables from a .env file |
| path | To resolve the path to the .env file |
| MetriportClient | The main client for interacting with the Metriport API |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| BASE_URL | string | N/A | The base URL for the Metriport API |
| API_KEY | string | N/A | The API key for authenticating with the Metriport API |
| PATIENT_ID | string | N/A | The ID of a specific patient to be used in tests |

## Error Handling
The code includes basic error handling by throwing an error if the required environment variables are not set.

```typescript
if (!apiUrl || !apiToken || !patientId) {
  throw new Error("Required environment variables are not set");
}
```

This ensures that the tests will fail early if the necessary configuration is missing, rather than producing unclear errors later in the execution.