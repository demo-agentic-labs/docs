---
title: "Overview"
---

## High-level description
This directory contains a suite of unit tests for the Metriport SDK, specifically focusing on the TypeScript implementation. The tests cover various functionalities of the SDK, including patient management, medical record retrieval, document querying, and webhook payload verification.

## What does it do?
The test suite in this directory serves several purposes:

1. It verifies the functionality of the MetriportClient, ensuring that it can perform operations such as creating patients, retrieving patient information, and querying medical records.

2. It tests the SDK's ability to interact with the Metriport API, including starting consolidated queries and document queries.

3. It checks the correctness of webhook payload types for patient document data and consolidated data.

4. It demonstrates how to use various features of the SDK, serving as both a test suite and a set of usage examples.

These tests help ensure the reliability and correctness of the SDK, as well as provide developers with examples of how to use the SDK's features in their own applications.

## Key Files

1. `test_create_patient.ts`: Tests the patient creation functionality.
   - Demonstrates how to set up the MetriportClient and create a new patient record.
   - Uses mock patient data to test the creation process.

2. `test_get_medical_record.ts`: Verifies medical record retrieval operations.
   - Tests both getting a medical record summary and checking its status.
   - Shows how to use the SDK to request and manage medical records.

3. `test_get_patient.ts`: Tests patient retrieval functionality.
   - Includes tests for fetching all patients and a specific patient by ID.
   - Demonstrates how to use the SDK to manage patient data.

4. `test_match_patient.ts`: Tests the patient matching functionality.
   - Creates a patient and then attempts to match the same patient using demographic data.
   - Showcases the SDK's ability to handle patient matching scenarios.

5. `test_start_consolidated_query.ts`: Tests the consolidated query feature.
   - Demonstrates the process of starting a consolidated query, checking its status, and counting patient data.
   - Includes a delay to simulate real-world API response times.

6. `test_start_doc_query.ts`: Verifies the document query functionality.
   - Tests the `startQuery` method of the document resource in the medical API.
   - Shows how to initiate document queries using the SDK.

7. `verify-webhook-types.ts`: Defines and tests webhook payload types.
   - Includes type definitions and sample payloads for patient document data and consolidated data webhooks.
   - Ensures type correctness of webhook payloads.

## Dependencies
The test suite relies on the following main dependencies:

1. MetriportClient: The core SDK client used to interact with the Metriport API.
2. Jest: The testing framework used to structure and run the tests.
3. dotenv: Used to load environment variables for configuration.

## Configuration
The tests use environment variables for configuration, typically loaded from a `.env` file. Common configuration options include:

- BASE_URL: The base URL for the Metriport API
- API_KEY: The API key for authentication
- PATIENT_ID: ID of a test patient
- FACILITY_ID: ID of a test facility

These environment variables are crucial for the tests to run correctly, and the code includes checks to ensure they are set before proceeding with the tests.

This test suite provides comprehensive coverage of the Metriport SDK's functionality, ensuring its reliability and demonstrating its usage for developers integrating the SDK into their applications.