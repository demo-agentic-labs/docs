---
title: "Overview"
---

## High-level description
This directory contains a Python project that implements a local tester for the Metriport Python SDK. It includes a suite of test scripts that interact with the Metriport API to verify various functionalities such as patient management, document handling, and consolidated queries. The project is structured using Poetry for dependency management and includes configuration files for setting up the development environment.

## What does it do?
The local tester performs the following main functions:

1. Patient Management:
   - Creates new patient records with sample data
   - Retrieves patient information (both individual and all patients)
   - Matches patients based on demographic data

2. Document Handling:
   - Creates document references
   - Lists documents for a specific patient
   - Initiates bulk document downloads

3. Consolidated Queries:
   - Starts consolidated queries for patient data
   - Checks the status of these queries
   - Counts patient data after query completion

4. API Interaction:
   - Demonstrates proper usage of the Metriport SDK
   - Shows how to authenticate and make various API calls
   - Illustrates handling of API responses

These tests serve as both functional verification for the SDK and usage examples for developers integrating the Metriport API into their applications.

## Key Files
1. `README.md`: Provides instructions for regenerating the Python SDK locally and running the tests.

2. `pyproject.toml`: Configures the project's dependencies, development dependencies, and build system requirements using Poetry.

3. `tests/`: A directory containing various test scripts, each focusing on specific API functionalities:
   - `test_create_patient.py`: Creates a new patient record
   - `test_get_patient.py`: Retrieves patient information
   - `test_match_patient.py`: Matches a patient using demographic data
   - `test_create_document_reference.py`: Creates a document reference
   - `test_list_documents.py`: Lists documents for a specific patient
   - `test_start_bulk_download.py`: Initiates a bulk download of document URLs
   - `test_start_consolidated_query.py`: Starts and checks a consolidated query
   - `test_create_patient_consolidated.py`: Creates a consolidated patient record
   - `test_start_doc_query.py`: Starts a document query for a specific patient and facility

## Dependencies
The project relies on the following main dependencies:

1. httpx (version 0.21.2 or higher): HTTP client library for making API requests
2. pydantic (version 1.9.2 or higher, but less than 2.5.0): Data validation and settings management
3. python-dotenv (version 1.0.0 or higher): Loads environment variables from a .env file
4. fastapi (version 0.109.1 or higher): Web framework for building APIs

Development dependencies include:
- mypy (version 0.971): Optional static type checker
- pytest: Testing framework

## Configuration
The project uses environment variables for configuration, typically loaded from a .env file. Key configuration options include:

| Option | Type | Description |
|:-------|:-----|:------------|
| API_KEY | string | API key for authenticating with the Metriport API |
| PATIENT_ID | string | ID of a test patient used in various tests |
| FACILITY_ID | string | ID of a facility used in some tests |
| BASE_URL | string | Base URL for the Metriport API |

The `pyproject.toml` file also specifies project metadata and Python version requirements (3.11 or higher).

To set up and run the tests, users need to:
1. Regenerate the Python SDK locally using `fern generate --group test`
2. Install dependencies with `poetry install` and `pip install -r requirements.txt`
3. Run tests using `poetry run pytest tests`

This local tester provides a comprehensive suite of examples and functional tests for the Metriport Python SDK, covering a wide range of API functionalities and demonstrating proper usage of the SDK for various healthcare data operations.