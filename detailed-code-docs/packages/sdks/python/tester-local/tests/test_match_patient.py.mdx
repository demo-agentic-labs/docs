---
title: "test_match_patient.py"
---

## High-level description
This code is a test file for the Metriport Python SDK, specifically testing the patient matching functionality. It creates a patient record, then attempts to match it using demographic data, demonstrating the usage of the Metriport API for patient management in a healthcare context.

## Code Structure
The code consists of a single test function `test_match_patient()` that interacts with the Metriport API to create and match a patient record.

## Symbols

### `test_match_patient()`
#### Description
This function tests the patient matching functionality of the Metriport API. It creates a patient record and then attempts to match it using demographic data.

#### Internal Logic
1. Initialize the Metriport client with API key and base URL.
2. Create a `BasePatient` object with sample patient data.
3. Use the Metriport client to create a patient record.
4. Create a `Demographics` object with the same patient data.
5. Use the Metriport client to match the patient using the demographic data.
6. Print the ID of the matched patient.

#### Side Effects
- Creates a patient record in the Metriport system.
- Performs a patient match operation.
- Prints the matched patient ID to the console.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| os | Used to access environment variables |
| dotenv | Used to load environment variables from a .env file |
| Metriport | The main client for interacting with the Metriport API |
| UsState, Address | Used to define address information |
| BasePatient, PersonalIdentifier_DriversLicense, Demographics | Used to define patient and demographic data |

## Configuration
The code uses environment variables for configuration:
| Option | Type | Description |
|:-------|:-----|:------------|
| API_KEY | string | The API key for authenticating with the Metriport API |
| FACILITY_ID | string | The ID of the healthcare facility |
| BASE_URL | string | The base URL for the Metriport API |

## Error Handling
The code does not implement explicit error handling. Any exceptions raised during API calls will propagate up.

## Logging
The code includes a simple print statement to log the ID of the matched patient.

## Notes
- The code assumes the existence of a .env file with the necessary environment variables.
- This test creates a new patient record each time it runs, which may not be ideal for repeated testing.
- The test does not include any assertions to verify the correctness of the match operation.
- Consider adding error handling and assertions to make the test more robust and informative.