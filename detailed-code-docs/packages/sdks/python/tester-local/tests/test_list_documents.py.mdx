---
title: "test_list_documents.py"
---

## High-level description
This code is a test script for the Metriport API's document listing functionality. It uses environment variables to set up the API client and then calls the `list` method of the `document` module to retrieve documents for a specific patient.

## Symbols

### `test_list_documents`
#### Description
This function is a test case that demonstrates how to use the Metriport API to list documents for a patient.

#### Inputs
This function doesn't take any inputs directly, but it uses environment variables:

| Name | Type | Description |
|:-----|:-----|:------------|
| API_KEY | string | The API key for authenticating with the Metriport API |
| PATIENT_ID | string | The ID of the patient whose documents are being retrieved |
| BASE_URL | string | The base URL for the Metriport API (optional) |

#### Outputs
This function doesn't return any value, but it prints the API response to the console.

#### Internal Logic
1. Creates a Metriport client instance using the API key and base URL from environment variables.
2. Calls the `list` method of the `medical.document` module, passing the patient ID.
3. Prints the response to the console.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| os | Used to access environment variables |
| dotenv | Used to load environment variables from a .env file |
| generated.client | Provides the Metriport client for API interactions |

## Configuration
The script uses environment variables for configuration:

| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| API_KEY | string | None | The API key for Metriport authentication |
| PATIENT_ID | string | None | The ID of the patient whose documents are being listed |
| FACILITY_ID | string | None | The ID of the facility (not used in this script) |
| BASE_URL | string | None | The base URL for the Metriport API (optional) |

## Error Handling
This script does not implement explicit error handling. Any exceptions raised during the API call will propagate up and cause the test to fail.

## Logging
The script uses a simple `print` statement to log the API response to the console.

## Notes
1. The `FACILITY_ID` environment variable is loaded but not used in the current implementation.
2. The script uses the `dotenv` library to load environment variables, which allows for easy configuration management across different environments.
3. This test appears to be a simple smoke test or integration test to verify that the document listing functionality is working correctly with the Metriport API.
4. The test doesn't include any assertions, so it's mainly useful for manual verification or as part of a larger test suite that might analyze the printed output.