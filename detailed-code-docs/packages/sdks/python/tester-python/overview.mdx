---
title: "Overview"
---

## High-level description
This code defines a test function that demonstrates the creation of an organization using the Metriport Medical API client. It showcases how to initialize the client, create an organization with specific details, and handle the response.

## Symbols

### `test_client()`
#### Description
This function serves as a test case for creating an organization using the Metriport Medical API client.

#### Internal Logic
1. Initializes a Metriport client with an API key and a base URL.
2. Creates an organization using the client's `medical.organization.create` method.
3. Prints the ID of the created organization.

### `get_api_key()`
#### Description
This function retrieves the Metriport API key from the environment variables.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| api_key | str | The Metriport API key |

#### Internal Logic
1. Attempts to retrieve the "METRIPORT_API_KEY" from environment variables.
2. Raises an exception if the key is not found.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| os | To access environment variables |
| metriport.client | To use the Metriport client |
| metriport.commons | To use common data structures |
| metriport.resources | To use medical-related resources |
| dotenv | To load environment variables from a .env file |

## Configuration
The script uses environment variables for configuration:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| METRIPORT_API_KEY | str | None | The API key for authenticating with Metriport |

## Error Handling
The script includes basic error handling:
- Raises an exception if the METRIPORT_API_KEY is not found in the environment variables.

## Side Effects
- Loads environment variables from a .env file.
- Creates an organization in the Metriport system when `test_client()` is called.
- Prints the ID of the created organization to the console.