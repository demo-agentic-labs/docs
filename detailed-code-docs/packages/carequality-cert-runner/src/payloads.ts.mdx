---
title: "payloads.ts"
---

## High-level description
This code defines a function `generatePatient` that creates a standardized patient discovery request payload for use in healthcare information exchange, specifically for the Carequality certification process. It generates a mock patient record with predefined attributes, including personal information, identifiers, and organizational details.

## Symbols

### `generatePatient`
#### Description
This function creates an `OutboundPatientDiscoveryReq` object, which represents a patient discovery request in the context of Cross-Community Patient Discovery (XCPD) in healthcare information exchange.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| xcpdGateways | XCPDGateway[] | An array of XCPD gateway configurations |
| orgOid | string | The Organization Identifier (OID) of the requesting organization |
| orgName | string | The name of the requesting organization |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| OutboundPatientDiscoveryReq | object | A structured patient discovery request object |

#### Internal Logic
1. Creates a user string combining the organization name and "System User".
2. Constructs an `OutboundPatientDiscoveryReq` object with:
   - Fixed identifiers (id, cxId, patientId)
   - Provided XCPD gateways
   - Current timestamp
   - SAML attributes for authentication and authorization
   - Mock principal care provider ID
   - A detailed patient resource object with demographic information

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/ihe-gateway-sdk | Imports types for XCPD gateway and patient discovery request |

## References
This code is referenced in the `index.ts` file of the `carequality-cert-runner` package, where it's used to generate a patient payload for the certification process.

## Notes
1. The patient data in this function is hardcoded and represents a test patient (NWHINZZZTESTPATIENT). This is likely intentional for certification purposes.
2. The function uses a fixed timestamp, which might need to be updated for actual use cases.
3. The SAML attributes include specific codes and roles that are likely required for the Carequality certification process.
4. The patient resource follows the FHIR (Fast Healthcare Interoperability Resources) standard structure.

This code is crucial for generating standardized test data for the Carequality certification process, ensuring that the system can correctly format and send patient discovery requests in a healthcare information exchange context.