---
title: "Overview"
---

## High-level description
This directory contains the source code for a Carequality certification test runner. It's designed to execute and validate Carequality certification test cases, focusing primarily on patient discovery processes within healthcare information exchange systems. The code utilizes the IHE Gateway SDK to interact with healthcare information exchange protocols and standards.

## What does it do?
The Carequality certification test runner performs the following main functions:

1. Sets up a command-line interface for running certification test cases.
2. Configures the environment using command-line options and a .env file.
3. Generates a standardized patient discovery request payload.
4. Initiates a patient discovery request using the IHE Gateway SDK.

The tool simulates the process of querying for patient information across different healthcare organizations, which is a crucial part of healthcare interoperability. It creates a mock patient record with predefined attributes and sends this information as part of a patient discovery request. This process helps validate that the system can correctly format, send, and potentially receive patient information in compliance with Carequality standards.

## Key Files

1. `index.ts`:
   - This is the main entry point of the application.
   - It sets up the command-line interface using the `commander` library.
   - Orchestrates the overall process of running the certification test cases.
   - Initializes the IHE Gateway and triggers the patient discovery request.

2. `payloads.ts`:
   - Contains the `generatePatient` function, which creates a standardized patient discovery request payload.
   - Defines the structure and content of the mock patient data used in the certification process.

The data flow in this application starts from the command-line arguments and environment variables, which are used to configure the IHE Gateway. The `generatePatient` function in `payloads.ts` creates the patient data, which is then used by the main function in `index.ts` to initiate the patient discovery request through the IHE Gateway.

## Dependencies
The main external dependencies used in this project are:

1. @metriport/ihe-gateway-sdk (version not specified):
   - Provides the `IHEGateway` class for interacting with the IHE Gateway.
   - Chosen for its implementation of healthcare information exchange protocols.

2. dotenv (version not specified):
   - Used for loading environment variables from a .env file.
   - Chosen for its simplicity in managing configuration across different environments.

3. commander (version not specified):
   - Handles command-line argument parsing.
   - Chosen for its robust and user-friendly API for creating command-line interfaces.

## Configuration
The application uses a .env file for configuration. The following environment variables are required:

```
IHE_GATEWAY_URL=&lt;URL of the IHE Gateway&gt;
XCPD_GATEWAY_ID=&lt;ID of the XCPD Gateway&gt;
XCPD_GATEWAYS_OID=&lt;OID of the XCPD Gateway&gt;
XCPD_GATEWAYS_URL=&lt;URL of the XCPD Gateway&gt;
ORG_NAME=&lt;Name of the organization&gt;
ORG_OID=&lt;OID of the organization&gt;
```

These configuration options are crucial for setting up the IHE Gateway and specifying the details of the organization and XCPD Gateway involved in the certification process.

The application also accepts command-line arguments to specify the path to the .env file, allowing for flexible configuration across different environments or test scenarios.

It's worth noting that the current implementation focuses on patient discovery, with plans to include document query and retrieval functionality in future updates when the corresponding API routes are ready.