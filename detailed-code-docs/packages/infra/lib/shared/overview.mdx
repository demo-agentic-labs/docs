---
title: "Overview"
---

## High-level description
This directory contains shared utility functions, constructs, and configurations used across the infrastructure codebase. It provides reusable components for common AWS services like Lambda, SQS, RDS, and WAF, as well as utility functions for environment management, secret handling, and metric creation.

## What does it do?
The shared directory serves as a toolkit for building and managing AWS infrastructure. It offers:

1. Standardized creation of AWS resources like Lambda functions, SQS queues, and RDS clusters.
2. Utility functions for environment detection, configuration management, and data conversion.
3. Reusable constructs for services like OpenSearch and daily backups.
4. Predefined WAF rules for web application protection.
5. Helper functions for CloudWatch metrics and alarms.
6. Utilities for handling secrets and environment variables.

These components help maintain consistency across the infrastructure, reduce code duplication, and provide a common set of best practices for resource creation and management.

## Key Files

1. lambda.ts: Provides functions for creating and configuring Lambda functions with standardized settings and error handling.

2. sqs.ts: Offers utilities for creating SQS queues with dead-letter queues, alarms, and retry mechanisms.

3. rds.ts: Contains functions for adding performance alarms to RDS database clusters.

4. waf-rules.ts: Defines a set of WAF rules for protecting web applications.

5. secrets.ts: Manages the creation and retrieval of secrets, including conversion to ECS-compatible formats.

6. util.ts: Provides utility functions for environment checking, variable handling, and data conversion.

7. open-search-construct.ts: Defines a construct for creating and configuring Amazon OpenSearch domains.

8. backup.ts: Implements a DailyBackup construct for creating AWS Backup plans.

9. cloudwatch-metric.ts: Offers functions for adding CloudWatch alarms to metrics.

## Dependencies
The shared components primarily rely on the following external libraries:

1. aws-cdk-lib: Provides core CDK constructs and utilities for various AWS services.
2. constructs: Offers the base Construct class for CDK.
3. dotenv: Used for loading environment variables from .env files.

## Configuration
Many of the shared components accept configuration options through interfaces or input parameters. For example:

- The `DailyBackup` construct in backup.ts allows configuration of backup schedules, retention periods, and resources to back up.
- The `createQueue` function in sqs.ts accepts a `QueueProps` object for configuring queue properties.
- The `OpenSearchConstruct` in open-search-construct.ts takes various configuration options for the OpenSearch domain.

Environment-specific configuration is often handled through the `EnvConfig` type, which is used in several utility functions to determine the current environment (e.g., staging, production, sandbox).

The shared components provide a flexible and extensible foundation for building AWS infrastructure, allowing for consistent resource creation and management across different parts of the application.