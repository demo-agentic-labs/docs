---
title: "config.ts"
---

## High-level description
This code defines configuration and initialization functions for an infrastructure project. It provides a way to load environment-specific configuration and set up various AWS resources and services.

## Code Structure
The main symbols in this code are `getConfig()`, `initConfig()`, and `METRICS_NAMESPACE`. `initConfig()` is used to initialize the configuration, which is then accessed through `getConfig()`. `METRICS_NAMESPACE` is a constant used for metrics.

## Symbols

### METRICS_NAMESPACE
#### Description
A constant string value used as a namespace for metrics.

### getConfig()
#### Description
A function that returns the current configuration. It throws an error if the configuration hasn't been initialized.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| config | EnvConfig | The current environment configuration |

#### Internal Logic
- Checks if the `config` variable is defined
- If not, throws an error
- If defined, returns the `config`

### initConfig(node: Node)
#### Description
An asynchronous function that initializes the configuration based on the specified environment.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| node | Node | A Node object from the CDK construct |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| config | Promise&lt;EnvConfig&gt; | A promise that resolves to the initialized environment configuration |

#### Internal Logic
1. Retrieves the environment from the context
2. Validates the environment value
3. Constructs the path to the configuration file
4. Imports the configuration module
5. Validates the imported configuration
6. Sets the global `config` variable
7. Returns the configuration

## Dependencies
The code imports from the following modules:
- `constructs`
- `source-map-support/register`
- `../../config/env-config`
- `../env-type`

## Configuration
The configuration is environment-specific and is loaded from files in the `../../config/` directory. The environment is specified as a context variable when running the CDK command.

## Error Handling
The code includes error handling for:
- Missing or invalid environment context variable
- Missing or invalid configuration file

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.