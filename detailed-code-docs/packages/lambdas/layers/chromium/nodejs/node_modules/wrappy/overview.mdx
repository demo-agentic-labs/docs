---
title: "Overview"
---

## High-level description
This directory contains the `wrappy` npm package, which is a utility for wrapping callback functions. The package consists of two main files: `package.json` and `wrappy.js`. The `wrappy` function is designed to create wrapper functions that preserve the properties of the original function and handle nested callbacks.

## What does it do?
The `wrappy` package provides a function that takes another function as input and returns a new function (wrapper) that behaves similarly to the original function but with some added functionality. This wrapper preserves all the properties of the original function and handles cases where the wrapped function returns another function. 

In simpler terms, it's like putting a function inside a protective bubble. This bubble (the wrapper) looks and acts just like the original function, but it can do extra things, like dealing with nested callbacks or preserving important information about the original function.

## Key Files

1. `wrappy.js`: This is the main file containing the implementation of the `wrappy` function. It exports a single function that creates wrapper functions for callbacks.

2. `package.json`: This file contains metadata about the `wrappy` package, including its version, description, author information, and dependencies.

## Dependencies
The `wrappy` package has no production dependencies. For development and testing, it uses:

- `tap` (version ^2.3.1): A test framework used for running tests and generating coverage reports.

## Configuration
The `package.json` file serves as the configuration for this package. Key configuration points include:

- Version: 1.0.2
- Main entry point: `wrappy.js`
- Test script: `tap --coverage test/*.js`
- License: ISC

## Implementation Details

The core functionality of the `wrappy` package is implemented in the `wrappy.js` file. Here's a breakdown of how it works:

1. The `wrappy` function is the main export of the module. It can be used in two ways:
   - With a single argument: `wrappy(fn)`
   - With two arguments: `wrappy(fn, cb)`

2. When called with two arguments, it recursively calls itself with `wrappy(fn)(cb)`.

3. If the input `fn` is not a function, it throws a TypeError.

4. The function creates a `wrapper` function that:
   - Preserves all properties of the original function `fn`.
   - Calls the original function with the provided arguments.
   - Handles cases where the result of calling `fn` is another function.

5. The wrapper function uses `Object.keys()` and `forEach` loops to copy properties, which ensures that all metadata and additional properties of the original function are preserved.

Here's a simplified example of how the `wrappy` function might be used:

```javascript
const wrappy = require('wrappy');

function originalFunction(x, y, callback) {
  // Some async operation
  setTimeout(() =&gt; {
    callback(null, x + y);
  }, 1000);
}

const wrappedFunction = wrappy(originalFunction);

wrappedFunction(5, 3, (err, result) =&gt; {
  console.log(result); // Outputs: 8
});
```

In this example, `wrappedFunction` behaves the same as `originalFunction`, but it could potentially handle additional scenarios or preserve important metadata about the original function.

The `wrappy` package is particularly useful in scenarios where you need to modify the behavior of callback-based functions without losing their original properties or breaking their functionality in nested callback situations.