---
title: "once.js"
---

## High-level description
This code implements a module that provides functionality to ensure a function is called only once. It exports two main functions: `once` and `onceStrict`, both wrapped with the `wrappy` function. The module also adds `once` and `onceStrict` methods to the `Function.prototype`.

## Code Structure
The code defines two main functions, `once` and `onceStrict`, which are exported after being wrapped with `wrappy`. It also defines a `proto` property on the exported `once` function, which adds methods to the `Function.prototype`.

## References
- `wrappy`: An external module used to wrap the `once` and `onceStrict` functions.

## Symbols

### `once(fn)`
#### Description
Creates a wrapper function that ensures the given function `fn` is called only once. Subsequent calls return the value from the first call.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| fn | Function | The function to be wrapped |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| f | Function | The wrapped function that can be called only once |

#### Internal Logic
1. Creates a new function `f` that wraps the input function `fn`.
2. On the first call, it executes `fn` and stores the result.
3. On subsequent calls, it returns the stored result without executing `fn` again.

### `onceStrict(fn)`
#### Description
Similar to `once`, but throws an error if the wrapped function is called more than once.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| fn | Function | The function to be wrapped |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| f | Function | The wrapped function that can be called only once |

#### Internal Logic
1. Creates a new function `f` that wraps the input function `fn`.
2. On the first call, it executes `fn` and stores the result.
3. On subsequent calls, it throws an error with a message indicating that the function shouldn't be called more than once.

### `once.proto`
#### Description
A function that adds `once` and `onceStrict` methods to the `Function.prototype`, allowing these methods to be called directly on function objects.

#### Internal Logic
1. Defines `once` as a property on `Function.prototype`, which returns the result of calling `once` on the function.
2. Defines `onceStrict` as a property on `Function.prototype`, which returns the result of calling `onceStrict` on the function.
3. Both properties are configurable, allowing them to be modified or deleted if needed.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| wrappy | Used to wrap the `once` and `onceStrict` functions, likely for additional functionality or error handling |

## Error Handling
The `onceStrict` function implements error handling by throwing an error if the wrapped function is called more than once. The error message includes the name of the wrapped function or a default message if the function is anonymous.

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.