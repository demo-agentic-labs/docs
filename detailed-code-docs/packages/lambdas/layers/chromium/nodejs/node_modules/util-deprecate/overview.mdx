---
title: "Overview"
---

## High-level description
The `util-deprecate` directory contains a small utility package that provides a cross-platform implementation of the `deprecate` function. This function is used to mark other functions as deprecated, allowing developers to gracefully phase out old APIs while notifying users of their deprecated status. The package offers both a Node.js version and a browser-compatible version.

## What does it do?
The `util-deprecate` package provides a way for developers to mark functions as deprecated. When a deprecated function is called, it can:
1. Issue a warning message to the console
2. Throw an error
3. Provide a stack trace

This behavior is configurable, allowing developers to choose how aggressively they want to notify users of deprecated functionality. In a Node.js environment, it simply re-exports the built-in `util.deprecate` function. In browser environments, it provides a custom implementation that mimics the Node.js behavior, using `localStorage` for configuration.

## Key Files

### browser.js
This file contains the browser-compatible implementation of the `deprecate` function. It includes:
- A `deprecate` function that wraps the original function with deprecation behavior
- A `config` helper function that checks `localStorage` for configuration options

Key functionality:
```javascript
function deprecate(fn, msg) {
  if (config('noDeprecation')) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (config('throwDeprecation')) {
        throw new Error(msg);
      } else if (config('traceDeprecation')) {
        console.trace(msg);
      } else {
        console.warn(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
}
```

### node.js
This file simply re-exports the `deprecate` function from Node.js's core `util` module:

```javascript
module.exports = require('util').deprecate;
```

## Dependencies
The package does not have any external npm dependencies. However, it does rely on:
- In Node.js: The built-in `util` module
- In browsers: The `localStorage` API for configuration

## Configuration
In browser environments, the package uses `localStorage` for configuration. The following options are supported:

| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| noDeprecation | Boolean | false | If true, deprecation warnings are disabled |
| throwDeprecation | Boolean | false | If true, deprecated function calls throw errors |
| traceDeprecation | Boolean | false | If true, deprecation warnings use `console.trace` instead of `console.warn` |

These options can be set in `localStorage` like this:
```javascript
localStorage.setItem('noDeprecation', 'true');
```

In Node.js environments, these options are typically set using command-line flags or environment variables, as handled by the core `util.deprecate` function.

The package.json file indicates that this is version 1.0.2 of the `util-deprecate` package, licensed under MIT, and maintained by Nathan Rajlich. It's designed to work with both Node.js and browser environments, making it a versatile tool for managing API deprecation across different JavaScript platforms.