---
title: "readable.js"
---

## High-level description
This code is a module that exports various stream-related functionalities. It provides a conditional export mechanism based on an environment variable, either using the native Node.js Stream module or a custom implementation of stream classes.

## Code Structure
The code is structured as a single conditional block that determines which stream implementation to export based on the `READABLE_STREAM` environment variable.

## Symbols

### Main Module Exports
#### Description
The main module exports are determined by the value of the `READABLE_STREAM` environment variable. If set to 'disable' and the native Stream module is available, it exports the native implementation. Otherwise, it exports custom implementations of various stream classes and utility functions.

#### Internal Logic
1. If `READABLE_STREAM` is set to 'disable' and the native Stream module is available:
   - Export the native Stream.Readable
   - Assign all properties of the native Stream to the exports
   - Add a Stream property to the exports referencing the native Stream

2. Otherwise:
   - Export custom implementations of Readable, Writable, Duplex, Transform, and PassThrough streams
   - Export utility functions: finished and pipeline
   - Set the Stream property to either the native Stream (if available) or the custom Readable implementation

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| stream | Native Node.js stream module |
| ./lib/_stream_readable.js | Custom Readable stream implementation |
| ./lib/_stream_writable.js | Custom Writable stream implementation |
| ./lib/_stream_duplex.js | Custom Duplex stream implementation |
| ./lib/_stream_transform.js | Custom Transform stream implementation |
| ./lib/_stream_passthrough.js | Custom PassThrough stream implementation |
| ./lib/internal/streams/end-of-stream.js | Utility function for stream completion |
| ./lib/internal/streams/pipeline.js | Utility function for piping streams |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| READABLE_STREAM | string | undefined | If set to 'disable', uses native Stream implementation |