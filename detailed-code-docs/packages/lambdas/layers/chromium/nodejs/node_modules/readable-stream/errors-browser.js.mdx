---
title: "errors-browser.js"
---

## High-level description
This code defines a set of custom error types and utility functions for error handling in a Node.js-like environment, specifically for stream-related operations. It provides a mechanism to create custom error types with specific error codes and messages, which can be used to handle various error scenarios in stream operations.

## Code Structure
The code defines a `createErrorType` function that creates custom error types, and several utility functions (`oneOf`, `startsWith`, `endsWith`, `includes`) for string manipulation. It then uses `createErrorType` to define multiple error types related to stream operations and invalid arguments.

## Symbols

### `_inheritsLoose`
#### Description
A utility function for implementing inheritance between classes.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| subClass | Function | The child class |
| superClass | Function | The parent class |

#### Internal Logic
Creates a prototype chain between the subClass and superClass, and sets up the constructor and `__proto__` properties.

### `createErrorType`
#### Description
Creates a custom error type with a specific error code and message.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| code | string | The error code |
| message | string or function | The error message or a function to generate it |
| Base | Function | The base error class (optional, defaults to Error) |

#### Internal Logic
1. Defines a `getMessage` function to handle both string and function message types.
2. Creates a new `NodeError` class that extends the specified `Base` class.
3. Sets up the `name` and `code` properties on the `NodeError` prototype.
4. Adds the new error type to the `codes` object.

### `oneOf`
#### Description
Generates a human-readable string describing one of several expected values.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| expected | Array or any | The expected value(s) |
| thing | string | A description of what is expected |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | string | A formatted string describing the expected value(s) |

### `startsWith`, `endsWith`, `includes`
#### Description
Polyfill implementations of String prototype methods for environments that may not support them natively.

## Dependencies
This code does not have any external dependencies.

## Error Handling
The code defines several custom error types for various scenarios:
- `ERR_INVALID_OPT_VALUE`: For invalid option values
- `ERR_INVALID_ARG_TYPE`: For invalid argument types
- `ERR_STREAM_PUSH_AFTER_EOF`: When pushing to a stream after EOF
- `ERR_METHOD_NOT_IMPLEMENTED`: For unimplemented methods
- `ERR_STREAM_PREMATURE_CLOSE`: For premature stream closure
- `ERR_STREAM_DESTROYED`: When calling methods on a destroyed stream
- `ERR_MULTIPLE_CALLBACK`: When a callback is called multiple times
- `ERR_STREAM_CANNOT_PIPE`: When trying to pipe a non-readable stream
- `ERR_STREAM_WRITE_AFTER_END`: When writing to a stream after it has ended
- `ERR_STREAM_NULL_VALUES`: When trying to write null values to a stream
- `ERR_UNKNOWN_ENCODING`: For unknown encodings
- `ERR_STREAM_UNSHIFT_AFTER_END_EVENT`: When unshifting after the end event

These error types can be used throughout the application to handle specific error scenarios related to stream operations.

## Exports
The module exports the `codes` object containing all the created error types.