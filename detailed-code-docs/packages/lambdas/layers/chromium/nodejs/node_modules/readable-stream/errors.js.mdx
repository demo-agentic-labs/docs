---
title: "errors.js"
---

## High-level description
This code defines a custom error creation system for a Node.js stream implementation. It provides a function to create error types with specific codes and messages, and defines several error types commonly used in stream operations.

## Code Structure
The code defines a `createErrorType` function that creates custom error classes. It also includes utility functions for string manipulation and a main object `codes` that stores all created error types. Several specific error types are then created using this system.

## Symbols

### `createErrorType(code, message, Base)`
#### Description
Creates a custom error type with a specified code and message.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| code | string | The error code |
| message | string or function | The error message or a function to generate it |
| Base | Error (optional) | The base Error class to extend, defaults to Error |

#### Internal Logic
1. Defines a `getMessage` function to handle both string and function message types.
2. Creates a `NodeError` class extending the specified Base class.
3. Sets the `name` and `code` properties on the `NodeError` prototype.
4. Stores the new error type in the `codes` object.

### `oneOf(expected, thing)`
#### Description
Generates a human-readable string describing one or more expected values.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| expected | array or any | The expected value(s) |
| thing | string | A description of what is expected |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | string | A formatted string describing the expected value(s) |

### `startsWith(str, search, pos)`
#### Description
Determines if a string starts with the characters of a specified string.

### `endsWith(str, search, this_len)`
#### Description
Determines if a string ends with the characters of a specified string.

### `includes(str, search, start)`
#### Description
Determines whether a string contains the characters of a specified string.

## Error Types
The code defines several error types using `createErrorType`:
- ERR_INVALID_OPT_VALUE
- ERR_INVALID_ARG_TYPE
- ERR_STREAM_PUSH_AFTER_EOF
- ERR_METHOD_NOT_IMPLEMENTED
- ERR_STREAM_PREMATURE_CLOSE
- ERR_STREAM_DESTROYED
- ERR_MULTIPLE_CALLBACK
- ERR_STREAM_CANNOT_PIPE
- ERR_STREAM_WRITE_AFTER_END
- ERR_STREAM_NULL_VALUES
- ERR_UNKNOWN_ENCODING
- ERR_STREAM_UNSHIFT_AFTER_END_EVENT

Each error type is created with a specific code and message format.

## Dependencies
This code does not rely on external libraries or modules.

## Exports
The code exports the `codes` object containing all created error types through `module.exports.codes = codes;`.