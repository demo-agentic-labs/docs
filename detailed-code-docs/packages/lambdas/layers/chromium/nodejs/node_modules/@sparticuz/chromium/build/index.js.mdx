---
title: "index.js"
---

## High-level description
This code defines a `Chromium` class that provides utility methods and properties for managing Chromium in serverless environments, particularly AWS Lambda and Google Cloud Functions. It handles environment setup, font management, and provides configurations for running Chromium headlessly.

## Code Structure
The `Chromium` class contains static methods and getters that handle various aspects of Chromium setup and configuration. The code also includes environment checks and setup at the beginning of the file.

## Symbols

### Chromium
#### Description
A class that provides utility methods and properties for managing Chromium in serverless environments.

### Chromium.font(input)
#### Description
Downloads or symlinks a custom font and returns its basename, patching the environment so that Chromium can find it.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| input | string | URL or file path of the font to be added |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise&lt;string \| null&gt; | Promise | Resolves to the basename of the font or null if not in a serverless environment |

#### Internal Logic
1. Checks if running in headless mode
2. Sets up the font directory
3. Handles both local file and URL inputs
4. Downloads or symlinks the font to the appropriate directory

### Chromium.args
#### Description
A getter that returns a list of additional Chromium flags recommended for serverless environments.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| string[] | Array | List of Chromium command-line arguments |

### Chromium.defaultViewport
#### Description
A getter that returns sensible default viewport settings for Chromium.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Object | Object | Default viewport settings |

### Chromium.executablePath
#### Description
Inflates the current version of Chromium and returns the path to the binary.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise&lt;string \| null&gt; | Promise | Resolves to the path of the Chromium binary or null if not in a serverless environment |

#### Internal Logic
1. Checks if Chromium is already inflated
2. Inflates Chromium and related files
3. Returns the path to the Chromium binary

### Chromium.headless
#### Description
A getter that determines if the current environment is a serverless environment (AWS Lambda or Google Cloud Functions).

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| boolean | Boolean | True if running in a serverless environment, false otherwise |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| fs | File system operations |
| lambdafs | Custom module for inflating files |
| path | Path manipulations |
| url | URL parsing and manipulation |

## Error Handling
The code includes basic error handling in the `font` method, rejecting the promise with appropriate error messages or objects.

## Performance Considerations
The code caches the inflated Chromium binary and related files in the `/tmp` directory to improve performance in subsequent invocations in serverless environments.

## TODOs
There are no explicit TODOs in the code.