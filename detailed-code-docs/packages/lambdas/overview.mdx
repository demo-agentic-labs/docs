---
title: "Overview"
---

## High-level description
This directory contains the Lambda functions and related configurations for Metriport's platform. It includes various AWS Lambda functions that handle tasks such as document conversion, patient discovery, authentication, webhook processing, and data ingestion. The directory is set up with TypeScript and includes configurations for linting, formatting, testing, and building the Lambda functions.

## What does it do?
The Lambda functions in this directory perform a wide range of tasks within the Metriport system:

1. Convert clinical documents between different formats (CDA to FHIR, FHIR to CDA, FHIR to Medical Record)
2. Process patient discovery requests (inbound and outbound)
3. Handle document queries and retrievals
4. Manage authentication and authorization
5. Process webhooks from various health data providers (Fitbit, Garmin, Withings, Tenovi)
6. Ingest data into OpenSearch
7. Transfer messages between SQS queues
8. Perform scheduled tasks
9. Test and validate the deployed environment

These functions serve as key components in the Metriport system, facilitating data processing, integration with external systems, and maintaining the overall workflow of the healthcare data platform.

## Entry points
The main entry point for each Lambda function is the `handler` function exported in each file under the `src` directory. These handlers are triggered by various AWS events (e.g., API Gateway requests, SQS messages, S3 events) and process the incoming data accordingly.

Key files include:
- `cda-to-visualization.ts`: Converts CDA documents to HTML or PDF
- `fhir-to-medical-record.ts`: Generates medical record summaries from FHIR data
- `ihe-gateway-v2-*.ts` files: Handle various IHE (Integrating the Healthcare Enterprise) gateway operations
- `sqs-to-*.ts` files: Process SQS messages for various purposes (e.g., FHIR conversion, OpenSearch ingestion)
- `token-auth.ts`: Implements token-based authentication for API Gateway

## Key Files
1. `package.json`: Defines the project dependencies, scripts, and configuration.
2. `tsconfig.json`: Main TypeScript configuration file.
3. `tsconfig.build.json`: TypeScript configuration for building the project.
4. `tsconfig.cloud.json`: TypeScript configuration for cloud deployments.
5. `tsconfig.dev.json`: TypeScript configuration for development.
6. `.eslintrc.js`: ESLint configuration for code linting.
7. `.prettierrc.yaml`: Prettier configuration for code formatting.
8. `jest.config.ts`: Jest configuration for testing.
9. `README.md`: Project documentation.

## Dependencies
The project relies on several key dependencies:

1. AWS SDK: For interacting with various AWS services
2. Sentry: For error tracking and monitoring
3. Axios: For making HTTP requests
4. Various Metriport core and shared libraries: For common functionality and utilities
5. TypeScript and related tools for development
6. Jest for testing
7. ESLint and Prettier for code quality and formatting

## Configuration
The project uses various configuration files:

1. TypeScript configurations (`tsconfig*.json`) for different environments and purposes.
2. ESLint (`.eslintrc.js`) and Prettier (`.prettierrc.yaml`) for code style and formatting.
3. Jest (`jest.config.ts`) for testing setup.

Most Lambda functions use environment variables for configuration, including:

- API URLs
- AWS region
- S3 bucket names
- Database credentials
- Feature flags
- Timeout durations

These environment variables should be properly set in the Lambda function configurations to ensure correct operation.

The project also includes a shared layer for Chromium and Playwright, enabling browser automation tasks in a serverless environment.

In conclusion, this directory contains a comprehensive set of Lambda functions that form the backbone of the Metriport system's serverless architecture, handling various aspects of healthcare data processing and integration. The project is well-structured with proper configurations for development, testing, and deployment processes.