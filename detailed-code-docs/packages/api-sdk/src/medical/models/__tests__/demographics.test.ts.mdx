---
title: "demographics.test.ts"
---

## High-level description
This file contains unit tests for the `contactSchema` and `emailSchema` defined in the `demographics.ts` file. The tests validate the behavior of these schemas, ensuring they correctly handle various input scenarios for contact information and email addresses.

## Code Structure
The test file is organized into two main describe blocks: one for `contactSchema` and another for `emailSchema`. Each block contains multiple test cases to verify the schema's behavior under different conditions.

## References
The test file references the following symbols from the `demographics.ts` file:
- `contactSchema`
- `emailSchema`

It also uses a helper function `makeContact` from a local file `./contact`.

## Symbols

### `describe("demographicsSchema")`
#### Description
This is the main test suite for the demographics schema, containing nested describe blocks for `contactSchema` and `emailSchema`.

### `describe("contactSchema")`
#### Description
This describe block contains tests for the `contactSchema`.

#### Internal Logic
It tests three scenarios:
1. Accepting a simple email
2. Accepting a null email
3. Accepting an undefined email

### `describe("emailSchema")`
#### Description
This describe block contains tests for the `emailSchema`.

#### Internal Logic
It tests multiple email address scenarios:
1. A list of valid email addresses that should be accepted
2. A list of invalid email addresses (including null and undefined) that should be rejected

For each test case, it checks if the schema correctly parses valid emails and throws errors for invalid ones.

### `it("accepts simple email")`
#### Description
Tests if the `contactSchema` accepts a simple, valid email address.

#### Internal Logic
- Arranges: Creates a contact object with a valid email
- Acts: Attempts to parse the contact object with `contactSchema`
- Asserts: Expects the parsing not to throw an error

### `it("accepts null email")`
#### Description
Tests if the `contactSchema` accepts a null email value.

#### Internal Logic
- Arranges: Creates a contact object and sets the email to null
- Acts: Attempts to parse the contact object with `contactSchema`
- Asserts: Expects the parsing not to throw an error

### `it("accepts undefined email")`
#### Description
Tests if the `contactSchema` accepts an undefined email value.

#### Internal Logic
- Arranges: Creates a contact object and sets the email to undefined
- Acts: Attempts to parse the contact object with `contactSchema`
- Asserts: Expects the parsing not to throw an error

### `it("accepts '${email}'")`
#### Description
Tests if the `emailSchema` accepts various valid email formats.

#### Internal Logic
- Arranges: Uses a predefined list of valid email addresses
- Acts: Attempts to parse each email with `emailSchema`
- Asserts: Expects the parsing not to throw an error for any of the valid emails

### `it("fails when gets '${email}'")`
#### Description
Tests if the `emailSchema` rejects various invalid email formats, including null and undefined.

#### Internal Logic
- Arranges: Uses a predefined list of invalid email addresses, including null and undefined
- Acts: Attempts to parse each invalid input with `emailSchema`
- Asserts: Expects the parsing to throw an error for all invalid inputs

## Dependencies
The test file depends on the following external libraries:
| Dependency | Purpose |
|:-----------|:--------|
| Jest | Testing framework (implied by the use of `describe`, `it`, and `expect`) |

Note: The actual import for Jest is not shown in the provided code snippet, but it's implied by the testing syntax used.