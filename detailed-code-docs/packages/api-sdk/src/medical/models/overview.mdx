---
title: "Overview"
---

## High-level description
This directory contains the core models and schemas for the Metriport Medical API SDK. It defines the structure and validation rules for various entities such as patients, organizations, facilities, and medical documents. The code uses Zod for schema validation and TypeScript for type definitions, ensuring type safety and data integrity throughout the API.

## What does it do?
The code in this directory provides the following functionalities:

1. Defines data structures and validation schemas for key medical entities like patients, organizations, and facilities.
2. Implements FHIR (Fast Healthcare Interoperability Resources) data models and query structures.
3. Provides utilities for handling medical data sources, US state data, and address validation.
4. Implements schemas for patient demographics, including personal identifiers and contact information.
5. Defines structures for medical record status and settings responses.
6. Includes test files to ensure the proper functioning of the schemas and data models.

These models and schemas serve as the foundation for the Metriport Medical API, enabling consistent data handling, validation, and type checking throughout the application.

## Key Files

1. `document.ts`: Defines the `MetriportMedicalApi` class, which serves as the main client for interacting with the Metriport Medical API. It includes methods for various operations such as creating and updating organizations, facilities, and patients, as well as querying and processing medical documents.

2. `patient.ts`: Contains schemas and types for patient-related operations, including creation, updating, and querying of patient data. It also defines structures for handling consolidated patient information and document references.

3. `organization.ts`: Defines the organization-related data models and schemas, including the `OrgType` enum and schemas for creating and updating organizations.

4. `facility.ts`: Implements schemas for creating and managing facilities, including validation for facility creation, update, and listing operations.

5. `demographics.ts`: Defines the structure and validation rules for patient demographics data, including personal information, identifiers, address, and contact details.

6. `fhir.ts`: Contains definitions for FHIR resource types, consolidation filters, and query-related structures used in the API.

7. `common/`: This subdirectory includes common models and schemas used across the API, such as address validation, base update operations, and US state data.

## Dependencies
The main external dependencies used in this directory are:

1. Zod: Used extensively for schema definition and validation across multiple files. Zod provides a type-safe and declarative way to define and validate data structures.

2. @metriport/shared: A shared package that provides utility functions and common definitions used across the Metriport ecosystem.

3. @medplum/fhirtypes: Used for FHIR-related type definitions.

4. @metriport/commonwell-sdk: Utilized for interactions with the CommonWell Health Alliance network.

5. axios: Used for making HTTP requests to the Metriport API.

These dependencies were chosen for their robustness in type checking, data validation, and API interactions, as well as to maintain consistency across different parts of the Metriport ecosystem.

## Configuration
While there are no explicit configuration files in this directory, some configurable options are embedded within the schemas:

1. In `common/address.ts`:
   - `zipLength`: Set to 5, defining the expected length of ZIP codes.
   - `country`: Defaults to "USA" in the address schema.

2. In `common/us-data.ts`:
   - The `usStateSchema` is configured to preprocess string inputs by converting them to uppercase, allowing for case-insensitive state abbreviation inputs.

These configuration options are hardcoded into the schemas but could potentially be externalized into configuration files if more flexibility is needed in the future.

The models and schemas defined in this directory form the core of the Metriport Medical API SDK, providing a robust and type-safe foundation for medical data management and interoperability.