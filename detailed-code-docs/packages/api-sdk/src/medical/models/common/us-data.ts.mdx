---
title: "us-data.ts"
---

## High-level description
This code defines and exports a `USState` object and a `usStateSchema` for validating US state inputs. It utilizes the Zod library for schema validation and imports a shared `USState` definition from another module.

## Symbols

### `USState`
#### Description
`USState` is an object that extends the `USStateShared` imported from `@metriport/shared`. It likely contains an enumeration of US state abbreviations.

#### Inputs
N/A (It's an object, not a function)

#### Outputs
N/A (It's an object, not a function)

### `usStateSchema`
#### Description
`usStateSchema` is a Zod schema that validates and processes US state inputs. It preprocesses string inputs by converting them to uppercase and then validates them against the `USState` enumeration.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| val | any | The input value to be validated as a US state |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | USState | A valid US state value if the input passes validation |

#### Internal Logic
1. The schema first preprocesses the input value:
   - If the input is a string, it converts it to uppercase.
   - If the input is not a string, it leaves it unchanged.
2. After preprocessing, it validates the input against the `USState` enumeration using `z.nativeEnum(USState)`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| zod | Used for creating and defining the schema for US state validation |
| @metriport/shared | Imports the shared `USState` definition |

## References
The code references the `USState` enum from the `@metriport/shared` package. This enum is likely similar to the one defined in the related code snippet (packages/shared/src/domain/address/state.ts), which contains a comprehensive list of US state abbreviations.

## Notes
1. The `usStateSchema` allows for case-insensitive input of state abbreviations by converting string inputs to uppercase before validation.
2. The schema ensures that only valid US state abbreviations (as defined in the `USState` enum) are accepted.
3. The related code snippet provides additional context, showing that there are utility functions for normalizing state inputs and a more extensive definition of the `USState` enum, which includes full state names mapped to their abbreviations.