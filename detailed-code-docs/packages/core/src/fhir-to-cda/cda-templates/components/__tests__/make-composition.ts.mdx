---
title: "make-composition.ts"
---

## High-level description
This code defines a function `makeComposition` that creates a FHIR Composition resource. The function is designed to generate a standardized Composition object with predefined structure and values, while allowing for customization of certain fields through input parameters.

## Symbols

### `makeComposition`
#### Description
This function creates and returns a FHIR Composition resource. It combines base domain information, subject reference, and specific composition details to form a complete Composition object.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ids | object | An object containing encounter and practitioner IDs |
| ids.enc | string | The encounter ID |
| ids.pract | string | The practitioner ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Composition | Composition | A FHIR Composition resource |

#### Internal Logic
1. Spreads the results of `makeBaseDomain()` and `makeSubjectReference()` functions (not defined in this file).
2. Sets the `resourceType` to "Composition".
3. Sets the `status` to "final".
4. Defines the `type` with a LOINC code for "Subsequent evaluation note".
5. Sets the `date` to a specific timestamp.
6. Sets the `title` to "Encounter Summary".
7. Creates a `section` array with a "Results" section, including an entry referencing the provided encounter ID.
8. Sets the `encounter` reference using the provided encounter ID.
9. Sets the `author` reference using the provided practitioner ID.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @medplum/fhirtypes | Provides TypeScript types for FHIR resources |

## References
- `makeBaseDomain`: A function (not defined in this file) that likely provides common base fields for the Composition.
- `makeSubjectReference`: A function (not defined in this file) that likely provides subject reference information for the Composition.

## Notes
1. This function is likely used in testing scenarios, as indicated by its location in a `__tests__` directory.
2. The function uses a hardcoded date ("2024-03-06T21:22:21.000Z"), which might need to be updated or made dynamic depending on the use case.
3. The Composition structure follows the FHIR standard, including required fields like `resourceType`, `status`, `type`, and optional fields like `section` and `author`.
4. The function assumes that the provided encounter and practitioner IDs are valid and exist in the system.