---
title: "make-allergy.ts"
---

## High-level description
This code defines a utility function `makeAllergy` that creates a partial `AllergyIntolerance` resource for FHIR (Fast Healthcare Interoperability Resources). It's primarily used for testing purposes, providing a convenient way to generate AllergyIntolerance objects with default values and the ability to override them with custom parameters.

## Code Structure
The code consists of a single exported function `makeAllergy` that utilizes two helper functions from a shared utility file: `makeBaseDomain` and `makeSubjectReference`.

## References
- `makeBaseDomain` and `makeSubjectReference` from "./shared"
- `AllergyIntolerance` type from "@medplum/fhirtypes"

## Symbols

### `makeAllergy`
#### Description
This function creates a partial `AllergyIntolerance` resource by combining default values with any provided custom parameters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| params | Partial&lt;AllergyIntolerance&gt; | Optional. Custom properties to override default values. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| (return value) | AllergyIntolerance | A new AllergyIntolerance object with default and custom properties. |

#### Internal Logic
1. Calls `makeBaseDomain()` to get basic properties (likely including an `id`).
2. Calls `makeSubjectReference()` to get a subject reference (likely a patient reference).
3. Sets the `resourceType` to "AllergyIntolerance".
4. Spreads the `params` object to override any default values with custom ones.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @medplum/fhirtypes | Provides the `AllergyIntolerance` type definition |

## Notes
- This function is likely used in test files to quickly generate AllergyIntolerance resources with consistent default values.
- The use of the spread operator allows for easy customization of the returned object.
- The related files suggest that this utility is used in various test scenarios, particularly in grouping and deduplication of allergies.