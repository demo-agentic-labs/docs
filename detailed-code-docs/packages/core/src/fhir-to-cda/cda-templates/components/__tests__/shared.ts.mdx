---
title: "shared.ts"
---

## High-level description
This file contains utility functions for creating test data and handling dates in the context of FHIR to CDA conversion. It provides functions to generate mock data, create empty FHIR bundles, format dates, and read XML content from files.

## Symbols

### makeBaseDomain
#### Description
Creates a basic domain object with a UUID.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| object | Object | An object with an 'id' property set to a UUID |

### makeSubjectReference
#### Description
Creates an object with a subject reference to a Patient resource.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| object | Object | An object with a 'subject' property containing a reference to a Patient |

### createEmptyBundle
#### Description
Creates an empty FHIR Bundle resource.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| bundle | Bundle | An empty FHIR Bundle with type 'collection' |

### getPastDateInDifferentFormats
#### Description
Generates a past date in ISO, CDA, and human-readable formats.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| subtractYears | number | (Optional) Number of years to subtract from the current date |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| object | Object | Contains dateIso, dateCda, and dateHumanReadable properties |

### getPastDate
#### Description
Generates a past date in ISO format.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| subtractYears | number | (Optional) Number of years to subtract from the current date |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| date | string | A past date in ISO format |

### getXmlContentFromFile
#### Description
Reads XML content from a file and returns it as a single string.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| filePath | string | Path to the XML file |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| xmlContent | string | The XML content as a single string |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @faker-js/faker | Generating mock data |
| @medplum/fhirtypes | FHIR type definitions |
| dayjs | Date manipulation |
| fs | File system operations |
| ../../commons | Utility functions for date formatting |

This file is primarily used for testing purposes, providing utility functions to generate mock data and handle dates in the context of FHIR to CDA conversion. It includes functions to create basic domain objects, subject references, empty FHIR bundles, and format dates in various ways. The file also includes a function to read XML content from files, which is likely used in testing to compare generated CDA output with expected XML structures.