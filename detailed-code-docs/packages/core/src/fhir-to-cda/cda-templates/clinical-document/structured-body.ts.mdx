---
title: "structured-body.ts"
---

## High-level description
This code defines a function `buildStructuredBody` that constructs the structured body of a Clinical Document Architecture (CDA) document from a FHIR Bundle. It assembles various sections of the CDA document by calling specialized functions for each section, such as allergies, encounters, family history, etc.

## Code Structure
The `buildStructuredBody` function is the main entry point. It calls various `build*` functions to create different sections of the CDA document. These sections are then combined into a structured body object.

## Symbols

### `buildStructuredBody`
#### Description
This function takes a FHIR Bundle as input and returns a structured body object for a CDA document.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| fhirBundle | Bundle | A FHIR Bundle containing patient data |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| structuredBody | object | An object representing the structured body of a CDA document |

#### Internal Logic
1. Calls `buildVariousNotesAndResults` to generate notes and results sections.
2. Calls various `build*` functions to create different sections of the CDA document.
3. Combines all sections into an array.
4. Returns an object with a `structuredBody` property containing the array of sections.

## Dependencies
The code imports various functions from other modules to build different sections of the CDA document:

| Dependency | Purpose |
|:-----------|:--------|
| buildAllergies | Builds the allergies section |
| buildEncounters | Builds the encounters section |
| buildFamilyHistory | Builds the family history section |
| buildImmunizations | Builds the immunizations section |
| buildMedications | Builds the medications section |
| buildMentalStatus | Builds the mental status section |
| buildProblems | Builds the problems section |
| buildProcedures | Builds the procedures section |
| buildSocialHistory | Builds the social history section |
| buildVitalSigns | Builds the vital signs section |
| buildAssessmentAndPlan | Builds the assessment and plan section |
| buildVariousNotesAndResults | Builds various notes and results sections |

## Notes
- The function uses a spread operator (`...`) to conditionally include the `variousNotes` in the `structuredBodySections` array.
- Each section is wrapped in a `component` object before being added to the final structure.
- The order of sections in the `structuredBodySections` array determines their order in the final CDA document.