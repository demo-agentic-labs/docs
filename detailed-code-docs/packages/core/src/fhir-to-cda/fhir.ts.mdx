---
title: "fhir.ts"
---

## High-level description
This code defines utility functions for identifying specific types of FHIR Observation resources, specifically mental health surveys, social history observations, and vital signs observations. These functions check the resource type and examine the coding and category fields to determine the observation type.

## Symbols

### isMentalSurveyObservation
#### Description
Determines if a given FHIR resource is a mental health survey observation.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| resource | Resource \| undefined | The FHIR resource to check |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | boolean | True if the resource is a mental health survey observation, false otherwise |

#### Internal Logic
1. Checks if the resource is an Observation using the `isObservation` function.
2. If it is an Observation, checks if the code.coding field contains any of the mental health survey codes defined in `mentalHealthSurveyCodes`.
3. If not found in the codes, checks if the category field contains a "survey" code.

### isSocialHistoryObservation
#### Description
Determines if a given FHIR resource is a social history observation.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| resource | Resource \| undefined | The FHIR resource to check |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | boolean | True if the resource is a social history observation, false otherwise |

#### Internal Logic
1. Checks if the resource is an Observation using the `isObservation` function.
2. If it is an Observation, checks if the category field contains a "social-history" code.

### isVitalSignsObservation
#### Description
Determines if a given FHIR resource is a vital signs observation.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| resource | Resource \| undefined | The FHIR resource to check |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | boolean | True if the resource is a vital signs observation, false otherwise |

#### Internal Logic
1. Checks if the resource is an Observation using the `isObservation` function.
2. If it is an Observation, checks if the category field contains a "vital-signs" code.

## Dependencies
- @medplum/fhirtypes: Provides type definitions for FHIR resources.
- ../external/fhir/shared: Provides the `isObservation` function.
- ./cda-templates/constants: Provides the `mentalHealthSurveyCodes` array.

This code is part of a larger system for processing FHIR resources, specifically focusing on identifying different types of observations. It relies on the FHIR data model and uses type narrowing to ensure type safety when working with the resources.