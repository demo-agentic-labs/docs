---
title: "shared-types.ts"
---

## High-level description
This code defines various types, interfaces, and functions for converting FHIR (Fast Healthcare Interoperability Resources) data to CDA (Clinical Document Architecture) format. It includes structures for different sections of a clinical document, such as allergies, medications, immunizations, and vital signs, as well as utility functions for building CDA-compliant XML elements.

## Code Structure
The code is organized into multiple files, each focusing on a specific aspect of the FHIR to CDA conversion process. The main symbols are types and interfaces defining the structure of CDA documents, and functions for building different sections of the document. These symbols are interconnected, with many functions using the defined types to create CDA-compliant structures.

## Symbols

### ClinicalDocument
#### Description
Represents the root structure of a CDA document, containing various sections and metadata.

### buildClinicalDocumentXml
#### Description
Constructs the XML representation of a CDA document from its constituent parts.

### buildAllergies, buildMedications, buildImmunizations, buildVitalSigns, etc.
#### Description
Functions that build specific sections of the CDA document from corresponding FHIR resources.

### createTableRowsAndEntries
#### Description
A generic function used by various section builders to create table rows and entries for the CDA document.

### buildCodeCe, buildCodeCv, buildInstanceIdentifier, etc.
#### Description
Utility functions for creating common CDA elements like codes and identifiers.

## Dependencies
The code relies on external libraries and modules such as @medplum/fhirtypes for FHIR data types and dayjs for date manipulation.

## Configuration
The code uses various constants and OIDs (Object Identifiers) defined in a constants file for configuring CDA-specific values.

## Error Handling
Error handling is implemented in some functions, particularly when dealing with required resources that may be missing.

## API/Interface Reference
The main interface for using this code would be the functions that build different sections of the CDA document (e.g., buildAllergies, buildMedications). These functions typically take FHIR Bundle objects as input and return CDA-compliant section objects.

This code provides a comprehensive set of tools for converting FHIR data to CDA format, covering various aspects of clinical documentation. It's designed to be modular and reusable across different types of clinical documents.