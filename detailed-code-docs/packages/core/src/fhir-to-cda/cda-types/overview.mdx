---
title: "Overview"
---

## High-level description
This directory contains TypeScript code for converting FHIR (Fast Healthcare Interoperability Resources) data to CDA (Clinical Document Architecture) format. It defines various types, interfaces, and functions necessary for structuring and building different sections of a CDA document, such as allergies, medications, immunizations, vital signs, and more.

## What does it do?
The code in this directory facilitates the transformation of healthcare data from the FHIR format to the CDA format. This process involves:

1. Defining the structure of various sections in a CDA document (e.g., Results, Medication, Immunizations, etc.) using TypeScript types.
2. Providing utility functions to build CDA-compliant XML elements and structures.
3. Offering functions to construct specific sections of the CDA document from corresponding FHIR resources.
4. Handling the creation of common CDA elements like codes and identifiers.

This conversion is crucial for interoperability between different healthcare systems and ensures that clinical data can be represented in a standardized format (CDA) while originating from a modern, API-friendly format (FHIR).

## Key Files

### sections.ts
This file defines the structure of various sections in a CDA document using TypeScript types. It exports a generic `CdaSection&lt;T&gt;` type and uses it to create specific section types such as `ResultsSection`, `MedicationSection`, `ImmunizationsSection`, and more. Each section type is a specialized version of `CdaSection` with a specific entry type.

Example of a section type definition:

```typescript
export type ResultsSection = CdaSection&lt;ObservationOrganizer&gt;;
```

### shared-types.ts
This file contains the core types, interfaces, and functions for the FHIR to CDA conversion process. It includes:

1. The `ClinicalDocument` type, representing the root structure of a CDA document.
2. Functions for building different sections of the CDA document (e.g., `buildAllergies`, `buildMedications`, `buildImmunizations`).
3. Utility functions for creating common CDA elements (e.g., `buildCodeCe`, `buildCodeCv`, `buildInstanceIdentifier`).
4. A generic function `createTableRowsAndEntries` used by various section builders to create table rows and entries for the CDA document.

Example of a section builder function:

```typescript
export function buildAllergies(bundle: Bundle): AllergiesSection {
  // Implementation details
}
```

## Dependencies
The code relies on external libraries and modules, including:

1. `@medplum/fhirtypes` for FHIR data types
2. `dayjs` for date manipulation

These dependencies are crucial for handling FHIR data structures and performing date-related operations during the conversion process.

## Configuration
The code uses various constants and OIDs (Object Identifiers) defined in a separate constants file for configuring CDA-specific values. This approach allows for easy maintenance and updates of CDA-specific configurations.

In conclusion, this directory contains the core functionality for converting FHIR data to CDA format, providing a robust and type-safe approach to handling clinical data interoperability. The modular design allows for easy extension and maintenance of the conversion process for different types of clinical documents.