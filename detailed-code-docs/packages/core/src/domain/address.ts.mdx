---
title: "address.ts"
---

## High-level description
This code defines types and functions for handling address-related data in a healthcare application. It includes structures for representing addresses and coordinates, as well as utility functions for manipulating and combining address data.

## Code Structure
The main symbols in this code are:
1. `Coordinates`: A type representing geographic coordinates.
2. `Address`: A type representing a physical address.
3. `getState`: A function to extract the state from an address.
4. `combineAddresses`: A function to merge two lists of addresses, prioritizing those with coordinates.

## Symbols

### `Coordinates`
#### Description
A type representing geographic coordinates with latitude and longitude.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| lat | number | Latitude coordinate |
| lon | number | Longitude coordinate |

### `Address`
#### Description
A type representing a physical address with various fields.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| addressLine1 | string | First line of the address |
| addressLine2 | string (optional) | Second line of the address |
| city | string | City name |
| state | USState | State abbreviation |
| zip | string | Zip code |
| country | string (optional) | Country name |
| coordinates | Coordinates (optional) | Geographic coordinates |

### `getState`
#### Description
A function that extracts the state from an Address object.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| address | Address | The address object to extract the state from |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| state | USState | The state extracted from the address |

### `combineAddresses`
#### Description
A function that combines two lists of addresses, prioritizing those with coordinates and removing duplicates.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| addressList1 | Address[] | First list of addresses |
| addressList2 | Address[] | Second list of addresses |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| combinedAddresses | Address[] | Combined list of unique addresses |

#### Internal Logic
1. Concatenate the two input address lists.
2. Sort the combined list, prioritizing addresses with coordinates.
3. Remove duplicate addresses based on a unique key generated from address fields.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| lodash | Used for the `uniqBy` function to remove duplicates |
| @metriport/shared | Imports the `USState` type |

This code provides a foundation for handling address data in the application, allowing for easy manipulation and combination of address information while maintaining data integrity and prioritizing addresses with geographic coordinates.