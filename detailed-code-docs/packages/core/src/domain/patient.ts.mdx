---
title: "patient.ts"
---

## High-level description
This code defines the structure and functionality of a Patient domain model in a medical data management system. It includes types for patient demographics, personal identifiers, addresses, and external data from various medical data sources. The code also provides utility functions for patient data manipulation and normalization.

## Code Structure
The main symbols in the code are:
- `Patient`: The core data structure representing a patient.
- `PatientData`: Contains detailed patient information.
- `PersonalIdentifier`: Represents various types of personal identification.
- `Address`: Represents a patient's address.
- `PatientExternalData`: Stores data from external medical data sources.
- Utility functions: For data manipulation, normalization, and matching.

These symbols are interconnected, with `Patient` containing `PatientData`, which in turn includes `PersonalIdentifier`, `Address`, and `PatientExternalData`.

## Symbols

### Patient
#### Description
Represents a patient in the system, extending `BaseDomain` and `PatientCreate`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| cxId | string | Customer ID |
| facilityIds | string[] | IDs of associated facilities |
| externalId | string (optional) | External identifier |
| data | PatientData | Patient's detailed information |

#### Internal Logic
Combines basic domain properties with patient-specific data.

### PatientData
#### Description
Contains detailed information about a patient.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| firstName | string | Patient's first name |
| lastName | string | Patient's last name |
| dob | string | Date of birth |
| genderAtBirth | GenderAtBirth | Gender at birth |
| personalIdentifiers | PersonalIdentifier[] (optional) | Personal identification documents |
| address | Address[] | Patient's addresses |
| contact | Contact[] (optional) | Contact information |
| externalData | PatientExternalData (optional) | Data from external sources |

### PersonalIdentifier
#### Description
Represents various types of personal identification documents.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| type | GeneralPersonalIdentifiers or DriversLicensePersonalIdentifier | Type of identifier |
| value | string | Identifier value |
| state | USState (for driver's license) | State of issue for driver's license |

### Address
#### Description
Represents a patient's address.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| addressLine1 | string | First line of address |
| addressLine2 | string (optional) | Second line of address |
| city | string | City |
| state | USState | State |
| zip | string | ZIP code |
| country | string | Country |

### PatientExternalData
#### Description
Stores data from external medical data sources.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| [key: MedicalDataSource] | PatientExternalDataEntry | Data entry for each medical data source |

### Utility Functions
#### Description
Various utility functions for patient data manipulation and normalization.

#### Notable Functions
- `splitName`: Splits a name string into an array.
- `splitDob`: Splits a date of birth string into an array.
- `joinName`: Joins name parts into a single string.
- `getStatesFromAddresses`: Extracts states from patient addresses.
- `createDriversLicensePersonalIdentifier`: Creates a driver's license identifier.

## Dependencies
- @metriport/api-sdk
- @metriport/shared
- dayjs

## Error Handling
The code doesn't implement specific error handling mechanisms beyond basic type checking and optional chaining.

## Logging
No explicit logging mechanisms are implemented in this file.