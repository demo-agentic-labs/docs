---
title: "cookie-manager-in-memory.ts"
---

## High-level description
This code defines a `CookieManagerInMemory` class that implements an in-memory storage for cookies. It extends the `CookieManager` class and provides methods to get and update cookies stored in memory.

## Symbols

### `CookieManagerInMemory`
#### Description
A class that extends `CookieManager` to provide in-memory storage for cookies. It implements methods to retrieve and update cookies stored in an array.

#### Inputs
This class doesn't have any constructor parameters.

#### Outputs
This class doesn't have any direct outputs, but it provides methods to interact with the stored cookies.

#### Internal Logic
- The class maintains a private array `cookies` to store `Cookie` objects.
- It implements two asynchronous methods:
  1. `getCookies()`: Returns the stored cookies.
  2. `updateCookies(cookies: Cookie[])`: Updates the stored cookies with a new array and returns the updated array.

## References
- `Cookie`: A type imported from "./cookie-manager", likely representing the structure of a cookie.
- `CookieManager`: The base class that `CookieManagerInMemory` extends, also imported from "./cookie-manager".

## Dependencies
The code depends on the `cookie-manager` module, which is not shown in the provided code but is imported at the top of the file.

## Usage Context
Based on the related code snippets provided, the `CookieManagerInMemory` class is used in various parts of the application:

1. In the session management script (`packages/utils/src/commonwell/session-manager.ts`), it's used as a local implementation for cookie management when not using cloud-based secret management.

2. In the coverage enhancement script (`packages/utils/src/commonwell/enhance-coverage.ts`), it's similarly used as a local implementation for cookie management.

3. In the organization test file (`packages/api/src/external/commonwell/__tests__/organization.test.ts`), it's used in the mocked implementation of the CommonWell Management API for testing purposes.

These usages suggest that `CookieManagerInMemory` is primarily used for local development, testing, and scenarios where persistent storage of cookies is not required or desired.

## Performance Considerations
The in-memory implementation is likely fast for small to moderate numbers of cookies, as it uses a simple array for storage. However, it doesn't persist cookies between application restarts, which may be a limitation in some use cases.