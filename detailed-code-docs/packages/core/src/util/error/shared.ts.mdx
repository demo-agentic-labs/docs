---
title: "shared.ts"
---

## High-level description
This file contains utility functions for handling errors and asynchronous operations in the Metriport application. It includes functions for converting errors to strings, processing asynchronous errors, and executing functions with retries.

## Symbols

### errorToString
#### Description
Converts an error object to a string representation.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| err | unknown | The error object to convert |
| options | ErrorToStringOptions | Optional configuration for the conversion |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| errorString | string | The string representation of the error |

#### Internal Logic
- If `options.detailed` is true, it calls `detailedErrorToString`
- Otherwise, it calls `genericErrorToString`

### genericErrorToString
#### Description
Converts an error to a simple string representation.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| err | unknown | The error object to convert |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| errorString | string | The simple string representation of the error |

### detailedErrorToString
#### Description
Converts an error to a detailed string representation, including additional info and cause.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| err | any | The error object to convert |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| errorString | string | The detailed string representation of the error |

### getErrorMessage
#### Description
A wrapper function for `errorToString`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| error | unknown | The error object to convert |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| errorString | string | The string representation of the error |

### processAsyncError
#### Description
Creates a function to handle asynchronous errors, logging the error and capturing it for monitoring.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| msg | string | The error message |
| log | function | Optional logging function |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| errorHandler | function | A function that handles the error |

#### Internal Logic
- Creates a function that logs the error message and captures it using the `capture.error` function

## Dependencies
- `node:util`: For the `inspect` function
- `../log`: For logging utilities
- `../notifications`: For error capturing

## Error Handling
This file is primarily focused on error handling and provides various utilities for converting errors to strings and processing them.

## Logging
The file uses the `out` function from the `../log` module for logging.

## Notes
- The file includes several deprecated functions, as indicated by the `@deprecated` JSDoc comments.
- The `errorToString` function and its variants are central to the error handling functionality in this file.
- The `processAsyncError` function is useful for creating error handlers for asynchronous operations.