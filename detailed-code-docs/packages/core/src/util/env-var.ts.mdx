---
title: "env-var.ts"
---

## High-level description
This file defines utility functions for handling environment variables in a TypeScript project. It includes an enum for environment types, functions to get environment variables, and a function to determine the current environment type.

## Code Structure
The main symbols in this code are:
- `EnvType` enum: Defines different environment types.
- `getEnvVar` function: Retrieves an environment variable.
- `getEnvVarOrFail` function: Retrieves an environment variable or throws an error if it's not set.
- `getEnvType` function: Determines the current environment type.

These functions are related as they all deal with environment variables, with `getEnvType` using `getEnvVarOrFail` internally.

## Symbols

### `EnvType`
#### Description
An enum that defines different environment types: production, sandbox, staging, and development.

### `getEnvVar`
#### Description
A function that retrieves the value of an environment variable.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| varName | string | The name of the environment variable to retrieve |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| value | string \| undefined | The value of the environment variable, or undefined if not set |

### `getEnvVarOrFail`
#### Description
A function that retrieves the value of an environment variable or throws an error if it's not set.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| varName | string | The name of the environment variable to retrieve |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| value | string | The value of the environment variable |

#### Internal Logic
1. Calls `getEnvVar` to retrieve the environment variable.
2. If the value is not set or is an empty string, it throws an error.
3. Otherwise, it returns the value.

### `getEnvType`
#### Description
A function that determines the current environment type based on the `ENV_TYPE` environment variable.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| envType | EnvType | The current environment type |

#### Internal Logic
1. Calls `getEnvVarOrFail` to retrieve the `ENV_TYPE` environment variable.
2. Checks if the retrieved value is a valid `EnvType`.
3. If valid, returns the environment type.
4. If invalid, throws a `MetriportError`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/core/util/error/metriport-error | Used for throwing custom errors |

## Error Handling
The code uses custom `MetriportError` for handling invalid environment types in the `getEnvType` function.

## TODOs
The code includes `@deprecated` tags for all functions, suggesting that they should be replaced with `@metriport/shared/common/env-var` in the future.