---
title: "base64.test.ts"
---

## High-level description
This file contains unit tests for the `base64` utility functions, specifically `stringToBase64` and `base64ToString`. The tests ensure that these functions correctly encode strings to Base64 and decode Base64 strings back to their original form, handling various scenarios including empty strings, ASCII-only strings, and strings with non-ASCII characters.

## Symbols

### `describe("base64", ...)`
#### Description
This is the main test suite for the base64 utility functions. It contains three nested `describe` blocks, each focusing on a specific aspect of the base64 encoding and decoding process.

### `describe("stringToBase64", ...)`
#### Description
This test suite focuses on the `stringToBase64` function, which encodes strings to Base64.

#### Internal Logic
It tests three scenarios:
1. Empty string input
2. Simple ASCII-only string input
3. Non-ASCII string input (including Unicode characters)

For each scenario, it checks if the function produces the expected Base64 output.

### `describe("base64ToString", ...)`
#### Description
This test suite focuses on the `base64ToString` function, which decodes Base64 strings back to their original form.

#### Internal Logic
It tests three scenarios:
1. Empty string input
2. Base64 encoded ASCII-only string input
3. Base64 encoded non-ASCII string input (including Unicode characters)

For each scenario, it checks if the function correctly decodes the Base64 input back to the original string.

### `describe("encode and decode together", ...)`
#### Description
This test suite checks the roundtrip process of encoding a string to Base64 and then decoding it back to the original string.

#### Internal Logic
It tests three scenarios:
1. Empty string
2. Simple ASCII-only string
3. Non-ASCII string (including Unicode characters)

For each scenario, it encodes the original string to Base64 using `stringToBase64`, then immediately decodes it using `base64ToString`, and checks if the result matches the original input.

### `beforeEach(() =&gt; { jest.restoreAllMocks(); })`
#### Description
This setup function runs before each test, restoring all mocked functions to their original implementation.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| jest | Testing framework used for writing and running the unit tests |

## References
The test file imports and uses two functions from the `base64` utility module:
- `stringToBase64`: Encodes a string to Base64
- `base64ToString`: Decodes a Base64 string to its original form

These functions are defined in the related file `packages/core/src/util/base64.ts`.

## Notes
1. The tests cover various scenarios, including edge cases (empty strings) and complex cases (Unicode characters).
2. The roundtrip tests ensure that the encoding and decoding processes are reversible and lossless.
3. The use of `jest.restoreAllMocks()` suggests that other tests in the suite might be using mocks, although no mocks are explicitly used in this file.