---
title: "schema.ts"
---

## High-level description
This code defines Zod schemas for validating and parsing patient registry profile data in the context of Carequality's IHE Gateway V2 outbound XCPD (Cross-Community Patient Discovery) process. It provides a structured way to validate and type-check the response data from patient discovery queries.

## Code Structure
The code defines several Zod schemas that are composed together to form the main `patientRegistryProfileSchema`. This schema is then used to create the `iti55ResponseSchema`, which represents the entire response structure for ITI-55 transactions.

## Symbols

### `patientRegistryProfileSchema`
#### Description
Defines the structure for a patient registry profile, including acknowledgement details, control act process, and patient information.

#### Inputs
This is a Zod schema, so it doesn't have traditional inputs. Instead, it defines the expected structure of an object.

#### Outputs
When used for parsing, it returns a typed object conforming to the `PatientRegistryProfile` type.

#### Internal Logic
The schema is composed of nested objects and arrays, using various sub-schemas imported from other files. It includes detailed structures for patient information such as address, name, telecom, and identifiers.

### `iti55ResponseSchema`
#### Description
Defines the structure for the entire ITI-55 response, which includes the patient registry profile within a SOAP envelope.

#### Inputs
This is a Zod schema, so it doesn't have traditional inputs. It defines the expected structure of the ITI-55 response object.

#### Outputs
When used for parsing, it returns a typed object conforming to the `Iti55Response` type.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| zod | Used for creating and composing schemas for data validation and parsing |

The code also imports several custom schemas from a relative path (`"../../../schema"`), which are used to define parts of the main schemas.

## Types
The code exports two main types:
1. `PatientRegistryProfile`: Inferred from `patientRegistryProfileSchema`
2. `Iti55Response`: Inferred from `iti55ResponseSchema`

These types can be used throughout the application to ensure type safety when working with patient registry data and ITI-55 responses.

## Notes
- The schemas make extensive use of optional fields, allowing for flexibility in the data structure.
- The use of Zod for schema definition provides both runtime validation and TypeScript type inference.
- The schemas are designed to handle complex nested structures, including arrays of objects and optional fields at various levels.

This code plays a crucial role in ensuring the integrity and type safety of patient data received through the Carequality IHE Gateway V2 XCPD process.