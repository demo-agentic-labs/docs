---
title: "cid.ts"
---

## High-level description
This file provides utility functions for handling Content-ID (CID) references in MTOM (Message Transmission Optimization Mechanism) attachments. It specifically deals with manipulating CID strings by removing prefixes, adding tags, and decoding URI components.

## Symbols

### `stripCidPrefix`
#### Description
Removes the "cid:" prefix from a given Content-ID string.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| cid | string | The Content-ID string potentially containing a "cid:" prefix |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| string | string | The Content-ID string with the "cid:" prefix removed |

#### Internal Logic
The function uses a regular expression (`cidPrefixRegex`) to match and replace the "cid:" prefix with an empty string.

### `addTags`
#### Description
Wraps the given content string with angle brackets (&lt;&gt;).

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| content | string | The string to be wrapped with angle brackets |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| string | string | The input string wrapped with angle brackets |

### `getCidReference`
#### Description
Processes a Content-ID string by removing the "cid:" prefix, decoding URI components, and wrapping the result in angle brackets.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| cid | string | The Content-ID string to be processed |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| string | string | The processed Content-ID reference |

#### Internal Logic
1. Calls `stripCidPrefix` to remove the "cid:" prefix
2. Applies `decodeURIComponent` to handle any URI encoding
3. Calls `addTags` to wrap the result in angle brackets

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| decodeURIComponent | Built-in JavaScript function used to decode URI components |

This file is part of a larger system dealing with Carequality and IHE (Integrating the Healthcare Enterprise) Gateway, specifically for outbound XCA (Cross-Community Access) operations using MTOM. The functions provided here are likely used in processing MTOM attachments and their references within XML documents in healthcare data exchange scenarios.