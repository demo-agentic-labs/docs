---
title: "schema.ts"
---

## High-level description
This code defines Zod schemas for parsing and validating XML responses from IHE (Integrating the Healthcare Enterprise) Cross-Community Access (XCA) gateways. It specifically handles ITI-38 (Cross Gateway Query) and ITI-39 (Cross Gateway Retrieve) transactions, providing type definitions and validation for the response structures.

## Code Structure
The file defines several interconnected Zod schemas that represent different parts of the XCA response structure. These schemas are used to parse and validate XML responses, ensuring type safety and data integrity when working with IHE XCA gateway responses.

## Symbols

### `name`
#### Description
Defines a schema for a localized string name.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| LocalizedString | object | Contains charset and value for a localized string |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Name | z.infer&lt;typeof name&gt; | Parsed and validated name object |

### `classification`
#### Description
Defines a schema for classification information in the XCA response.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Slot | array or object | Optional slot information |
| Name | object | Optional name information |
| _classificationScheme | string | Classification scheme |
| _classifiedObject | string | Classified object identifier |
| _id | string | Classification identifier |
| _nodeRepresentation | string | Node representation |
| _objectType | string | Optional object type |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Classification | z.infer&lt;typeof classification&gt; | Parsed and validated classification object |

### `externalIdentifier`
#### Description
Defines a schema for external identifier information.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Name | object | Optional name information |
| _id | string | Identifier |
| _identificationScheme | string | Identification scheme |
| _objectType | string | Optional object type |
| _registryObject | string | Optional registry object |
| _value | string | Optional value |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ExternalIdentifier | z.infer&lt;typeof externalIdentifier&gt; | Parsed and validated external identifier object |

### `extrinsicObject`
#### Description
Defines a schema for extrinsic object information in the XCA response.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Slot | array or object | Slot information |
| Name | object | Optional name information |
| Classification | array or object | Classification information |
| ExternalIdentifier | array | External identifier information |
| _home | string | Home community ID |
| _mimeType | string | MIME type of the object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ExtrinsicObject | z.infer&lt;typeof extrinsicObject&gt; | Parsed and validated extrinsic object |

### `registryError`
#### Description
Defines a schema for registry error information.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| _codeContext | string | Optional error context |
| _errorCode | string | Optional error code |
| _severity | string | Optional error severity |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| RegistryError | z.infer&lt;typeof registryError&gt; | Parsed and validated registry error object |

### `iti38Schema`
#### Description
Defines the main schema for ITI-38 (Cross Gateway Query) responses.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Iti38Response | z.infer&lt;typeof iti38Schema&gt; | Parsed and validated ITI-38 response |

### `documentResponse`
#### Description
Defines a schema for document response information in ITI-39 (Cross Gateway Retrieve) responses.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| DocumentResponse | z.infer&lt;typeof documentResponse&gt; | Parsed and validated document response object |

### `iti39Schema`
#### Description
Defines the main schema for ITI-39 (Cross Gateway Retrieve) responses.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Iti39Response | z.infer&lt;typeof iti39Schema&gt; | Parsed and validated ITI-39 response |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| zod | Used for schema definition and validation |

## Error Handling
This code primarily focuses on defining schemas and doesn't implement explicit error handling. Error handling would typically occur when these schemas are used to parse and validate actual XML responses.

## API/Interface Reference
While this file doesn't expose an API directly, it provides type definitions and schemas that can be used by other parts of the application to handle XCA gateway responses. The main interfaces are `Iti38Response` and `Iti39Response`, which represent the parsed and validated responses for ITI-38 and ITI-39 transactions, respectively.