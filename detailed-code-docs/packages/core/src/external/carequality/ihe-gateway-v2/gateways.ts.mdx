---
title: "gateways.ts"
---

## High-level description
This code defines various constants, functions, and types related to Carequality gateways and document retrieval in a healthcare interoperability context. It includes configurations for specific gateways, utility functions for handling document unique IDs, and mappings between different coding systems.

## Code Structure
The code is organized into several sections:
1. Constants for various OIDs, URL prefixes, and gateway-specific configurations.
2. Utility functions for handling document unique IDs and determining gateway-specific behaviors.
3. Functions for getting home community IDs and handling SOAP body requirements.
4. A function to determine if a gateway requires only one document reference per request.

## Symbols

### `gatewayPrefixesThatUseSha1`
#### Description
An array of OID prefixes for gateways that use SHA1 hashing.

### `doesGatewayUseSha1`
#### Description
Determines if a given OID uses SHA1 hashing based on the prefixes defined in `gatewayPrefixesThatUseSha1`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| oid | string | The OID to check |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | boolean | Whether the OID uses SHA1 hashing |

### `getGatewaySpecificDocRefsPerRequest`
#### Description
Determines the number of document references per request for a specific gateway.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| gateway | XCAGateway | The gateway object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| count | number | The number of document references per request |

### `doesGatewayNeedDateRanges`
#### Description
Determines if a gateway requires date ranges based on its URL.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| url | string | The gateway URL |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | boolean | Whether the gateway needs date ranges |

### `getDocumentUniqueIdFunctionByGateway`
#### Description
Returns a function to get the document unique ID based on the gateway.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| gateway | XCAGateway | The gateway object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| function | GetDocumentUniqueIdFn | A function to get the document unique ID |

### `getHomeCommunityId`
#### Description
Determines the home community ID based on the gateway and SAML attributes.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| gateway | XCPDGateway \| XCAGateway | The gateway object |
| samlAttributes | SamlAttributes | SAML attributes |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string | The home community ID |

### `requiresUrnInSoapBody`
#### Description
Determines if a gateway requires URN in the SOAP body.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| gateway | XCPDGateway | The gateway object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | boolean | Whether URN is required in the SOAP body |

### `requiresOnlyOneDocRefPerRequest`
#### Description
Determines if a gateway requires only one document reference per request.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| gateway | XCAGateway | The gateway object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | boolean | Whether only one document reference is required per request |

## Dependencies
The code imports types and functions from "@metriport/ihe-gateway-sdk" and "../../../util/urn".

## Configuration
The code defines several configuration constants for different gateways and their behaviors.

## Error Handling
The code doesn't implement specific error handling mechanisms beyond basic type checking.

## Logging
There is no explicit logging implemented in this code.

## Performance Considerations
The code uses simple lookups and comparisons, which should have minimal performance impact. However, the `getGatewaySpecificDocRefsPerRequest` function performs multiple checks and could be optimized if called frequently.