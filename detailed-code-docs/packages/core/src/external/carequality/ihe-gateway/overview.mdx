---
title: "Overview"
---

## High-level description
This directory contains code for handling outbound operations and result polling in a Carequality-based healthcare information exchange system, specifically for an IHE (Integrating the Healthcare Enterprise) Gateway. The code is primarily focused on patient discovery, document query, and document retrieval operations.

## What does it do?
The code in this directory implements a system for:

1. Polling outbound results for patient discovery, document query, and document retrieval operations.
2. Handling these operations through direct database access or AWS Lambda functions.
3. Defining data structures for outbound operation responses.
4. Managing the retrieval and processing of results from a database.

The system is designed to work in a healthcare interoperability context, likely implementing IHE profiles. It provides flexibility in implementation, allowing for both direct database access and serverless architecture using AWS Lambda.

## Key Files

1. `outbound-result-poller-direct.ts`: Implements direct database access for polling outbound results.
2. `outbound-result-poller-lambda.ts`: Implements result polling using AWS Lambda functions.
3. `outbound-result-poller.ts`: Defines an abstract class for outbound result polling operations.
4. `outbound-result.ts`: Defines interfaces for handling responses from various outbound operations.
5. `poll-outbound-results.ts`: Implements core functionality to poll outbound results from the database.

## Dependencies
The code relies on several external libraries and frameworks:

1. @metriport/ihe-gateway-sdk: Provides types for IHE Gateway response data.
2. @metriport/shared: Offers utility functions for network retries.
3. axios: Used for making HTTP requests.
4. AWS SDK: Used for interacting with AWS Lambda services.
5. sequelize: Database ORM for querying results.
6. dayjs: Date and time manipulation library.

## Configuration
The system uses configuration files and environment variables for various settings:

1. AWS region configuration for Lambda functions.
2. Lambda function names for patient discovery, document query, and document retrieval operations.
3. Database credentials for direct access implementation.
4. API URLs for sending results in the direct access implementation.

The code is designed to be flexible, allowing for different implementations of result polling mechanisms. It handles error scenarios, implements timeout management, and provides logging for monitoring the polling process. The system is part of a larger healthcare interoperability solution, likely implementing IHE profiles for secure and standardized health information exchange.