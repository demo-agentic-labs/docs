---
title: "outbound-result-poller-direct.ts"
---

## High-level description
This code defines the `OutboundResultPollerDirect` class, which is responsible for polling and processing outbound results for patient discovery, document query, and document retrieval operations in a Carequality-based healthcare information exchange system. It interacts with a database to fetch results and sends them to an API endpoint for further processing.

## Code Structure
The `OutboundResultPollerDirect` class extends the `OutboundResultPoller` class and implements methods for polling different types of outbound results. It uses axios for making HTTP requests and relies on external functions for polling and error handling.

## Symbols

### OutboundResultPollerDirect
#### Description
A class that implements direct database access for polling outbound results in a Carequality-based system.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| apiUrl | string | The base URL for the API endpoints |
| dbCreds | string | Database credentials for accessing results |

#### Internal Logic
- Initializes API endpoints for different result types
- Implements methods for polling patient discovery, document query, and document retrieval results
- Uses external functions to poll results from the database
- Sends results to corresponding API endpoints

### pollOutboundPatientDiscoveryResults
#### Description
Polls for outbound patient discovery results and sends them to the API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| params | PollOutboundResults | Object containing request details |

#### Internal Logic
- Calls `pollOutboundPatientDiscoveryResults` to fetch results from the database
- Constructs a payload with the results
- Sends the payload to the patient discovery results API endpoint

### pollOutboundDocQueryResults
#### Description
Polls for outbound document query results and sends them to the API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| params | PollOutboundResults | Object containing request details |

#### Internal Logic
- Calls `pollOutboundDocQueryResults` to fetch results from the database
- Constructs a payload with the results
- Sends the payload to the document query results API endpoint

### pollOutboundDocRetrievalResults
#### Description
Polls for outbound document retrieval results and sends them to the API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| params | PollOutboundResults | Object containing request details |

#### Internal Logic
- Calls `pollOutboundDocRetrievalResults` to fetch results from the database
- Constructs a payload with the results
- Sends the payload to the document retrieval results API endpoint

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/ihe-gateway-sdk | Provides types for outbound responses |
| @metriport/shared | Provides utility functions for network retries |
| axios | Used for making HTTP requests |

## Error Handling
The class uses the `executeWithNetworkRetries` function from `@metriport/shared` to handle network-related errors and retries when sending results to the API.

## TODOs
- There are TODO comments regarding whether to retry on timeout for API requests.

This code plays a crucial role in the Carequality-based health information exchange system, facilitating the retrieval and processing of various types of medical data queries and responses.