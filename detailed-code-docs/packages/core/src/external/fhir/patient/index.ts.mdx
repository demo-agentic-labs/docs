---
title: "index.ts"
---

Here's a documentation of the target file:

## High-level description
This file defines functions and types for mapping between Metriport's internal patient representation and FHIR patient resources. It provides utilities for converting gender codes, patient data, and identifiers between the two formats.

## Code Structure
The file exports several functions and types that are used to convert between Metriport's internal patient representation and FHIR patient resources. The main functions are `mapMetriportGenderToFhirGender`, `mapFhirToMetriportGender`, `mapPatientDataToResource`, `toFHIR`, `getFhirIdentifersFromPatient`, and `toFHIRSubject`. These functions rely on the defined types and constants to perform the conversions.

## Symbols

### `FhirGender`
#### Description
A type alias for the gender values used in FHIR patient resources.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| FhirGender | string | One of "female", "male", "other", or "unknown" |

### `PatientIdAndData`
#### Description
A type that represents the minimal patient data needed for conversion to FHIR.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| PatientIdAndData | Object | Contains `id` and `data` properties from the Patient type |

### `metriportGenderToFhir`
#### Description
A mapping of Metriport gender codes to FHIR gender codes.

### `fhirGenderToMetriportGender`
#### Description
A mapping of FHIR gender codes to Metriport gender codes.

### `mapMetriportGenderToFhirGender`
#### Description
Converts a Metriport gender code to a FHIR gender code.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| k | MetriportGender \| undefined | The Metriport gender code to convert |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| FhirGender | string | The corresponding FHIR gender code |

### `mapFhirToMetriportGender`
#### Description
Converts a FHIR gender code to a Metriport gender code.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| gender | FhirGender \| undefined | The FHIR gender code to convert |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| MetriportGender | string | The corresponding Metriport gender code |

### `mapStringMetriportGenderToFhir`
#### Description
Converts a string representation of a Metriport gender code to a FHIR gender code.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| k | string | The string representation of a Metriport gender code |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| FhirGender | string | The corresponding FHIR gender code |

### `mapPatientDataToResource`
#### Description
Converts Metriport patient data to a FHIR patient resource.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| patient | PatientIdAndData | The Metriport patient data to convert |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| FHIRPatient | Object | The corresponding FHIR patient resource |

### `toFHIR`
#### Description
Converts Metriport patient data to a FHIR patient resource.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| patient | PatientIdAndData | The Metriport patient data to convert |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| FHIRPatient | Object | The corresponding FHIR patient resource |

### `getFhirIdentifersFromPatient`
#### Description
Extracts FHIR identifiers from Metriport patient data.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| patient | PatientIdAndData | The Metriport patient data to extract identifiers from |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Identifier[] | Array | An array of FHIR Identifier objects |

### `toFHIRSubject`
#### Description
Creates a FHIR Reference object for a patient.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| patientId | string | The ID of the patient |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Reference&lt;FHIRPatient&gt; | Object | A FHIR Reference object for the patient |

### `getPatientId`
#### Description
Extracts the patient ID from a FHIR DocumentReference.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| doc | DocumentReference | The FHIR DocumentReference to extract the patient ID from |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| string \| undefined | The extracted patient ID, if available |

### `isContactType`
#### Description
Checks if a given string is a valid ContactType.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| type | string | The string to check |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| boolean | Whether the input is a valid ContactType |

## Dependencies
This file depends on several types and functions from the FHIR specification, including `ContactPoint`, `DocumentReference`, `Identifier`, `Patient`, and `Reference`. It also uses types from the Metriport domain, such as `Address`, `Contact`, `ContactTypes`, `GenderAtBirth`, and `Patient`.