---
title: "get-documents.test.ts"
---

## High-level description
This file contains unit tests for the `getFilters` function from the `get-documents` module. The tests cover various scenarios of filter generation based on different input parameters such as patient IDs, document IDs, and date ranges.

## Symbols

### `getFilters`
#### Description
The `getFilters` function is being tested in this file. It generates a query string based on the provided filter parameters for retrieving documents.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| options | object | An object containing filter options |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | string | A query string representing the filters |

#### Internal Logic
The function constructs a query string based on the provided filter options. It handles patient IDs, document IDs, and date ranges. The tests verify various combinations of these filters.

## Tests

### Empty input
Tests that an empty input object results in an empty string output.

### Single patient ID
Verifies that providing a single patient ID results in the correct query string.

### Multiple patient IDs
Checks that an array of patient IDs is correctly encoded and joined in the query string.

### Trimming patient IDs
Ensures that whitespace is trimmed from patient IDs before encoding.

### Date filters
Tests the correct formatting of 'from' and 'to' date filters.

### Document IDs
Verifies that document IDs are correctly encoded in the query string.

### Combination of filters
Tests various combinations of filters (patient ID, document IDs, date range) to ensure they are correctly combined in the query string.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @faker-js/faker | Generating fake data for tests |
| @metriport/shared/common/date | Importing ISO_DATE constant |
| dayjs | Date manipulation and formatting |
| lodash | Using the `trim` function |
| uuid | Generating UUIDs for test data |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| ISO_DATE | string | "YYYY-MM-DD" | Date format used in the tests |

## Notes
- The tests use Jest's `describe` and `it` functions for structuring.
- `beforeEach` is used to restore all mocks before each test.
- The tests cover various edge cases and combinations of input parameters.
- Faker is used to generate random data for patient IDs and dates.
- The `encodeURIComponent` function is used to properly encode query string parameters.

This test file ensures that the `getFilters` function correctly handles various input scenarios and produces the expected query string output for document retrieval.