---
title: "api-hapi.ts"
---

## High-level description
This file defines two classes, `HapiFhirClient` and `HapiFhirAdminClient`, which extend the `MedplumClient` to interact with a HAPI FHIR server. These classes provide methods for searching, creating, and managing FHIR resources and tenants on the server.

## Code Structure
The main symbols in this code are:
1. `HapiFhirClient`: Extends `MedplumClient` and implements `FhirClient` interface.
2. `HapiFhirAdminClient`: Extends `HapiFhirClient` and implements `FhirAdminClient` interface.

Both classes provide methods to interact with a HAPI FHIR server, with `HapiFhirAdminClient` focusing on tenant management operations.

## Symbols

### HapiFhirClient
#### Description
A class that extends `MedplumClient` to interact with a HAPI FHIR server for a specific tenant.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| tenantId | string | The customer ID used to determine the tenant on HAPI |
| baseUrl | string | The base URL of the server |

#### Internal Logic
- Overrides the `searchNoAppend` method to handle HAPI FHIR-specific URL structures.
- Overrides the `searchResourcePages` method to handle pagination and URL modifications for HAPI FHIR.

### HapiFhirAdminClient
#### Description
A class that extends `HapiFhirClient` to provide administrative functions for managing tenants on a HAPI FHIR server.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| baseUrl | string | The base URL of the server |

#### Internal Logic
- Implements methods for creating, listing, and deleting tenants on the HAPI FHIR server.
- Uses HAPI FHIR-specific partition management operations.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @medplum/core | Provides base classes and types for FHIR operations |
| @medplum/fhirtypes | Provides FHIR resource type definitions |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| DEFAULT_TENANT | string | "DEFAULT" | The default tenant ID used for admin operations |

## Error Handling
The code doesn't implement specific error handling beyond what's provided by the base `MedplumClient` class.

## Performance Considerations
The `searchNoAppend` method removes caching from the client, which may impact performance for repeated queries.

This documentation provides a comprehensive overview of the `api-hapi.ts` file, focusing on its main components, functionality, and important considerations for usage and implementation.