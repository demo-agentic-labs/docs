---
title: "api-factory.ts"
---

## High-level description
This code defines factory functions for creating FHIR API clients, specifically for customer data access and tenant management. It provides a clean interface for creating instances of FHIR clients with proper configuration based on customer ID and base URL.

## Code Structure
The code exports two main functions: `makeFhirApi` and `makeFhirAdminApi`. These functions create instances of `HapiFhirClient` and `HapiFhirAdminClient` respectively, which are implementations of the `FhirClient` and `FhirAdminClient` interfaces.

## References
This code references the following symbols from other parts of the codebase:
- `FhirClient` and `FhirAdminClient` from "./api"
- `HapiFhirClient` and `HapiFhirAdminClient` from "./api-hapi"

## Symbols

### `makeFhirApi`
#### Description
This function creates and returns an instance of the FHIR API client configured for a specific customer's data access.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| cxId | string | The customer ID used to identify the tenant |
| baseUrl | string | The base URL of the FHIR server |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return | FhirClient | An instance of HapiFhirClient configured for the specified customer |

#### Internal Logic
The function creates a new instance of `HapiFhirClient` with the provided `cxId` and `baseUrl`.

### `makeFhirAdminApi`
#### Description
This function creates and returns an instance of the FHIR API client configured for tenant management operations.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| baseUrl | string | The base URL of the FHIR server |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return | FhirAdminClient | An instance of HapiFhirAdminClient configured for tenant management |

#### Internal Logic
The function creates a new instance of `HapiFhirAdminClient` with the provided `baseUrl`.

## Side Effects
This code does not have any side effects. It only creates and returns client instances without modifying any external state.

## Dependencies
This code depends on the following internal modules:
- "./api" for `FhirClient` and `FhirAdminClient` interfaces
- "./api-hapi" for `HapiFhirClient` and `HapiFhirAdminClient` implementations

## Error Handling
This code does not implement any specific error handling. Error handling is likely managed within the `HapiFhirClient` and `HapiFhirAdminClient` implementations.

## API/Interface Reference
The code exposes two main functions:

| Function | Inputs | Output | Description |
|:---------|:-------|:-------|:------------|
| makeFhirApi | cxId: string, baseUrl: string | FhirClient | Creates a FHIR client for customer data access |
| makeFhirAdminApi | baseUrl: string | FhirAdminClient | Creates a FHIR client for tenant management |

Note: The `makeFhirAdminApi` function is marked with a warning comment indicating it should only be used for tenant management purposes.