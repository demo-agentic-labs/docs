---
title: "Overview"
---

## High-level description
This directory contains AWS-related utility functions and classes for interacting with various AWS services such as S3, Lambda, SQS, Secrets Manager, and Location Services. It also includes specialized modules for document signing, FHIR bundle processing, and AI-powered medical record summarization.

## What does it do?
The code in this directory provides a set of tools and utilities for:

1. Interacting with AWS services:
   - S3: File upload, download, and management
   - Lambda: Function invocation and response handling
   - SQS: Message sending and queue management
   - Secrets Manager: Retrieving and managing secrets
   - Location Services: Geocoding and location data handling
   - AppConfig: Managing feature flags

2. Document processing and signing:
   - Bulk document signing for patient and customer-related documents
   - Generating signed URLs for temporary document access

3. Medical record processing:
   - Converting FHIR bundles to brief summaries and HTML representations
   - Specialized processing for ADHD-related medical records
   - AI-powered brief generation using AWS Bedrock

4. Document uploading and management:
   - Handling document uploads to S3
   - Updating metadata and managing document references in FHIR servers

These utilities are designed to be used across different parts of a larger system, providing a consistent interface for AWS service interactions and specialized medical data processing.

## Key Files

1. `s3.ts`: Defines the `S3Utils` class for S3 operations.
2. `lambda.ts`: Provides utilities for AWS Lambda interactions.
3. `sqs.ts`: Contains the `SQSClient` class for SQS operations.
4. `secret-manager.ts`: Offers functions for interacting with AWS Secrets Manager.
5. `location.ts`: Includes utilities for AWS Location Services.
6. `app-config.ts`: Manages feature flags using AWS AppConfig.
7. `bedrock.ts`: Implements the `BedrockUtils` class for AI-powered text generation.
8. `document-signing/`: Directory containing bulk document signing functionality.
9. `lambda-logic/`: Directory with Lambda functions for FHIR bundle processing and document management.

## Dependencies
The code relies on several external libraries and AWS services:

1. AWS SDK: For interacting with various AWS services
2. axios: HTTP client for making API requests
3. dayjs: Date and time manipulation library
4. zod: Schema definition and validation library
5. @medplum/fhirtypes: Provides TypeScript types for FHIR resources
6. lodash: Utility functions for data manipulation

## Configuration
The modules use various configuration settings, typically provided through environment variables or function parameters. These include:

- AWS region settings
- S3 bucket names
- Lambda function names
- API endpoints
- Feature flag configurations
- AI model IDs and versions

## Error Handling
The code implements error handling throughout, with custom error classes and utility functions for capturing and logging errors. Many functions include options for graceful failure or throwing specific error types based on the operation's requirements.

In summary, this directory provides a comprehensive set of tools for AWS service interactions and specialized medical data processing, designed to be used as part of a larger healthcare-related application or system.