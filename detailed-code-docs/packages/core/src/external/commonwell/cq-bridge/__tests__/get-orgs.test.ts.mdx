---
title: "get-orgs.test.ts"
---

## High-level description
This file contains unit tests for the `getOrgsByPrio` and `getOrgChunksFromPos` functions from the `get-orgs.ts` module. The tests verify the functionality of these functions, which are responsible for organizing and chunking CommonWell Health Alliance (CQ) organizations.

## Code Structure
The test file is structured using Jest's `describe` and `it` blocks. It tests two main functions: `getOrgsByPrio` and `getOrgChunksFromPos`. The tests use a cloned version of the `orgs` data imported from `cq-org-list.json`.

## References
- `../get-orgs`: The module being tested, containing the `getOrgsByPrio` and `getOrgChunksFromPos` functions.
- `../cq-org-list.json`: The source of organization data used in the tests.

## Symbols

### `describe("getOrgs")`
#### Description
This is the main test suite for the `getOrgs` module.

### `describe("getOrgsByPrio")`
#### Description
This test suite focuses on the `getOrgsByPrio` function.

#### Internal Logic
It contains a single test case that checks if the function returns organizations grouped by priority.

### `it("gets orgs in groups by prio")`
#### Description
This test case verifies that `getOrgsByPrio` returns organizations grouped into high, medium, and low priority categories.

#### Internal Logic
1. Calls `getOrgsByPrio()`
2. Checks if the result is truthy
3. Verifies that each priority group (high, medium, low) has a non-zero length

### `describe("getOrgChunksFromPos")`
#### Description
This test suite focuses on the `getOrgChunksFromPos` function.

#### Internal Logic
It contains four test cases that check various aspects of the function's behavior.

### `it("returns total of orgs")`
#### Description
This test case verifies that `getOrgChunksFromPos` returns the correct total number of organizations.

#### Internal Logic
1. Calls `getOrgChunksFromPos()`
2. Checks if the returned `total` is truthy
3. Verifies that the `total` matches the length of `orgsForTest`

### `it("returns chunks with 10 elements")`
#### Description
This test case checks if `getOrgChunksFromPos` returns chunks of the specified size.

#### Internal Logic
1. Calls `getOrgChunksFromPos({ chunkSize: 10 })`
2. Verifies that the returned `chunks` array is truthy
3. Checks if the number of chunks matches the expected number based on the total organizations and chunk size

### `it("returns all chunks when no fromPos is set")`
#### Description
This test case ensures that `getOrgChunksFromPos` returns all chunks when no starting position is specified.

#### Internal Logic
1. Calls `getOrgChunksFromPos()`
2. Verifies that the returned `chunks` array is truthy
3. Checks if the number of chunks matches the expected number using the default chunk size

### `it("returns from 11th chunk when fromPos is 10")`
#### Description
This test case verifies that `getOrgChunksFromPos` returns chunks starting from the specified position.

#### Internal Logic
1. Creates an expected array by chunking `orgsForTest` and removing the first 10 chunks
2. Calls `getOrgChunksFromPos({ fromPos: 10 })`
3. Verifies that the returned `total` matches the length of `orgsForTest`
4. Checks if the returned `chunks` array is truthy
5. Verifies that the number of chunks matches the expected array length
6. Ensures that the returned chunks contain the expected chunks

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| lodash | Used for `chunk` and `cloneDeep` functions |
| ../cq-org-list.json | Provides the organization data for testing |
| ../get-orgs | Contains the functions being tested |

This test file ensures that the `getOrgsByPrio` and `getOrgChunksFromPos` functions from the `get-orgs` module work correctly, handling various scenarios such as different chunk sizes and starting positions.