---
title: "priorRequest.hbs"
---

## High-level description
This Handlebars template defines a FHIR DeviceRequest resource with a priorRequest field. It's designed to generate a JSON structure representing a device request with a reference to a prior request.

## Symbols

### DeviceRequest Template
#### Description
This template creates a JSON structure for a FHIR DeviceRequest resource. It includes a priorRequest field, which is an array containing a single reference to a previous request.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ID   | String | The unique identifier for this DeviceRequest resource |
| REF  | String | The reference to the prior request |

#### Outputs
The output is a JSON object representing a FHIR DeviceRequest resource with the following structure:
```json
{
    "resource": {
        "resourceType": "DeviceRequest",
        "id": "{{ID}}",
        "priorRequest": [
            {
                "reference": "{{REF}}"
            }
        ]
    }
}
```

#### Internal Logic
1. The template sets the `resourceType` to "DeviceRequest".
2. It uses the `{{ID}}` input to set the `id` field of the DeviceRequest.
3. It creates a `priorRequest` array with a single object containing a `reference` field, populated with the `{{REF}}` input.

## Dependencies
This template relies on the Handlebars templating engine to process the `{{ID}}` and `{{REF}}` placeholders.

## Configuration
There are no specific configuration options defined in this template.

## Error Handling
This template does not implement any explicit error handling. It assumes that the `ID` and `REF` values will be provided when the template is rendered.

## Notes
1. The template includes a comprehensive copyright notice at the beginning, indicating that it's based on work by Microsoft Corporation but is now maintained by Metriport Inc. under the AGPLv3 license.
2. The structure of the JSON output adheres to the FHIR specification for DeviceRequest resources.
3. The template only allows for a single prior request reference. If multiple prior requests need to be supported, the template would need to be modified to accept and process multiple references.