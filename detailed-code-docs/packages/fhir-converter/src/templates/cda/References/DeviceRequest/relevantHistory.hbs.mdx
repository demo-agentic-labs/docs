---
title: "relevantHistory.hbs"
---

## High-level description
This Handlebars template defines a FHIR DeviceRequest resource with a relevantHistory field. It's designed to be used in a FHIR converter, specifically for converting CDA (Clinical Document Architecture) data to FHIR format.

## Symbols

### DeviceRequest Template
#### Description
This template creates a FHIR DeviceRequest resource with a relevantHistory field. The DeviceRequest resource is used to record the request for the use of a device by a patient.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ID | String | The unique identifier for the DeviceRequest resource |
| REF | String | A reference to a relevant history item |

#### Outputs
The output is a JSON object representing a FHIR DeviceRequest resource with the following structure:
- `resource`: An object containing the DeviceRequest details
  - `resourceType`: Always set to "DeviceRequest"
  - `id`: The unique identifier for this DeviceRequest
  - `relevantHistory`: An array containing a single object with a `reference` field

#### Internal Logic
1. The template sets the `resourceType` to "DeviceRequest".
2. It uses the `ID` input to set the `id` field of the DeviceRequest.
3. It creates a `relevantHistory` array with a single object.
4. The object in the `relevantHistory` array has a `reference` field set to the `REF` input.

## Dependencies
This template is part of a larger FHIR converter system and likely depends on:
| Dependency | Purpose |
|:-----------|:--------|
| Handlebars | Template engine used to render this template |
| FHIR Converter | The broader system that uses this template to convert CDA to FHIR |

## Notes
- The template includes a comprehensive copyright notice at the top, indicating it's based on work by Microsoft but is now maintained by Metriport Inc. under the AGPLv3 license.
- The structure of the output JSON suggests that this template might be used as part of a larger resource bundle, as it's wrapped in a `resource` object.
- The `relevantHistory` array is hardcoded to contain only one item. If multiple history items are needed, the template would need to be modified.
- The template doesn't include any error handling or conditional logic, suggesting it's meant to be used in a controlled environment where the inputs are guaranteed to be present and correctly formatted.