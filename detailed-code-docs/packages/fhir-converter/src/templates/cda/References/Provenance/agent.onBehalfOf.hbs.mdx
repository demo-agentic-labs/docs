---
title: "agent.onBehalfOf.hbs"
---

## High-level description
This Handlebars template defines a FHIR Provenance resource with an agent acting on behalf of another entity. It's designed to be used in a FHIR converter, specifically for CDA (Clinical Document Architecture) to FHIR conversion.

## Symbols

### Provenance Resource Template
#### Description
This template creates a FHIR Provenance resource with a single agent acting on behalf of another entity.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ID   | string | The unique identifier for the Provenance resource |
| REF  | string | The reference to the entity on whose behalf the agent is acting |

#### Outputs
A JSON object representing a FHIR Provenance resource with the following structure:
- `resource`: The main container for the Provenance resource
  - `resourceType`: Set to "Provenance"
  - `id`: The unique identifier for this Provenance resource
  - `agent`: An array containing a single agent object
    - `onBehalfOf`: An object with a reference to the entity on whose behalf the agent is acting

#### Internal Logic
1. The template uses Handlebars syntax to insert the `ID` and `REF` values into the appropriate places in the JSON structure.
2. The `resourceType` is hardcoded as "Provenance".
3. The `agent` array contains a single object with an `onBehalfOf` property, which includes the reference to the entity being represented.

## Dependencies
This template is part of a larger FHIR converter system and likely depends on:
| Dependency | Purpose |
|:-----------|:--------|
| Handlebars | Template engine used for generating the JSON structure |
| FHIR Specification | Defines the structure and requirements for the Provenance resource |

## Configuration
This template doesn't include any explicit configuration options. The `ID` and `REF` values are expected to be provided when the template is rendered.

## Notes
1. The template includes a comprehensive copyright and license notice at the top, indicating it's based on work by Microsoft but is now part of a project by Metriport Inc.
2. The template is specifically located in a path suggesting it's used for CDA to FHIR conversion (`packages/fhir-converter/src/templates/cda/References/Provenance/`).
3. The JSON structure is not complete and would likely be part of a larger FHIR Bundle or used in conjunction with other templates to create a full FHIR resource.
4. The template follows the FHIR R4 structure for Provenance resources, focusing specifically on the `agent.onBehalfOf` element.

This template provides a reusable way to generate the structure for a Provenance resource's agent acting on behalf of another entity, which is a common pattern in healthcare information exchange scenarios.