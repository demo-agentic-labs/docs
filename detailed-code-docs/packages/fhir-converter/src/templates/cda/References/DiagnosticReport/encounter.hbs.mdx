---
title: "encounter.hbs"
---

## High-level description
This Handlebars template file defines the structure for creating a FHIR DiagnosticReport resource with an associated encounter reference. It's designed to convert CDA (Clinical Document Architecture) data into FHIR-compliant JSON format, specifically for diagnostic reports linked to encounters.

## Symbols

### Main Template
#### Description
The main template generates a FHIR DiagnosticReport resource with an encounter reference. It includes the resource's fullUrl, id, code, status, and encounter reference.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ID | string | Unique identifier for the DiagnosticReport resource |
| diagReport | object | Contains diagnostic report data including code, title, and statusCode |
| REF | string | Reference to the associated encounter |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| JSON object | object | A FHIR-compliant DiagnosticReport resource |

#### Internal Logic
1. Sets the fullUrl and id using the provided ID.
2. Defines the resourceType as "DiagnosticReport".
3. Sets the code using a partial template (CodeableConcept.hbs) with diagReport.code and diagReport.title.
4. Sets the status using a partial template (DiagnosticReportStatus.hbs) with diagReport.statusCode.code.
5. Sets the encounter reference using the provided REF.

### Partial Templates
The template uses two partial templates:
1. `DataType/CodeableConcept.hbs`: Used to generate the code field.
2. `ValueSet/DiagnosticReportStatus.hbs`: Used to generate the status field.

These partial templates are not defined in this file but are referenced and expected to exist in the template system.

## Dependencies
This template relies on the Handlebars templating engine for rendering.

## Configuration
The template uses the following configuration options:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| canBeUnknown | boolean | true | Used in the CodeableConcept partial, allows the code to be unknown |

## Notes
1. The file includes a detailed copyright notice at the beginning, indicating it's based on work by Microsoft Corporation but modified and licensed under AGPLv3 by Metriport Inc.
2. The template is designed to be part of a larger system for converting CDA documents to FHIR resources.
3. Error handling and input validation are not explicitly defined in this template, suggesting that these concerns are likely handled elsewhere in the conversion process.