---
title: "TransferSummary.hbs"
---

## High-level description
This Handlebars template file defines the structure for a FHIR Bundle resource of type "batch". It includes various sections of a Transfer Summary, incorporating both required and optional sections, and creates a DocumentReference resource at the end.

## Code Structure
The template starts with a copyright notice and then defines the main structure of a FHIR Bundle. It includes partial templates for different sections of the Transfer Summary and ends with a DocumentReference resource.

## Symbols

### FHIR Bundle
#### Description
The main structure of the template creates a FHIR Bundle resource with type "batch". It includes multiple entries that are populated by partial templates.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| msg | Object | The input message containing the data to be transformed |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Bundle | JSON | A FHIR Bundle resource containing multiple entries |

#### Internal Logic
1. Defines the resourceType as "Bundle" and type as "batch"
2. Includes a Header partial template
3. Includes required section partial templates (Problems, Allergies and Adverse Reactions, Medication, Results, Vital Signs, Reason for Referral)
4. Includes optional section partial templates (Encounters, Family history, Hospital Discharge Diagnosis, Hospital Admission Diagnosis, Immunization, Procedures, Social History, Functional Status, Medical Equipment, Advance Directives, Mental Status, Nutrition, Payers)
5. Includes a DocumentReference partial template at the end

### Partial Templates
#### Description
The template includes multiple partial templates for different sections of the Transfer Summary.

#### Inputs
Each partial template likely takes specific parts of the `msg` object as input.

#### Outputs
Each partial template contributes to the entries array of the FHIR Bundle.

### DocumentReference Resource
#### Description
Creates a DocumentReference resource at the end of the Bundle.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| msg | Object | The input message containing the data to be transformed |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| DocumentReference | JSON | A FHIR DocumentReference resource |

#### Internal Logic
Uses the `DocumentReference.hbs` partial template to create the resource. It generates a UUID for the resource ID based on the stringified `msg` object.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Handlebars | Template engine used for generating the FHIR Bundle |

## Notes
- The template uses Handlebars syntax, including partials (e.g., `{{&gt;Header.hbs}}`) and helpers (e.g., `{{generateUUID}}`, `{{toJsonString}}`).
- The structure follows the Transfer Summary document type, including both required and optional sections as defined in the CDA (Clinical Document Architecture) standard.
- The template is designed to be flexible, allowing for the inclusion of various sections based on the available data in the input message.