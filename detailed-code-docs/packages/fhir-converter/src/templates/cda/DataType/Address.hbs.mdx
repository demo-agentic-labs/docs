---
title: "Address.hbs"
---

## High-level description
This Handlebars template file defines the structure for converting an address from CDA (Clinical Document Architecture) format to FHIR (Fast Healthcare Interoperability Resources) format. It creates a JSON object representing an address with properties such as use, line, city, state, country, and postalCode.

## Symbols

### Address Template
#### Description
This template creates a JSON object representing an address in FHIR format. It extracts information from the CDA address format (`addr`) and maps it to the corresponding FHIR address fields.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| addr | Object | The CDA address object containing address details |
| isOrg | Boolean | A flag indicating whether the address belongs to an organization |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| JSON Object | Object | A FHIR-compliant address object |

#### Internal Logic
1. Sets the `use` field if the address is not for an organization, using the `AddressUse.hbs` partial template.
2. Creates an array of address lines from `addr.streetAddressLine`.
3. Maps city, state, country, and postalCode from the CDA format to FHIR format.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ValueSet/AddressUse.hbs | Partial template for mapping address use codes |

## Notes
1. The template includes a comprehensive copyright and license notice at the beginning, indicating it's based on work by Microsoft Corporation but is now maintained by Metriport Inc.
2. The template uses Handlebars syntax for conditional statements and loops.
3. The `toArray` helper function is used to ensure `addr.streetAddressLine` is treated as an array.
4. The template assumes that the input `addr` object follows the CDA structure with properties like `streetAddressLine`, `city`, `state`, `country`, and `postalCode`.
5. The output JSON object is not closed with a curly brace, suggesting this template might be part of a larger object or array.