---
title: "Assessments.hbs"
---

## High-level description
This Handlebars template is designed to process and transform Clinical Document Architecture (CDA) assessment sections into FHIR DiagnosticReport resources. It specifically targets CDA sections with the template ID '2.16.840.1.113883.10.20.22.2.8', which corresponds to assessment sections.

## Code Structure
The template uses nested Handlebars helpers and conditionals to extract assessment data from the CDA document and transform it into a FHIR-compatible format. It leverages custom helpers like `getFirstCdaSectionsByTemplateId`, `extractAndMapTableData`, and `convertMappedDataToPlainText` to process the data.

## Symbols

### Main Template
#### Description
The main template checks for the presence of assessment sections in the CDA document and processes each one to create FHIR DiagnosticReport resources.

#### Internal Logic
1. Check if the input message contains the specific template ID for assessment sections.
2. If found, iterate through each assessment section.
3. For each assessment section, extract and map the table data.
4. Convert the mapped data to plain text.
5. Generate a DiagnosticReport resource using the extracted data.

## Dependencies
The template relies on several custom Handlebars helpers:
| Dependency | Purpose |
|:-----------|:--------|
| contains | Checks if a string contains a specific substring |
| toString | Converts a value to a string |
| toJsonString | Converts a value to a JSON string |
| getFirstCdaSectionsByTemplateId | Retrieves CDA sections by template ID |
| toArray | Converts a value to an array |
| extractAndMapTableData | Extracts and maps table data from the assessment text |
| convertMappedDataToPlainText | Converts mapped data to plain text |
| generateUUID | Generates a UUID based on the input string |

## TODOs
The template includes a TODO comment indicating that it is not production-ready and should not be used as-is:
```handlebars
{{!-- TODO IMPLEMENT THIS PROPERLY. THIS IS NOT PRODUCTION READY. DO NOT USE --}}
```
This suggests that the current implementation is a placeholder or draft and requires further development and testing before it can be used in a production environment.