---
title: "ConsultationNote.hbs"
---

## High-level description
This Handlebars template file, `ConsultationNote.hbs`, is designed to generate a FHIR (Fast Healthcare Interoperability Resources) Bundle resource representing a Consultation Note. It structures various sections of a medical consultation into a standardized format, including both required and optional sections, and creates a DocumentReference resource.

## Code Structure
The template creates a FHIR Bundle resource with a "batch" type. It includes multiple partial templates for different sections of the consultation note, such as allergies, problems, family history, and more. The structure ensures that both required and optional sections are included in a consistent manner.

## Symbols

### FHIR Bundle Resource
#### Description
The main structure of the template, which creates a FHIR Bundle resource of type "batch".

#### Internal Logic
1. Defines the resourceType as "Bundle" and type as "batch".
2. Creates an "entry" array to hold all the resources generated by the partial templates.

### Partial Templates
#### Description
The template includes several partial Handlebars templates, each representing a different section of the consultation note or a specific resource.

#### Internal Logic
- Required Sections:
  - Header
  - Allergies and Adverse Reactions
  - Problems
- Optional Sections:
  - Family history
  - Immunization
  - Medication
  - Procedures
  - Results
  - Social History
  - Vital Signs
  - Functional Status
  - Medical Equipment
  - Advance Directives
  - Mental Status
  - Nutrition
- Document Resource:
  - DocumentReference

Each partial template is included using the Handlebars partial syntax `{{&gt;PartialName.hbs}}`.

### DocumentReference Resource
#### Description
Creates a DocumentReference resource for the entire consultation note.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| docref | object | The document reference data |
| msg | object | The entire message object |

#### Internal Logic
Uses the `generateUUID` helper function to create a unique ID for the DocumentReference resource based on the stringified `msg` object.

## Dependencies
This template relies on several partial Handlebars templates, which are not provided in the given code. These partials are responsible for generating the specific sections of the consultation note and the DocumentReference resource.

## Configuration
The template is configured to include both required and optional sections of a consultation note, as defined by the CDA (Clinical Document Architecture) standard.

## Error Handling
No explicit error handling is implemented in this template. Error handling would likely be managed by the Handlebars rendering engine and the system using this template.

## API/Interface Reference
This template expects to be provided with a `msg` object containing all the necessary data to populate the various sections of the consultation note. The specific structure of this object is not detailed in the given code.