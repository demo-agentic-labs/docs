---
title: "Consent.hbs"
---

## High-level description
This Handlebars template file generates a FHIR Consent resource. It transforms data from a CDA (Clinical Document Architecture) format into a FHIR-compliant JSON structure for a Consent resource, including details such as identifiers, status, scope, patient reference, policy rule, category, date, and provision.

## Symbols

### Main Template
#### Description
The main template defines the structure of a FHIR Consent resource. It includes various properties such as fullUrl, resource details, and a request object for HTTP operations.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ID | String | Unique identifier for the Consent resource |
| id | Array | Array of identifier objects |
| consentScope | String | Code representing the scope of the consent |
| patientId | String | Reference to the patient associated with the consent |
| consentEntry | Object | Contains code and effectiveTime information |
| categoryCode | Object | Category code for the consent |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| JSON | Object | A FHIR-compliant Consent resource in JSON format |

#### Internal Logic
1. Sets the fullUrl and resource id using the provided ID.
2. Generates identifiers using the Identifier partial template.
3. Sets the status as "active" and defines the scope using the provided consentScope.
4. References the patient using the patientId.
5. Sets the policyRule, category, and dateTime using provided data and partial templates.
6. Defines the provision code using the consentEntry value.
7. Includes a request object for PUT operation.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| DataType/Identifier.hbs | Generates FHIR Identifier datatype |
| DataType/CodeableConcept.hbs | Generates FHIR CodeableConcept datatype |

## Helper Functions
| Function | Purpose |
|:---------|:--------|
| toArray | Converts input to an array |
| formatAsDateTime | Formats the input as a DateTime string |

Note: The actual implementation of these helper functions is not provided in the given code snippet.

## Error Handling
The template uses the `canBeUnknown=true` parameter in some CodeableConcept partial calls, suggesting that these fields can be optional or unknown without causing errors.

## Configuration
The template includes a copyright notice and license information at the beginning, indicating it's based on work by Microsoft Corporation and modified by Metriport Inc.