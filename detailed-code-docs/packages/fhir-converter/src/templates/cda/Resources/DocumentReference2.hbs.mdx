---
title: "DocumentReference2.hbs"
---

## High-level description
This Handlebars template generates a FHIR DocumentReference resource in JSON format. It creates a structure that represents a reference to an external document, including its content type and URL.

## Symbols

### Root Template
#### Description
The root template defines the structure of a FHIR DocumentReference resource within a Bundle entry.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ID | string | Unique identifier for the DocumentReference |
| docref.externalDocument.text.mediaType | string | Media type of the external document |
| docref.externalDocument.text.reference.value | string | URL reference to the external document |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| JSON object | object | A FHIR Bundle entry containing a DocumentReference resource |

#### Internal Logic
1. Creates a FHIR Bundle entry with a fullUrl using the provided ID.
2. Defines a DocumentReference resource with the following properties:
   - resourceType: Set to "DocumentReference"
   - id: Set to the provided ID
   - status: Set to "current"
   - content: An array containing an attachment object with:
     - contentType: Set to the provided media type
     - url: Set to the provided reference URL
3. Includes a request object for RESTful operations, specifying:
   - method: "PUT"
   - url: Constructed using the provided ID

## Dependencies
This template relies on the Handlebars templating engine for rendering.

## Configuration
The template uses the following configuration options:
| Option | Type | Description |
|:-------|:-----|:------------|
| ID | string | Unique identifier used throughout the template |
| docref.externalDocument.text.mediaType | string | Media type of the external document |
| docref.externalDocument.text.reference.value | string | URL reference to the external document |

## Error Handling
The template does not implement explicit error handling. It assumes that the required input variables are provided and valid.

## Notes
- The template includes a comprehensive copyright and license notice at the beginning, indicating it's based on work by Microsoft Corporation but is now maintained by Metriport Inc.
- The generated JSON structure is designed to be part of a larger FHIR Bundle, as indicated by the presence of the `fullUrl` and `request` properties.
- The `status` of the DocumentReference is hardcoded as "current".
- The template only handles a single attachment in the `content` array.