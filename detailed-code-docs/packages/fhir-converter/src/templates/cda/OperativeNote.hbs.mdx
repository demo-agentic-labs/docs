---
title: "OperativeNote.hbs"
---

## High-level description
This Handlebars template file, `OperativeNote.hbs`, is designed to generate a FHIR (Fast Healthcare Interoperability Resources) Bundle resource representing an operative note. It structures the operative note data into various sections and includes both required and optional components.

## Code Structure
The template creates a FHIR Bundle resource with a "batch" type. It includes several partial templates for different sections of the operative note, as well as a DocumentReference resource at the end.

## Symbols

### FHIR Bundle
#### Description
The main structure of the template, creating a FHIR Bundle resource of type "batch".

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| msg | Object | The input data object containing the operative note information |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Bundle | Object | A FHIR Bundle resource containing the operative note data |

#### Internal Logic
1. Includes the Header partial template
2. Includes required section partial templates:
   - Procedure_Anesthesia
   - Complications
   - Procedure_Findings
   - Preoperative_Diagnosis
   - Postoperative_Diagnosis
3. Includes an optional section partial template:
   - Procedures
4. Includes a DocumentReference resource partial template

### Partial Templates
#### Description
The template includes several partial templates for different sections of the operative note.

#### Inputs
Each partial template likely takes specific parts of the `msg` object as input.

#### Outputs
Each partial template contributes a part of the final FHIR Bundle resource.

### DocumentReference Resource
#### Description
Creates a DocumentReference resource for the operative note.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| docref | Object | The document reference data |
| msg | Object | The full input data object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| DocumentReference | Object | A FHIR DocumentReference resource |

#### Internal Logic
Uses the `generateUUID` helper function to create a unique ID for the DocumentReference resource based on the stringified `msg` object.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Handlebars | Template engine used for generating the FHIR Bundle |

## Helper Functions
| Function | Purpose |
|:---------|:--------|
| generateUUID | Generates a unique identifier for the DocumentReference resource |
| toJsonString | Converts an object to a JSON string |

Note: The actual implementation of these helper functions is not provided in this template file.