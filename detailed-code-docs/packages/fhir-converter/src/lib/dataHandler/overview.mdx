---
title: "Overview"
---

## High-level description
This directory contains the implementation of a data handling system for the FHIR converter. It provides functionality for processing and manipulating healthcare data during the conversion to FHIR format. The main components are a data handler class and a factory for creating data handlers.

## What does it do?
The code in this directory is responsible for managing the data flow in the FHIR conversion process. It handles three main tasks:

1. Parsing source data: It takes in raw healthcare data and prepares it for conversion.
2. Pre-processing templates: It prepares the conversion templates before they are used.
3. Post-processing results: After the conversion, it applies additional processing to the results, including JSON processing, merging resources, and deduplicating resources.

The system is designed to be extensible, currently supporting CDA (Clinical Document Architecture) data, with the ability to add support for other data types in the future.

## Key Files

### dataHandler.js
This file defines the `dataHandler` class, which is the core component of the data handling system. It provides methods for:
- Parsing source data
- Pre-processing templates
- Post-processing conversion results
- Retrieving conversion result metadata

The post-processing step is particularly important, as it involves:
1. Processing the JSON output
2. Merging resources
3. Deduplicating resources

This ensures that the final FHIR output is clean, consistent, and free of redundancies.

### dataHandlerFactory.js
This file implements the factory pattern for creating data handlers. Currently, it supports creating a CDA data handler, but it's designed to be easily extendable to support other data types in the future. The `dataHandlerFactory` class has a static method `createDataHandler` that returns the appropriate data handler based on the input data type.

## Dependencies
The data handler relies on several external modules for its functionality:
- `jsonProcessor`: Used for processing JSON data in the post-processing step
- `resourceMerger`: Used for merging resources in the post-processing step
- `resourceDeduplicator`: Used for deduplicating resources in the post-processing step
- `cda`: Provides the implementation for the CDA data handler

These dependencies are crucial for the proper functioning of the data handling system, especially in the post-processing phase where the converted data is refined and optimized.

## Configuration
The data handling system does not appear to use any external configuration files or environment variables. The behavior is determined by the input data type and the implementation of the specific data handlers.

In conclusion, this directory provides a flexible and extensible system for handling various types of healthcare data in the FHIR conversion process. It manages the data flow from input parsing through to post-processing, ensuring that the output is properly formatted and optimized FHIR data.