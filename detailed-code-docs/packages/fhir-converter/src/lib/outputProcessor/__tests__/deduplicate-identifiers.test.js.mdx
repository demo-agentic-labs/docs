---
title: "deduplicate-identifiers.test.js"
---

## High-level description
This file contains unit tests for the `deduplicateIdentifiers` function from the `resourceDeduplicator` module. The tests verify the function's behavior in various scenarios, including empty input, duplicate identifiers, and identifiers with different levels of completeness.

## Symbols

### `describe("deduplicateIdentifiers", function () { ... })`
#### Description
This is the main test suite for the `deduplicateIdentifiers` function. It contains multiple test cases to verify different aspects of the function's behavior.

### `it("returns an empty array if no identifiers present", function (done) { ... })`
#### Description
This test case verifies that the function returns an empty array when given an empty input.

#### Internal Logic
1. Arrange: Create an empty array of identifiers.
2. Act: Call `deduplicateIdentifiers` with the empty array.
3. Assert: Check that the result is an empty array.

### `it("removes a duplicate identifier", function (done) { ... })`
#### Description
This test case checks if the function correctly removes duplicate identifiers.

#### Internal Logic
1. Arrange: Create an array with two identical `fullIdentifier` objects.
2. Act: Call `deduplicateIdentifiers` with the array.
3. Assert: Verify that the result contains only one identifier, which matches the `fullIdentifier`.

### `it("keeps the identifier with more fields", function (done) { ... })`
#### Description
This test case ensures that when given two similar identifiers with different levels of completeness, the function keeps the more complete one.

#### Internal Logic
1. Arrange: Create an array with a `fullIdentifier` and a `nonFullIdentifier`.
2. Act: Call `deduplicateIdentifiers` with the array.
3. Assert: Check that the result contains only one identifier, which matches the `fullIdentifier`.

### `it("keeps all different identifiers", function (done) { ... })`
#### Description
This test case verifies that the function retains all unique identifiers, even if they share some similarities.

#### Internal Logic
1. Arrange: Create an array with three identifiers that have different `system` values but are otherwise identical.
2. Act: Call `deduplicateIdentifiers` with the array.
3. Assert: Confirm that the result contains all three identifiers.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| resourceDeduplicator | The module being tested, which provides the `deduplicateIdentifiers` function |

## Error Handling
These tests use Jest's assertion methods, which will throw errors if the expectations are not met. There is no explicit error handling in the test code itself.

## TODOs
- Consider adding more test cases to cover edge cases or potential error scenarios.
- The use of the `done` callback in each test case is unnecessary for synchronous tests. Consider removing it to simplify the test structure.