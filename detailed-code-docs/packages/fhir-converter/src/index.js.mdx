---
title: "index.js"
---

## High-level description
This file sets up an Express server for the FHIR Converter application. It configures the server with various settings, including event listeners, timeouts, and keep-alive settings. The server listens on port 8080 and is designed to handle FHIR conversion requests.

## Code Structure
The main symbols in this code are:
- `app`: The Express application instance
- `server`: The HTTP server created from the Express app

The code sets up various configurations and listeners on the `app` and `server` objects.

## Symbols

### `app`
#### Description
An Express application instance that handles the FHIR Converter's HTTP requests and responses.

#### Internal Logic
- Sets the maximum number of event listeners to 20
- Creates an Express application
- Configures routes using the `routes` module
- Extends dayjs with the duration plugin

### `server`
#### Description
An HTTP server created from the Express app, listening on the specified port.

#### Internal Logic
- Listens on the specified port (default 8080)
- Logs the server's address and port when it starts listening

### `loadbalancerTimeout`
#### Description
Calculates the timeout for the load balancer based on a 15-minute duration.

### `timeout`
#### Description
Calculates the server's timeout by subtracting one second from the load balancer timeout.

### `keepalive`
#### Description
Calculates the keep-alive timeout by adding one second to the load balancer timeout.

## Dependencies
- express: Web application framework
- dayjs: Date and time manipulation library
- events: Node.js events module

## Configuration
- `PORT`: Environment variable for the server port, defaults to 8080
- Event listener limit: Set to 20
- Server timeout: Set to slightly less than the load balancer timeout
- Keep-alive timeout: Set to slightly more than the load balancer timeout

## Error Handling
No specific error handling is implemented in this file.

## Logging
The server logs its listening address and port when it starts.

This code sets up a basic Express server with specific configurations for the FHIR Converter application, including timeout and keep-alive settings optimized for use with a load balancer.