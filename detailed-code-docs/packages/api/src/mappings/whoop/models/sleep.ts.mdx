---
title: "sleep.ts"
---

## High-level description
The code defines a TypeScript interface named `WhoopSleep` representing sleep data retrieved from the Whoop API. It uses the `zod` library for schema validation and type inference. The interface includes fields for sleep start and end times, sleep stage durations, sleep scores, and other sleep-related metrics.

## References
- `whoopScoreSchema`: Defines the schema for the Whoop sleep score.

## Symbols

### `whoopSleepResp`
#### Description
This symbol defines a Zod schema for validating the response received from the Whoop API for sleep data. It ensures that the response object conforms to the expected structure and data types.

#### Inputs
None. This is a schema definition, not a function.

#### Outputs
None. This is a schema definition, not a function.

#### Internal Logic
The schema defines various fields present in the Whoop sleep response, including:
- `id`: Sleep session ID.
- `user_id`: User ID.
- `created_at`: Timestamp of creation.
- `updated_at`: Timestamp of last update.
- `start`: Sleep start time.
- `end`: Sleep end time.
- `timezone_offset`: Timezone offset.
- `nap`: Boolean indicating if it was a nap.
- `score_state`: Sleep score state (using `whoopScoreSchema`).
- `score`: An object containing detailed sleep metrics like stage durations, sleep need, respiratory rate, and sleep performance percentages.

### `WhoopSleep`
#### Description
This symbol defines a TypeScript type alias named `WhoopSleep`. It leverages the `z.infer` utility from the Zod library to extract the type information from the `whoopSleepResp` schema. This results in a type that accurately represents the validated sleep data from the Whoop API.

#### Inputs
None. This is a type alias, not a function.

#### Outputs
None. This is a type alias, not a function.

## Dependencies
- `zod`: Used for schema validation and type inference.

## Error Handling
The code itself doesn't implement explicit error handling. However, using the Zod schema for parsing the API response ensures that any deviations from the expected format will result in a ZodError, which can be caught and handled appropriately.
