---
title: "user.ts"
---

## High-level description
The code defines a TypeScript module that maps Oura user personal information to the Metriport User model. It includes a mapping function `mapToUser` and a Zod schema `ouraPersonalInfoResponse` for validating and type-checking the Oura personal information response.

## References
- `MetriportUser` from "@metriport/api-sdk"
- `PROVIDER_OURA` from "../../shared/constants"
- `Util` from "../../shared/util"

## Symbols

### `mapToUser`
#### Description
This function maps Oura personal information data to the Metriport User model. It extracts relevant fields like age, email, and biological sex from the Oura data and constructs a MetriportUser object.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ouraPersonalInfo | `OuraPersonalInfo` | Oura personal information data. |
| date | `string` | Date string representing the day the data was collected. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
|  | `MetriportUser` |  Metriport User object populated with mapped Oura data. |

#### Internal Logic
1. Creates a base `MetriportUser` object with metadata containing the date and source (PROVIDER_OURA).
2. Uses the `Util.addDataToObject` helper function to conditionally add the `age`, `email`, and `sex` fields to the `MetriportUser` object based on their presence in the `ouraPersonalInfo` data.
3. Returns the constructed `MetriportUser` object.

### `ouraPersonalInfoResponse`
#### Description
A Zod schema defining the expected structure and types for the Oura personal information response. It ensures that the response data conforms to the defined schema, making the code more robust and less prone to errors from unexpected data.

#### Inputs
N/A - This is a Zod schema definition, not a function.

#### Outputs
N/A - This is a Zod schema definition, not a function.

#### Internal Logic
Defines the schema for the following fields:
- `age`: Optional nullable number.
- `weight`: Optional nullable number.
- `height`: Optional nullable number.
- `biological_sex`: Optional nullable enum with values "male" or "female".
- `email`: Optional nullable string.

### `OuraPersonalInfo`
#### Description
A TypeScript type alias representing the inferred type of the `ouraPersonalInfoResponse` Zod schema. It provides type safety and code completion for working with the validated Oura personal information data.

#### Inputs
N/A - This is a type alias, not a function.

#### Outputs
N/A - This is a type alias, not a function.
