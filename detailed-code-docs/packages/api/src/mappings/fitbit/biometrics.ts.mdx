---
title: "biometrics.ts"
---

## High-level description
The `mapToBiometrics` function transforms Fitbit-specific biometric data into a standardized `Biometrics` object defined in the `@metriport/api-sdk`. This function takes a date string and optional Fitbit biometric data as input and returns a `Biometrics` object populated with the relevant data.

## Code Structure
The `mapToBiometrics` function is the main symbol in this code. It utilizes several helper functions from the `Util` class and references data models specific to Fitbit biometrics. The function iterates through the optional Fitbit data, extracts relevant values, and maps them to the corresponding fields in the `Biometrics` object.

## References
- `Biometrics` from "@metriport/api-sdk"
- `PROVIDER_FITBIT` from "../../shared/constants"
- `Util` from "../../shared/util"
- `FitbitBreathingRate` from "./models/breathing-rate"
- `FitbitCardioScore` from "./models/cardio-score"
- `FitbitHeartRate` from "./models/heart-rate"
- `FitbitHeartVariability` from "./models/heart-variability"
- `FitbitSpo2` from "./models/spo2"
- `FitbitTempCore` from "./models/temperature-core"
- `FitbitTempSkin` from "./models/temperature-skin"

## Symbols

### `mapToBiometrics`
#### Description
This function maps Fitbit-specific biometric data to a standardized `Biometrics` object.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| date | string | The date for which the biometric data is being mapped. |
| breathing | `FitbitBreathingRate` | Optional. Fitbit breathing rate data. |
| cardio | `FitbitCardioScore` | Optional. Fitbit cardio score data. |
| hr | `FitbitHeartRate` | Optional. Fitbit heart rate data. |
| hrv | `FitbitHeartVariability` | Optional. Fitbit heart rate variability data. |
| spo | `FitbitSpo2` | Optional. Fitbit SpO2 data. |
| tempCore | `FitbitTempCore` | Optional. Fitbit core temperature data. |
| tempSkin | `FitbitTempSkin` | Optional. Fitbit skin temperature data. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| biometrics | `Biometrics` | A `Biometrics` object populated with the mapped Fitbit data. |

#### Internal Logic
1. Creates a metadata object with the date and source (Fitbit).
2. Initializes an empty `Biometrics` object with metadata, heart rate, HRV, respiration, and temperature fields.
3. Iterates through each optional Fitbit data parameter:
    - If data is present, extracts relevant values.
    - Uses the `Util.addDataToObject` helper function to add the extracted value to the corresponding field in the `Biometrics` object.
4. Returns the populated `Biometrics` object.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/api-sdk | Provides the `Biometrics` interface for standardized biometric data. |

## TODOs
- TODO #805: Include a more thorough breakdown of the heart rate data to get the actual min and max bpm, instead of relying on heartRateZones
  https://github.com/metriport/metriport/issues/805
