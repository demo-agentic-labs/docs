---
title: "Overview"
---

## High-level description
This directory contains code for mapping Fitbit data to standardized formats used in the Metriport API. It includes functions for transforming various types of Fitbit data, such as activity logs, biometrics, body measurements, nutrition, sleep data, and user profiles.

## What does it do?
The code in this directory performs the following main functions:

1. Transforms Fitbit activity log data into standardized Activity objects.
2. Maps Fitbit biometric data (heart rate, breathing rate, etc.) to a standardized Biometrics object.
3. Converts Fitbit body measurements (weight, height) to a standardized Body object.
4. Transforms Fitbit food and water intake data into a standardized Nutrition object.
5. Maps Fitbit sleep data to a standardized Sleep object.
6. Converts Fitbit user profile data to a standardized User object.
7. Defines constants and types related to Fitbit data and API scopes.
8. Provides schemas and types for various Fitbit data models using Zod for validation and type inference.

These transformations ensure that data from Fitbit can be consistently processed and stored within the Metriport system, allowing for standardized handling of health and fitness data across different providers.

## Entry points
The main entry points for this directory are the mapping functions in each file:

1. `mapToActivity` in `activity.ts`
2. `mapToBiometrics` in `biometrics.ts`
3. `mapToBody` in `body.ts`
4. `mapToNutrition` in `nutrition.ts`
5. `mapToSleep` in `sleep.ts`
6. `mapToUser` in `user.ts`

These functions are likely called from other parts of the application when processing Fitbit data.

## Key Files
1. `activity.ts`: Maps Fitbit activity logs to standardized Activity objects.
2. `biometrics.ts`: Transforms Fitbit biometric data to standardized Biometrics objects.
3. `body.ts`: Converts Fitbit body measurements to standardized Body objects.
4. `constants.ts`: Defines constants and types for Fitbit data and API scopes.
5. `index.ts`: Provides schemas and types for Fitbit webhook notifications and subscriptions.
6. `nutrition.ts`: Maps Fitbit food and water data to standardized Nutrition objects.
7. `sleep.ts`: Transforms Fitbit sleep data to standardized Sleep objects.
8. `user.ts`: Converts Fitbit user profile data to standardized User objects.
9. `models/` directory: Contains Zod schemas and inferred types for various Fitbit data models.

## Dependencies
The main dependencies used across these files include:

1. `@metriport/api-sdk`: Provides standardized interfaces for health and fitness data.
2. `zod`: Used for schema validation and type inference in data models.
3. `convert-units`: Used for unit conversions (e.g., stones to kilograms, inches to centimeters).
4. `dayjs`: Used for date and time manipulation, including timezone handling.

## Configuration
There are no specific configuration files in this directory. However, the `constants.ts` file defines important constants such as:

1. `METRIC`: Represents the metric unit system.
2. `US_LOCALE`: Represents the US locale.
3. `fitbitCollectionTypes`: Defines the different data collection types supported by Fitbit.
4. `FitbitScopes`: An enum representing the different scopes required for accessing Fitbit data.
5. `fullSubscriptionRequiredScopes`: An array of scopes required for full webhook subscription to Fitbit data.

These constants are used throughout the mapping functions and may need to be updated if Fitbit's API or data structures change.

In summary, this directory provides a crucial layer of abstraction between Fitbit's specific data structures and the standardized formats used in the Metriport system, ensuring consistent handling of health and fitness data across different providers.