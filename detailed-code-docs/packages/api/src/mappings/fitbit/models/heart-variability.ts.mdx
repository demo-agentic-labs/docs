---
title: "heart-variability.ts"
---

## High-level description
The code defines a Zod schema, `fitbitHeartVariabilityResp`, to validate and type-check data fetched from the Fitbit API for heart rate variability (HRV). It specifically targets the response structure of the "Get HRV Summary by Date" endpoint. The schema ensures that the data conforms to the expected format, including optional fields and data types.

## Symbols

### `fitbitHeartVariabilityResp`
#### Description
A Zod schema defining the expected structure and data types for the Fitbit API response for heart rate variability data.

#### Inputs
_This symbol does not take any inputs._

#### Outputs
_This symbol does not explicitly return any outputs. It defines a schema for data validation._

#### Internal Logic
The schema checks for the following:
- An optional object (`fitbitHeartVariabilityResp.optional()`).
- Within the object:
    - A required `value` object.
    - Within the `value` object:
        - An optional `dailyRmssd` field, which should be a number if present (`z.number().nullable()`).
        - An optional `deepRmssd` field, which should be a number if present (`z.number().nullable()`).
    - A required `dateTime` field, which should be a string (`z.string()`).

### `FitbitHeartVariability`
#### Description
A type alias representing the inferred type from the `fitbitHeartVariabilityResp` Zod schema. This type can be used to ensure type safety when working with validated Fitbit heart rate variability data.

#### Inputs
_This symbol does not take any inputs._

#### Outputs
_This symbol does not explicitly return any outputs. It defines a type alias._

## References
- `z` from "zod" - Used for schema definition and validation.
- `FitbitHeartVariability` - A type alias defined in the same file, used to represent the validated data type.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| zod | Provides schema declaration and validation for data fetched from the Fitbit API. |

## API/Interface Reference
The code doesn't define an API endpoint but rather a schema for validating data received from the Fitbit API endpoint:
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /1/user/-/hrv/date/{date}.json | GET |  |  | Retrieves HRV data for a specific date. The response structure is validated using the `fitbitHeartVariabilityResp` schema. |
