---
title: "Overview"
---

## High-level description
This directory contains modules for mapping Google Fit API data to standardized formats used in the Metriport API. It includes transformations for various health and fitness data types such as activities, biometrics, body measurements, nutrition, and sleep.

## What does it do?
The code in this directory performs the following main functions:

1. Transforms raw Google Fit API data into standardized formats defined by the Metriport API SDK.
2. Extracts relevant data points from complex nested structures returned by the Google Fit API.
3. Performs necessary calculations and aggregations on the raw data (e.g., calculating average heart rate, total sleep duration).
4. Applies unit conversions where needed (e.g., converting meters to centimeters for height).
5. Handles edge cases and potential data inconsistencies in the Google Fit data.

## Entry points
The main entry points for this directory are the mapping functions defined in each file:

1. `activity.ts`: `mapToActivity` function
2. `biometrics.ts`: `mapToBiometrics` function
3. `body.ts`: `mapToBody` function
4. `nutrition.ts`: `mapToNutrition` function
5. `sleep.ts`: `mapToSleep` function

These functions take raw Google Fit data as input and return standardized objects that conform to the Metriport API SDK's data models.

## Key Files
1. `index.ts`: Provides utility functions `getSamples` and `getValues` for extracting data from Google Fit API responses.
2. `models/`: A subdirectory containing TypeScript type definitions and Zod schemas for Google Fit data structures.

## Dependencies
The code relies on several external libraries:

1. `@metriport/api-sdk`: Provides the standardized data models used as output formats.
2. `zod`: Used for schema validation and type inference in the `models/` subdirectory.
3. `dayjs`: Used for date and time manipulation throughout the codebase.
4. `convert-units`: Used for unit conversions (e.g., liters to milliliters in nutrition data).
5. `lodash`: Used for utility functions like `sum` for array calculations.

## Configuration
While there are no explicit configuration files, the code uses several constants that act as configuration values:

1. Data source IDs: Constants like `sourceIdActivity`, `sourceIdBloodGlucose`, etc., are defined to identify specific types of data from Google Fit.
2. `PROVIDER_GOOGLE`: A constant used to identify Google as the data source in the standardized output.
3. `maxTimeBetweenSleepSamples`: Used in sleep data processing to determine when to split sleep sessions.

These constants are defined within their respective files and can be modified if Google changes their API or if additional data sources need to be supported.

The modular structure of this directory allows for easy extension and maintenance of Google Fit data handling within the application. Each file focuses on a specific category of health data, making it simple to add new data types or modify existing ones as needed.