---
title: "Overview"
---

## High-level description
This directory contains modules for mapping data from various health and fitness devices and platforms to standardized formats used in the Metriport API. It includes mappings for Apple Health, Cronometer, Dexcom, Fitbit, Garmin, Google Fit, Oura, Tenovi, Whoop, and Withings. These modules transform raw data from each provider into consistent, standardized objects that can be used across the Metriport ecosystem.

## What does it do?
The code in this directory performs the following main functions:

1. Transforms raw data from various health and fitness platforms into standardized Metriport API data models.
2. Handles different data types including activities, biometrics, body measurements, nutrition, sleep, and user information.
3. Performs necessary unit conversions and calculations to ensure consistency across different data sources.
4. Validates incoming data structures using Zod schemas for type safety and data integrity.
5. Aggregates data points by date or time intervals as required by the Metriport API specifications.
6. Extracts relevant information from complex nested structures provided by different APIs.
7. Handles provider-specific quirks and data formats, normalizing them to a common standard.

These transformations ensure that data from various sources can be consistently processed, stored, and analyzed within the Metriport system, regardless of its origin.

## Entry points
Each provider-specific subdirectory typically contains multiple files, each focusing on a specific type of health data (e.g., activity, biometrics, sleep). The main entry points are usually mapping functions with names like `mapToActivity`, `mapToBiometrics`, `mapToBody`, `mapToNutrition`, `mapToSleep`, and `mapToUser`.

These functions take raw data from the provider's API as input and return standardized objects that conform to the Metriport API SDK's data models.

## Key Files
While each provider has its own set of files, some common patterns emerge:

1. `activity.ts`: Maps activity and workout data to Metriport's Activity model.
2. `biometrics.ts`: Transforms various biometric data (heart rate, blood pressure, etc.) to Metriport's Biometrics model.
3. `body.ts`: Converts body measurements to Metriport's Body model.
4. `nutrition.ts`: Maps nutrition and food intake data to Metriport's Nutrition model.
5. `sleep.ts`: Transforms sleep data to Metriport's Sleep model.
6. `user.ts`: Converts user profile information to Metriport's User model.
7. `models/` subdirectory: Contains TypeScript type definitions and Zod schemas for provider-specific data structures.
8. `constants.ts` or `index.ts`: Often defines provider-specific constants, types, or utility functions.

## Dependencies
Common dependencies across the mappings include:

1. `@metriport/api-sdk`: Provides the standardized data models used as output formats.
2. `zod`: Used for schema validation and type inference of provider API responses.
3. `dayjs`: Used for date and time manipulation.
4. `convert-units`: Used for unit conversions (e.g., meters to centimeters, pounds to kilograms).
5. `lodash`: Used for utility functions in data processing.

## Configuration
While there are no explicit configuration files, the code uses several constants and type definitions that act as configuration:

1. Provider-specific constants (e.g., `PROVIDER_APPLE`, `PROVIDER_FITBIT`) used to identify data sources.
2. Data source IDs or metric type constants used to identify specific types of data from each provider.
3. Zod schemas defined in `models/` subdirectories, which serve as configuration for data validation and typing.

These "configurations" ensure that the mapping functions can correctly identify, process, and validate various types of data from different providers, maintaining consistency with the Metriport API's expectations.

In summary, this directory contains a comprehensive set of modules that form the core of Metriport's data integration capabilities, enabling the platform to ingest, normalize, and standardize health and fitness data from a wide range of sources.