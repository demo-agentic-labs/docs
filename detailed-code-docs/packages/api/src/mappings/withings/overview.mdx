---
title: "Overview"
---

## High-level description
This directory contains code for mapping data from the Withings API to standardized formats used within the application. It includes modules for transforming activity, biometrics, body measurements, and sleep data.

## What does it do?
The code in this directory serves as a bridge between the raw data received from the Withings API and the standardized data structures used throughout the application. It performs the following main functions:

1. Transforms activity and workout data from Withings into a standardized `Activity` format.
2. Converts Withings heart rate and measurement data into a `Biometrics` object.
3. Maps Withings body measurement data to a standardized `Body` object.
4. Transforms Withings sleep data into a standardized `Sleep` object.
5. Defines data models and schemas for various Withings API responses using Zod for runtime type checking and validation.

These transformations ensure that data from Withings is consistently formatted and can be easily integrated with data from other sources within the application.

## Key Files
1. `activity.ts`: Contains functions to map Withings activity and workout data to the standardized `Activity` format.
2. `biometrics.ts`: Includes functions to transform Withings heart rate and measurement data into a `Biometrics` object.
3. `body.ts`: Provides functionality to map Withings body measurement data to a standardized `Body` object.
4. `sleep.ts`: Contains a function to convert Withings sleep data into a standardized `Sleep` object.
5. `models/` directory: Defines Zod schemas and TypeScript types for various Withings API responses, ensuring data integrity and type safety.

## Dependencies
The main dependencies used across these files include:

1. `@metriport/api-sdk`: Provides the standardized data structures used by the application.
2. `dayjs`: Used for date and time manipulation.
3. `zod`: Utilized in the `models/` directory for runtime type checking and schema validation.
4. `convert-units`: Used in `body.ts` for unit conversions.

## Configuration
While there are no specific configuration files in this directory, the code relies on certain constants and type definitions:

- `PROVIDER_WITHINGS`: A constant used to identify Withings as the data source.
- Various type definitions (e.g., `WithingsActivityLogs`, `WithingsHeartRate`, `WithingsMeasurements`) that define the structure of data received from the Withings API.

## Key Concepts

1. Data Mapping: Each main file (`activity.ts`, `biometrics.ts`, `body.ts`, `sleep.ts`) contains a primary mapping function (e.g., `mapToActivity`, `mapToBiometrics`) that transforms Withings data into the standardized format.

2. Data Extraction and Transformation: These mapping functions extract relevant data points from the Withings API responses, perform necessary calculations or conversions, and populate the standardized objects.

3. Type Safety: The use of Zod schemas in the `models/` directory ensures that the data received from the Withings API is validated at runtime and properly typed for use in TypeScript.

4. Modular Design: Each file focuses on a specific type of data (activity, biometrics, body measurements, sleep), making the codebase more maintainable and easier to understand.

5. Utility Functions: The code makes use of utility functions (e.g., `Util.addDataToObject`) to handle common operations across different data types.

This directory plays a crucial role in the application's data flow, ensuring that data from the Withings API is properly formatted and validated before being used in other parts of the application. The modular structure allows for easy maintenance and potential expansion to handle additional data types or API changes in the future.