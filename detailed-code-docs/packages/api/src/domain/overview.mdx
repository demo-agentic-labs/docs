---
title: "Overview"
---

## High-level description
This directory contains the domain models and related utilities for the Metriport API, focusing on medical data management, patient demographics, facilities, webhooks, user authentication, and feedback systems. It defines the core data structures and business logic for handling medical information, integrating with health information exchanges (HIEs), and managing API interactions.

## What does it do?
The code in this directory serves several key purposes:

1. Medical Data Management: It provides structures and functions for handling patient demographics, document references, facilities, and organizations. This includes data normalization, matching, and augmentation.

2. Health Information Exchange Integration: The code supports integration with HIEs like Carequality and CommonWell, managing facility associations and document conversion processes.

3. Webhook Handling: It defines structures for creating and managing webhook requests, supporting both medical and device-related webhook types.

4. User Authentication: The directory includes a `UserToken` class for managing user authentication tokens, including OAuth-related information.

5. Feedback System: It provides structures for creating and managing feedback on various entities, with a focus on patient medical records.

6. Settings Management: The code defines structures for managing API settings, particularly webhook configurations.

7. Product Definition: It includes an enumeration of product types supported by the API.

These components work together to provide a comprehensive system for managing medical data, patient information, and related processes within the Metriport API ecosystem.

## Key Files

1. `medical/`: This subdirectory contains files related to medical data management, including:
   - `patient-demographics.ts`: Handles patient demographic data.
   - `facility.ts`: Manages medical facilities and HIE integration.
   - `docref-mapping.ts`: Maps document references between systems.
   - `address.ts`: Enhances address data with geographic coordinates.
   - `coverage-enhancement.ts`: Manages coverage enhancement data.
   - `conversion-progress.ts`: Tracks document conversion progress.
   - `get-patient-limit.ts`: Determines patient limits in sandbox environments.
   - `codeable-concept.ts`: Represents coded medical information using FHIR data models.

2. `webhook.ts`: Defines the structure and types for webhook requests and their handling.

3. `user-token.ts`: Implements the `UserToken` class for managing user authentication tokens.

4. `feedback.ts`: Defines structures for the feedback system.

5. `settings.ts`: Provides interfaces for API settings, focusing on webhook configurations.

6. `product.ts`: Defines the `Product` enumeration for different product types.

7. `oauth1.ts`: Defines the structure for OAuth 1.0 authentication data.

These files collectively provide the core domain models and business logic for the Metriport API, enabling robust handling of medical data and related processes.

## Dependencies
The code in this directory relies on several key dependencies:

1. `@metriport/core`: Provides core domain models and utility functions.
2. `@metriport/shared`: Offers shared utilities and types.
3. `@metriport/api-sdk`: Provides schema definitions and API-related functionality.
4. `dayjs`: Used for date manipulation.
5. `@faker-js/faker`: Utilized in test files for generating random test data.
6. Jest: The testing framework for unit tests.
7. `nanoid`: Used for generating unique IDs.
8. `ts-essentials`: Provides utility types for TypeScript.

## Configuration
The code uses configuration settings from `../../shared/config`, which includes important constants and environment-specific settings. Some configurable aspects include:

1. Sandbox patient limits, customizable using feature flags.
2. HIE-related settings for Carequality and CommonWell integration.
3. OID (Object Identifier) generation settings for facilities.
4. Default token expiry times for user authentication.
5. Maximum length constraints for webhook URLs and status details.

This configuration allows for flexibility in adapting the system to different environments and customer needs.

The domain models and utilities in this directory form the core of the Metriport API, providing essential functionality for managing medical data, patient information, and related processes in a healthcare information system.