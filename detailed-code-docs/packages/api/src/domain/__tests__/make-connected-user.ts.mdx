---
title: "make-connected-user.ts"
---

## High-level description
This code defines a utility function `makeConnectedUser` that creates a partial `ConnectedUser` object with default values. It's primarily used for testing purposes, allowing the creation of user objects with minimal input while providing default values for missing fields.

## Symbols

### `makeConnectedUser`
#### Description
This function creates a partial `ConnectedUser` object, filling in default values for any missing properties. It uses the UUID library to generate unique identifiers for `id` and `cxId` if they are not provided.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| user | Partial&lt;ConnectedUser&gt; | A partial ConnectedUser object containing any pre-defined properties |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | Partial&lt;ConnectedUser&gt; | A new partial ConnectedUser object with default values for missing properties |

#### Internal Logic
1. The function takes a partial `ConnectedUser` object as input.
2. It returns a new object with the following properties:
   - `id`: Uses the provided `id` or generates a new UUID if not provided.
   - `cxId`: Uses the provided `cxId` or generates a new UUID if not provided.
   - `providerMap`: Uses the provided `providerMap` or an empty object if not provided.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| uuid | Used to generate unique identifiers for `id` and `cxId` when not provided |

## References
This code references the `ConnectedUser` type, which is defined in the related file `packages/api/src/models/connected-user.ts`. The `ConnectedUser` class extends `BaseModel` and includes properties such as `cxId`, `cxUserId`, and `providerMap`.

## Notes
1. This utility function is likely used in test scenarios to create `ConnectedUser` objects with minimal setup, allowing tests to focus on specific properties while providing sensible defaults for others.
2. The use of `Partial&lt;ConnectedUser&gt;` for both input and output allows for flexibility in creating user objects with varying levels of completeness.
3. The function uses the nullish coalescing operator (`??`) to provide default values, which is a concise way to handle undefined or null values.

This code is part of a larger system that deals with connected users and their provider information, as evidenced by the `ConnectedUser` model in the related file. The `makeConnectedUser` function provides a convenient way to create these objects for testing or other purposes where a full `ConnectedUser` instance is not required.