---
title: "base-domain.ts"
---

## High-level description
This code defines a utility function `makeBaseDomain` for creating test instances of the `BaseDomain` interface. It's primarily used in testing scenarios to generate mock data for the base properties of domain objects in the Metriport API.

## Symbols

### `makeBaseDomain`
#### Description
This function creates and returns an object that conforms to the `BaseDomain` interface. It generates mock data for the base properties of domain objects, which include an ID, creation timestamp, update timestamp, and an eTag.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| options | object | An optional object containing configuration options |
| options.id | string \| undefined | An optional ID to use for the domain object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| baseDomain | BaseDomain | An object conforming to the BaseDomain interface |

#### Internal Logic
1. The function uses the provided `id` if available, otherwise generates a new UUID using `faker.string.uuid()`.
2. It sets the `createdAt` and `updatedAt` properties to the current date and time.
3. It generates a random UUID for the `eTag` property.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @faker-js/faker | Used to generate mock data (UUIDs) |
| @metriport/core/domain/base-domain | Imports the BaseDomain interface |

## References
This utility function is used in various test files across the project, including:
- `packages/api/src/domain/medical/__tests__/organization.ts`
- `packages/api/src/domain/medical/__tests__/docref-mapping.ts`
- `packages/api/src/domain/__tests__/settings.ts`
- `packages/api/src/external/carequality/__tests__/cq-patient-data.ts`

These files use `makeBaseDomain` as a foundation for creating mock instances of more specific domain objects, such as Organizations, DocRefMappings, Settings, and CQPatientData.

## Performance Considerations
This function is designed for use in testing scenarios and not in production code. As such, performance is not a critical concern. However, it's worth noting that it uses `new Date()` twice, which could be optimized to a single call if needed.