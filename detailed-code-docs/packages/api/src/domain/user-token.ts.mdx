---
title: "user-token.ts"
---

## High-level description
This code defines the `UserToken` class, which represents a user authentication token with associated OAuth information. It provides methods for creating, building, and cloning user tokens, along with type definitions for token creation and building.

## Code Structure
The main symbol in this code is the `UserToken` class. It has static methods `create` and `build` for instantiating tokens, and an instance method `clone` for creating copies. The code also defines types `UserTokenCreate` and `UserTokenBuild` to support token creation and building operations.

## References
This code references:
- `nanoid` for generating unique IDs
- `OmitProperties` from `ts-essentials` for type manipulation
- `Constants` from `../shared/constants` for default token expiry
- `Util` from `../shared/util` for current time calculation

## Symbols

### UserToken
#### Description
A class representing a user authentication token with associated OAuth information.

#### Inputs
The constructor takes the following parameters:
| Name | Type | Description |
|:-----|:-----|:------------|
| token | string | The token string |
| cxId | string | Customer ID |
| userId | string | User ID |
| expiryTime | number | Token expiry time |
| oauthRequestToken | string (optional) | OAuth request token |
| oauthRequestSecret | string (optional) | OAuth request secret |
| oauthUserAccessToken | string (optional) | OAuth user access token |
| oauthUserAccessSecret | string (optional) | OAuth user access secret |

#### Methods

##### create (static)
Creates a new UserToken instance.

Inputs:
| Name | Type | Description |
|:-----|:-----|:------------|
| v | UserTokenCreate | Token creation parameters |

Output:
| Type | Description |
|:-----|:------------|
| UserToken | A new UserToken instance |

##### build (static)
Builds a UserToken instance from provided parameters.

Inputs:
| Name | Type | Description |
|:-----|:-----|:------------|
| params | UserTokenBuild | Token building parameters |

Output:
| Type | Description |
|:-----|:------------|
| UserToken | A new UserToken instance |

##### clone
Creates a copy of the current UserToken instance.

Output:
| Type | Description |
|:-----|:------------|
| UserToken | A new UserToken instance with the same properties |

#### Internal Logic
- The `create` method generates a new token using `nanoid()` if not provided and sets a default expiry time if not specified.
- The `build` method creates a new UserToken instance with the provided parameters.
- The `clone` method creates a new UserToken instance with the same properties as the current instance.

### validate
#### Description
A placeholder function for validating `UserTokenCreate` objects. Currently, it's an empty function.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| create | UserTokenCreate | The object to validate |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| nanoid | Generating unique IDs for tokens |
| ts-essentials | Providing utility types like OmitProperties |

## Configuration
The code uses `Constants.DEFAULT_TOKEN_EXPIRY_SECONDS` for setting the default token expiry time.

## Error Handling
The code doesn't implement explicit error handling. The `validate` function is a placeholder for potential future validation logic.