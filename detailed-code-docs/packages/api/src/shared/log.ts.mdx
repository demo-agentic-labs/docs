---
title: "log.ts"
---

## High-level description
This code defines utility functions for error handling and logging in a TypeScript project. It provides methods to convert errors to strings, handle asynchronous errors, and log error messages with different levels of detail.

## Symbols

### `errorToString`
#### Description
Converts an error object to a string representation. It can provide a detailed or simplified version of the error message.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| err | unknown | The error object to be converted to a string |
| options | ErrorToStringOptions | Optional configuration for error string generation |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| errorString | string | A string representation of the error |

#### Internal Logic
- If the error is a `ZodError`, it joins the flattened field errors.
- If `options.detailed` is true, it calls `detailedErrorToString`.
- Otherwise, it calls `genericErrorToString`.

### `genericErrorToString`
#### Description
Provides a simple string representation of an error.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| err | unknown | The error object to be converted to a string |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| errorString | string | A simple string representation of the error |

### `detailedErrorToString`
#### Description
Provides a detailed string representation of an error, including additional info and cause messages.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| err | any | The error object to be converted to a detailed string |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| errorString | string | A detailed string representation of the error |

#### Internal Logic
- Extracts the error message, additional info, and cause message.
- Recursively calls itself for nested cause errors.
- Constructs a detailed error string with all available information.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| node:util | Used for the `inspect` function to stringify objects |
| zod | Used for `ZodError` type checking |

## Error Handling
The code itself is focused on error handling and provides utilities to convert various error types into string representations. It handles `ZodError` specifically and provides options for detailed or simplified error messages.

## Notes
- The `errorToString` function is marked as deprecated, suggesting that it should be replaced with a function from `@metriport/shared` in the future.
- The code uses TypeScript's `any` type in some places, which might be improved for better type safety.