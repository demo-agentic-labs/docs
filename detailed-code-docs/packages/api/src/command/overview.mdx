---
title: "Overview"
---

## High-level description
This directory contains modules for managing various aspects of an API, including user authentication, feedback handling, medical data processing, customer settings management, usage reporting, and webhook processing. It serves as a central hub for command-related functionality across different domains of the application.

## What does it do?
The code in this directory performs a wide range of operations:

1. User Management: Handles connected user operations, including creation, deletion, retrieval, and updating of user records.

2. Token Management: Manages user tokens for authentication and authorization purposes.

3. Feedback Handling: Allows creation, retrieval, and updating of feedback and feedback entries, including sending notifications.

4. Medical Data Processing: Manages patient records, organizations, facilities, and documents, including interactions with Health Information Exchanges (HIEs).

5. Customer Settings: Manages customer-specific settings, particularly focusing on webhook configurations.

6. Usage Reporting: Sends usage data to a configured endpoint for tracking purposes.

7. Webhook Processing: Handles incoming webhooks from various health data providers and manages outgoing webhook requests to customers.

These functionalities work together to provide a comprehensive API for managing users, medical data, customer interactions, and integrations with external systems.

## Entry points
The main entry points are spread across various subdirectories:

1. `connected-user/`: Manages connected user operations.
2. `cx-user/`: Handles user token management.
3. `feedback/`: Processes feedback-related operations.
4. `medical/`: Contains core functionality for medical data management.
5. `settings/`: Manages customer settings, particularly webhooks.
6. `usage/`: Handles usage reporting.
7. `webhook/`: Processes incoming and outgoing webhooks.

## Key Files
1. `connected-user/`: Files for creating, deleting, retrieving, and updating connected users.
2. `cx-user/`: Files for creating, retrieving, and saving user tokens.
3. `feedback/`: Files for managing feedback and feedback entries.
4. `medical/`: Contains subdirectories for patient, organization, facility, and document management.
5. `settings/`: Files for creating, retrieving, and updating customer settings.
6. `usage/report-usage.ts`: Handles usage reporting.
7. `webhook/`: Files for processing provider-specific webhooks and managing webhook requests.

## Dependencies
The code relies on various external libraries and internal modules:

1. AWS SDK: For interacting with AWS services like DynamoDB and AppConfig.
2. Sequelize: ORM for database interactions.
3. Axios: For making HTTP requests.
4. dayjs: For date and time manipulation.
5. uuid and nanoid: For generating unique identifiers.
6. zod: For data validation.
7. Internal modules from `@metriport/core`, `@metriport/shared`, and provider-specific SDKs.

## Configuration
The code uses various configuration sources:

1. Environment variables: Accessed through a `Config` object for settings like AWS configurations, API endpoints, and feature flags.
2. AWS AppConfig: Used for managing feature flags and customer-specific configurations.
3. Database-stored settings: Customer-specific settings like webhook configurations.

The configuration allows for flexible management of features, integrations, and customer-specific behaviors across different environments.

This directory serves as a crucial part of the API, providing a wide range of functionalities that form the core of the application's business logic and integrations.