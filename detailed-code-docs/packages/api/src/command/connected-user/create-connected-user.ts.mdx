---
title: "create-connected-user.ts"
---

## High-level description
The `createConnectedUser` function creates a new `ConnectedUser` record in the database. It generates a unique ID for the new user and associates it with the provided `cxId` and `cxUserId`.

## References
- `ConnectedUser`: This function references the `ConnectedUser` model, which defines the structure of the connected user data.

## Symbols

### `createConnectedUser`
#### Description
This asynchronous function creates a new `ConnectedUser` record in the database, generating a unique ID using `uuidv4` and associating it with the provided `cxId` and `cxUserId`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `{ cxId, cxUserId }` | object | An object containing the `cxId` and `cxUserId` to associate with the new connected user. |
| cxId | string | The ID of the client application. |
| cxUserId | string | The ID of the user within the client application. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `connUser` | Promise\&lt;ConnectedUser\&gt; | A promise that resolves to the newly created `ConnectedUser` object. |

#### Internal Logic
1. **Generate a unique ID:** A new UUID (Universally Unique Identifier) is generated using the `uuidv4()` function from the `uuid` library. This ID will be used as the primary key for the new `ConnectedUser` record.
2. **Create the ConnectedUser record:** The `ConnectedUser.create()` method is called with an object containing the generated `id`, `cxId`, and `cxUserId`. This creates a new record in the `connected_users` table with the provided data.
3. **Return the ConnectedUser object:** The newly created `ConnectedUser` object is returned as a Promise.

## Side Effects
- **Database Modification:** This function modifies the database by creating a new `ConnectedUser` record.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| `uuid` | Used for generating a unique ID for the new connected user. |
| `ConnectedUser` | The model representing a connected user in the database. |
