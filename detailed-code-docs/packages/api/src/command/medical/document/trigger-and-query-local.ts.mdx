---
title: "trigger-and-query-local.ts"
---

## High-level description
The `TriggerAndQueryDocRefsLocal` class is a concrete implementation of the `TriggerAndQueryDocRefs` abstract class. It's responsible for triggering document queries for a given patient within the local system, bypassing any external integrations. This class is primarily used for testing and local development purposes.

## Code Structure
The `TriggerAndQueryDocRefsLocal` class extends the abstract class `TriggerAndQueryDocRefs` and provides concrete implementations for its abstract methods. It utilizes other functions like `queryDocumentsAcrossHIEs` and `getPatientOrFail` to perform its tasks.

## References
- `TriggerAndQueryDocRefs`: This abstract class defines the contract for triggering and querying document references.
- `queryDocumentsAcrossHIEs`: This function is responsible for initiating document queries across different health information exchanges (HIEs).
- `getPatientOrFail`: This function retrieves patient information from the local system.

## Symbols

### `TriggerAndQueryDocRefsLocal`
#### Description
This class implements the `TriggerAndQueryDocRefs` abstract class, providing local execution logic for triggering and querying document references.

#### Inputs
This class doesn't have a constructor with inputs.

#### Outputs
This class doesn't directly return any values. It triggers document queries and updates patient data internally.

#### Internal Logic
This class overrides two methods from its parent class:

- `triggerDocQuery`: This method initiates a document query for a given patient. It optionally disables webhook notifications based on the `triggerWHNotifs` flag.
- `getDocQueryStatus`: This method retrieves the status of the document query for a given patient.

## Dependencies
- `@metriport/api-sdk`: Provides the `DocumentQuery` type.
- `@metriport/core/domain/document-query/trigger-and-query`: Provides the `TriggerAndQueryDocRefs` abstract class and `disableWHMetadata` constant.
- `../patient/get-patient`: Provides the `getPatientOrFail` function.
- `./document-query`: Provides the `queryDocumentsAcrossHIEs` function. 
