---
title: "Overview"
---

## High-level description
This directory contains end-to-end (E2E) test files for various components of a medical API, including patient management, facility management, organization management, consolidated medical records, document queries, and API settings. The tests cover CRUD operations, data validation, and integration with FHIR standards.

## What does it do?
The code in this directory performs comprehensive E2E testing for a medical API, ensuring that:

1. Patient data can be created, retrieved, updated, and deleted correctly.
2. Facility information can be managed and validated.
3. Organization data can be retrieved and updated.
4. Consolidated medical records can be generated, validated, and converted to different formats (JSON, HTML, PDF).
5. Document queries can be triggered and processed successfully.
6. API settings, particularly webhook configurations, can be managed and tested.

These tests interact with both the medical API and a FHIR server to ensure data consistency and proper integration between systems.

## Entry points
The main entry points for the tests are the various `run*Tests` functions defined in the test files:

1. `runPatientTestsPart1` and `runPatientTestsPart2` in `patient.test.part.ts`
2. `runFacilityTestsPart1` and `runFacilityTestsPart2` in `facility.test.part.ts`
3. `runOrganizationTests` in `organization.test.part.ts`
4. `runConsolidatedTests` in `consolidated.test.part.ts`
5. `runDocumentQueryTests` in `document-query.test.part.ts`
6. `runSettingsTests` in `settings.test.part.ts`

These functions encapsulate the test suites for their respective components and are likely called from a main test runner file.

## Key Files
1. `patient.ts` and `patient.test.part.ts`: Define utilities and tests for patient-related operations.
2. `facility.ts` and `facility.test.part.ts`: Contain functions and tests for facility management.
3. `organization.ts` and `organization.test.part.ts`: Provide utilities and tests for organization-related operations.
4. `consolidated.ts` and `consolidated.test.part.ts`: Include functions and tests for consolidated medical records.
5. `document-query.test.part.ts`: Contains tests for document query functionality.
6. `settings.test.part.ts`: Defines tests for API settings, particularly webhook configurations.

## Dependencies
The tests rely on several external libraries and frameworks:

1. Jest: The testing framework used for writing and running the tests.
2. @faker-js/faker: Used for generating realistic test data.
3. @medplum/core and @medplum/fhirtypes: Provide FHIR-related functionality and types.
4. @metriport/api-sdk: The SDK for interacting with the medical API.
5. @metriport/core and @metriport/shared: Provide core functionality and shared utilities.
6. dayjs: Used for date and time manipulation.
7. axios: Used for making HTTP requests in some tests.
8. fs: Node.js File System module, used for file operations in some tests.

## Configuration
The tests use various configuration settings and environment variables, including:

1. API endpoints and authentication tokens for the medical API and FHIR server.
2. Test data for patients, facilities, and organizations.
3. Webhook URLs and configurations for testing webhook functionality.
4. File paths for template files used in consolidated record tests.

These configurations are likely managed through a combination of environment variables, configuration files, and test context objects passed to the test functions.

In summary, this directory contains a comprehensive suite of E2E tests that verify the functionality, data integrity, and integration of various components of a medical API, ensuring that it meets the required standards and specifications for healthcare data management.