---
title: "env-setup.ts"
---

## High-level description
This code sets up the environment for running tests in the API package. It loads environment variables from `.env` and `.env.test` files, initializes a test results folder, and extends Jest's `expect` with custom matchers.

## References
- `e2eResultsFolderName`: This symbol is imported from `./e2e/shared.ts`.

## Symbols
### `dotenv.config()`
#### Description
This function loads environment variables from a specified file into `process.env`. It is called twice to load variables from both `.env` and `.env.test` files.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `{ path: string }` | object | An object containing the path to the `.env` file to load. |

#### Internal Logic
The function uses `path.resolve()` to construct the absolute path to the `.env` file based on the current working directory and the provided paths.

### `fs.mkdirSync()`
#### Description
This function synchronously creates a directory if it does not already exist.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `e2eResultsFolderName` | string | The path to the directory to be created. |
| `{ recursive: true }` | object | An object specifying options for directory creation. The `recursive: true` option ensures that parent directories are created if they don't exist. |

### `expect.extend(matchers)`
#### Description
This line extends Jest's `expect` function with custom matchers from the `jest-extended` library. This allows for more expressive and powerful assertions in tests.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `matchers` | object | An object containing the custom matchers to add to `expect`. |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| dotenv | Loads environment variables from `.env` files. |
| fs | Provides file system operations for creating the test results directory. |
| jest-extended | Provides custom Jest matchers for more expressive assertions. |
| path | Provides utilities for working with file and directory paths. |

## Error Handling
The code does not implement specific error handling beyond basic exception raising. 
