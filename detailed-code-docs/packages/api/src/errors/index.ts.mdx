---
title: "index.ts"
---

## High-level description
This code defines error handling and logging utilities for an API. It includes functions to process and format error messages, as well as a mechanism to capture and report errors asynchronously.

## Symbols

### `getErrorMessage`
#### Description
Converts an error object to a string representation.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| error | unknown | The error to be converted to a string |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| errorMessage | string | The string representation of the error |

### `processAsyncError`
#### Description
Creates a function to handle asynchronous errors, logging them and capturing them for further processing.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| msg | string | A message describing the context of the error |
| useMsgAsTitle | boolean | Optional. If true, uses the msg as the error title when capturing |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| errorHandler | function | A function that takes an error and processes it asynchronously |

#### Internal Logic
1. Creates a logging function using the `out` utility.
2. Returns a function that takes an error as input.
3. If in development mode, logs the full error; otherwise, logs a formatted error message.
4. Captures the error for further processing, using either the provided message or the error itself as the title.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/core/util | Provides the `out` utility for logging |
| ../shared/config | Provides configuration settings |
| ../shared/log | Provides the `errorToString` function |
| ../shared/notifications | Provides the `capture` utility for error reporting |

## Error Handling
The code is primarily focused on error handling. It provides utilities to convert errors to strings and process asynchronous errors, including logging and capturing them for further analysis.

## Logging
The code uses a logging utility from `@metriport/core/util`. In development mode, it logs full error objects; in other environments, it logs formatted error messages.

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.