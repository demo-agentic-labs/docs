---
title: "unauthorized.ts"
---

## High-level description
This code defines an `UnauthorizedError` class that extends the `MetriportError` class. It is used to represent unauthorized access errors in the Metriport API, with a default HTTP status code of 401 (Unauthorized).

## Code Structure
The `UnauthorizedError` class extends `MetriportError`, which is imported from a separate file. It uses the `httpStatus` library to set the numeric status code.

## References
- `MetriportError` from "./metriport-error"
- `httpStatus` from "http-status"

## Symbols

### UnauthorizedError
#### Description
A custom error class for unauthorized access scenarios in the Metriport API. It extends the `MetriportError` class and sets a default status code of 401 (Unauthorized).

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| message | string | Optional error message (default: "This request was not authorized") |

#### Internal Logic
1. Calls the parent constructor (`MetriportError`) with the provided or default message.
2. Sets the `status` property to the numeric value of `httpStatus.UNAUTHORIZED` (401).
3. Sets the `name` property to the constructor's name ("UnauthorizedError").

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| http-status | Provides HTTP status codes as constants |

## Usage in Related Code
The `UnauthorizedError` is used in various parts of the Metriport API, particularly in authentication and authorization processes:

1. In `oauth1.ts`, it's thrown when the OAuth token or verifier is invalid or missing.
2. In `oauth2.ts`, it's thrown when essential parameters (provider, authCode, cxId, or userId) are missing or when the token retrieval fails.
3. In `connect.ts`, it's used in multiple routes to handle cases where the API token is missing or invalid.

These usages demonstrate that `UnauthorizedError` is a crucial part of the API's error handling strategy, specifically for dealing with authentication and authorization failures.