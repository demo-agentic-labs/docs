---
title: "carequality-analytics.ts"
---

## High-level description
This code provides utility functions for analyzing and processing responses from Carequality health information exchanges. It focuses on patient discovery, document query, and document retrieval operations, offering methods to count successes, failures, and categorize responses by gateway types.

## Code Structure
The code defines several types and functions that work together to process and analyze different types of responses from health information exchanges. The main functions interact with response objects defined in the IHE Gateway SDK, categorizing and counting various aspects of these responses.

## References
This code references types and functions from "@metriport/ihe-gateway-sdk" and error codes from "@metriport/core/external/carequality/error".

## Symbols

### `getDocumentReferenceContentTypeCounts`
#### Description
Counts the occurrences of each content type in an array of document reference content types.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| docRefsContentTypes | string[] | Array of content types |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| contentTypeCounts | Record&lt;string, number&gt; | Object with content types as keys and their counts as values |

### `determinePatientDiscoverySuccessGateway`
#### Description
Determines which gateway was successful in a patient discovery response.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | OutboundPatientDiscoveryResp | Patient discovery response object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| gatewayCounts | GatewayCounts | Object with gateway names as keys and 1 or 0 as values indicating success |

### `determinePatientDiscoveryFailureType`
#### Description
Categorizes the type of failure in a patient discovery response.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | OutboundPatientDiscoveryResp | Patient discovery response object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| failureType | Object | Object indicating the type of failure (httpError, schemaError, or specificError) |

### `getOutboundPatientDiscoverySuccessFailureCount`
#### Description
Analyzes an array of patient discovery responses and provides counts for various success and failure categories.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | OutboundPatientDiscoveryResp[] | Array of patient discovery response objects |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| counts | Object | Object containing counts for different categories of responses and gateway successes |

### `isSuccessfulOutboundDocQueryResponse`
#### Description
Determines if a document query response is successful.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| obj | OutboundDocumentQueryResp | Document query response object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| isSuccessful | boolean | True if the response is successful, false otherwise |

### `getOutboundDocQuerySuccessFailureCount`
#### Description
Counts successful and failed document query responses.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | OutboundDocumentQueryResp[] | Array of document query response objects |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| counts | Object | Object containing success and failure counts |

### `getOutboundDocRetrievalSuccessFailureCount`
#### Description
Counts successful and failed document retrieval responses.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | OutboundDocumentRetrievalResp[] | Array of document retrieval response objects |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| counts | Object | Object containing success and failure counts |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/ihe-gateway-sdk | Provides types and utility functions for IHE Gateway responses |
| @metriport/core/external/carequality/error | Provides error codes for Carequality operations |

This code is crucial for analyzing and processing responses from health information exchanges, providing valuable insights into the success rates and failure types of various operations. It helps in monitoring and improving the performance of health information exchange integrations.