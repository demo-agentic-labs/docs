---
title: "carequality-analytics.test.ts"
---

## High-level description
This file contains unit tests for the `isSuccessfulOutboundDocQueryResponse` function, which is part of the Carequality analytics module. The tests verify the function's behavior for different scenarios of outbound document query responses, including successful queries with document references, successful queries with no documents found, and unsuccessful queries.

## Symbols

### `describe("isSuccessfulOutboundDocQueryResponse", () =&gt; {...})`
#### Description
This is the main test suite for the `isSuccessfulOutboundDocQueryResponse` function. It contains multiple test cases to verify the function's behavior under different conditions.

#### Internal Logic
The test suite sets up a base response object and then creates specific test cases by modifying or extending this base response.

### `baseResponse`
#### Description
A constant object that represents the common properties of an `OutboundDocumentQueryResp`. It's used as a base for creating specific test cases.

### `it("returns true when response has a documentReference", () =&gt; {...})`
#### Description
This test case verifies that the function returns `true` when the response contains a `documentReference` array with at least one document.

#### Internal Logic
1. Arrange: Creates a response object with a `documentReference` array containing one document.
2. Act: Calls `isSuccessfulOutboundDocQueryResponse` with the created response.
3. Assert: Expects the function to return `true`.

### `it("returns true when response has a 'no-documents-found' issue", () =&gt; {...})`
#### Description
This test case verifies that the function returns `true` when the response contains an `operationOutcome` with a 'no-documents-found' issue.

#### Internal Logic
1. Arrange: Creates a response object with an `operationOutcome` containing a 'no-documents-found' issue.
2. Act: Calls `isSuccessfulOutboundDocQueryResponse` with the created response.
3. Assert: Expects the function to return `true`.

### `it("returns false when response has a different operation outcome", () =&gt; {...})`
#### Description
This test case verifies that the function returns `false` when the response contains an `operationOutcome` with an issue other than 'no-documents-found'.

#### Internal Logic
1. Arrange: Creates a response object with an `operationOutcome` containing an 'http-error' issue.
2. Act: Calls `isSuccessfulOutboundDocQueryResponse` with the created response.
3. Assert: Expects the function to return `false`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/ihe-gateway-sdk | Provides the `OutboundDocumentQueryResp` type used in the tests |

## References
The tests reference the `isSuccessfulOutboundDocQueryResponse` function from the "../carequality-analytics" module, which is not provided in the given code snippets.

## Notes
1. The `OutboundDocumentQueryResp` type is imported from an external SDK, suggesting that this code is part of a larger system dealing with healthcare information exchange.
2. The tests cover three main scenarios: successful queries with documents, successful queries without documents, and unsuccessful queries.
3. The `isSuccessfulOutboundDocQueryResponse` function seems to consider both the presence of document references and specific operation outcomes to determine success.
4. The use of Jest's `describe` and `it` functions indicates that these tests are written using the Jest testing framework.