---
title: "create-outbound-document-query-resp.ts"
---

## High-level description
The `createOutboundDocumentQueryResp` function in `create-outbound-document-query-resp.ts` is responsible for creating a new `OutboundDocumentQueryRespModel` instance in the database. This model represents the response received from an external gateway after a document query request.

## References
- `OutboundDocumentQueryResp`: This type is imported from the `@metriport/ihe-gateway-sdk` package and defines the structure of the response from the external gateway.
- `OutboundDocumentQueryRespModel`: This model is defined in `../../models/outbound-document-query-resp` and represents the database entity for storing outbound document query responses.
- `DefaultPayload`: This type is imported from `./shared` and likely defines common payload properties.

## Symbols

### `createOutboundDocumentQueryResp`
#### Description
This function creates a new record in the database for a document query response received from an external gateway.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| payload | `CreateDocumentQueryRespParam` | An object containing the data for the outbound document query response. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise\&lt;`OutboundDocumentQueryRespModel`\&gt; | A promise that resolves to the newly created `OutboundDocumentQueryRespModel` instance. |

#### Internal Logic
1.  The function receives a `payload` object containing the details of the outbound document query response.
2.  It uses the `OutboundDocumentQueryRespModel.create` method to create a new record in the database with the provided payload data.
3.  The created record includes the following fields:
    - `id`: The ID of the response.
    - `requestId`: The ID of the original request.
    - `patientId`: The ID of the patient associated with the request.
    - `status`: The status of the response.
    - `data`: The actual response data received from the external gateway.
4.  The function returns a promise that resolves to the newly created `OutboundDocumentQueryRespModel` instance.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| `@metriport/ihe-gateway-sdk` | Provides types and potentially functionality related to interacting with an IHE gateway. |
| `sequelize` | Used for database interactions. |

## Error Handling
The code does not implement specific error handling beyond the basic exception raising mechanism provided by the underlying libraries. Any errors during the database interaction will be propagated to the caller.
