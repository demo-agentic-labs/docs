---
title: "create-outbound-document-retrieval-resp.ts"
---

## High-level description
The `createOutboundDocumentRetrievalResp` function saves the response received from the IHE Gateway for a Document Retrieval request to the `OutboundDocumentRetrievalRespModel` table. This response includes details like the request ID, patient ID, status of the retrieval, and the actual response data.

## References
- `OutboundDocumentRetrievalResp`: This type is imported from the `@metriport/ihe-gateway-sdk` package and defines the structure of the response from the IHE Gateway.
- `OutboundDocumentRetrievalRespModel`: This model is imported from the local codebase and represents the table where the response data will be saved.
- `DefaultPayload`: This type is imported from a local file and likely defines common fields for payloads used in similar operations.

## Symbols

### `createOutboundDocumentRetrievalResp`
#### Description
This function takes the response payload for a Document Retrieval request, extracts relevant information, and saves it to the database using the `OutboundDocumentRetrievalRespModel`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| payload | `CreateDocumentRetrievalRespParam` | An object containing the response payload from the IHE Gateway for a Document Retrieval request. It includes fields from `DefaultPayload` and additional fields like `status` and `response`.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise\&lt;`OutboundDocumentRetrievalRespModel`\&gt; | A promise that resolves to the created `OutboundDocumentRetrievalRespModel` instance. This represents the saved response data in the database.

#### Internal Logic
1. **Extracts data from the payload:** The function accesses the `id`, `requestId`, `patientId`, `status`, and `response` fields from the input `payload`.
2. **Creates a new database record:** It calls the `create` method of the `OutboundDocumentRetrievalRespModel` with an object containing the extracted data. This creates a new record in the database table representing the Document Retrieval response.
3. **Returns a promise:** The function returns a promise that resolves with the newly created `OutboundDocumentRetrievalRespModel` instance, indicating successful persistence of the response data.

## Dependencies
- `@metriport/ihe-gateway-sdk`: Provides types and potentially utility functions related to interacting with the IHE Gateway.

## Error Handling
The code does not implement specific error handling beyond potentially throwing exceptions if the database interaction fails.
