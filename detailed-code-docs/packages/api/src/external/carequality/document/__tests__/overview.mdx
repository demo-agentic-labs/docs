---
title: "Overview"
---

## High-level description
This directory contains test files and utility functions for the Carequality document module within the API package. The tests focus on creating outbound document query requests, document retrieval requests, and handling document references with Metriport IDs. The utility functions provide mock data generation for various objects used in the Carequality and IHE gateway context.

## What does it do?
The code in this directory serves several purposes:

1. It tests the creation of outbound document query requests, ensuring that the requests are properly formatted and include the necessary information for querying patient documents from external gateways.

2. It verifies the creation of outbound document retrieval requests, including the handling of multiple document references and splitting requests when the number of references exceeds the allowed limit.

3. It provides utility functions for creating mock data structures used in testing, such as document references, operation outcomes, and gateway information.

4. It includes tests for filtering and de-duplicating document references based on Metriport IDs.

These tests and utilities ensure that the Carequality document module functions correctly when interacting with external healthcare systems and handling patient document information.

## Key Files
1. `create-outbound-document-query-req.test.ts`: Tests the creation of outbound document query requests.
2. `create-outbound-document-retrieval-req.test.ts`: Tests the creation of outbound document retrieval requests.
3. `make-document-reference-with-metriport-id.ts`: Provides utility functions for creating mock document references.
4. `shared.test.ts`: Contains tests for filtering and de-duplicating document references.
5. `shared.ts`: Defines utility functions for creating various mock data structures used in testing.

## Dependencies
The code in this directory relies on the following key dependencies:

1. `@metriport/ihe-gateway-sdk`: Provides data models and schemas for IHE gateway interactions.
2. `@faker-js/faker`: Used for generating realistic fake data for testing purposes.
3. `dayjs`: A library for date and time manipulation.

## Configuration
There is no specific configuration for this test directory. However, the tests and utility functions use various constants and default values that may be configured elsewhere in the codebase, such as:

- `defaultDocRefsPerRequest`: The default number of document references allowed per request.
- `epicOidPrefix` and `surescriptsOid`: OID prefixes for specific gateways.

These values may be adjusted to match the requirements of different external systems or to test different scenarios.

In summary, this directory contains crucial test files and utilities for ensuring the correct functionality of the Carequality document module, particularly in its interactions with external healthcare systems and handling of patient document information.