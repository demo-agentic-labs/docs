---
title: "shared.ts"
---

## High-level description
The code defines a set of helper functions for creating test data related to healthcare interoperability, specifically for document queries in the context of IHE profiles. These functions generate mock data structures like requests, responses, operation outcomes, and gateway information, adhering to the schemas defined in the `@metriport/ihe-gateway-sdk` package.

## Code Structure
The code consists of a series of functions, each responsible for creating a specific data structure. These functions are independent of each other but can be used together to build more complex objects. For example, `makeOutboundDocumentQueryResp` uses `makeIdSystem`, `makeOperationOutcome`, `makeDocumentReferenceWithMetriportId`, and `makeXcaGateway` to construct its return value.

## References
- `@metriport/ihe-gateway-sdk`: This package provides the data models and schemas used by the helper functions.
- `@faker-js/faker`: This library is used to generate realistic-looking fake data for testing purposes.
- `makeDocumentReferenceWithMetriportId`: This function, defined in a separate file, is used to create a `DocumentReference` object.

## Symbols

### `makeBaseRequest`
#### Description
Creates a `BaseRequest` object, which represents a generic request in the IHE gateway context.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string (optional) | Unique identifier for the request. If not provided, a random UUID is generated. |
| cxId | string (optional) | Correlation ID for the request. If not provided, a random UUID is generated. |
| timestamp | string (optional) | Timestamp of the request. If not provided, a recent date is generated. |
| samlAttributes | SamlAttributes (optional) | SAML attributes associated with the request. If not provided, a default object is generated. |
| patientId | string (optional) | Patient ID associated with the request. If not provided, a random UUID is generated. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | BaseRequest | A `BaseRequest` object populated with the provided or generated data. |

### `makeCode`
#### Description
Creates a `Code` object, which represents a coded concept with a system and a code.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| system | string (optional) | System URI for the code. If not provided, a random word is generated. |
| code | string (optional) | Code value. If not provided, a random word is generated. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | Code | A `Code` object populated with the provided or generated data. |

### `makeDetails`
#### Description
Creates a `Details` object, which provides additional information about an issue. It can contain either a text description or a list of coded concepts.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| params | Partial&lt;Details&gt; | An object containing either a `text` property or a `coding` property. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | Details | A `Details` object populated with the provided or generated data. |

### `makeIssue`
#### Description
Creates an `Issue` object, which represents a problem or error encountered during processing.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| severity | string (optional) | Severity of the issue. If not provided, a random word is generated. |
| code | string (optional) | Code representing the type of issue. If not provided, a random word is generated. |
| details | Details (optional) | Additional details about the issue. If not provided, a default `Details` object is generated. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | Issue | An `Issue` object populated with the provided or generated data. |

### `makeOperationOutcome`
#### Description
Creates an `OperationOutcome` object, which represents the outcome of an operation, including any issues encountered.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string (optional) | Unique identifier for the operation outcome. If not provided, a random UUID is generated. |
| resourceType | string (optional) | Type of resource the operation outcome is related to. If not provided, a random word is generated. |
| issue | Issue[] (optional) | List of issues encountered during the operation. If not provided, a list containing a single default `Issue` object is generated. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | OperationOutcome | An `OperationOutcome` object populated with the provided or generated data. |

### `makeBaseResponse`
#### Description
Creates a `BaseResponse` object, which represents a generic response in the IHE gateway context.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string (optional) | Unique identifier for the response. If not provided, a random UUID is generated. |
| timestamp | string (optional) | Timestamp of the response. If not provided, a recent date is generated. |
| responseTimestamp | string (optional) | Timestamp indicating when the response was received. If not provided, a recent date is generated. |
| cxId | string (optional) | Correlation ID for the response. If not provided, a random UUID is generated. |
| externalGatewayPatient | XCPDPatientId (optional) | Patient identifier from the external gateway. If not provided, a default `XCPDPatientId` object is generated. |
| patientId | string (optional) | Patient ID associated with the response. If not provided, a random UUID is generated. |
| operationOutcome | OperationOutcome (optional) | Operation outcome associated with the response. If not provided, a default `OperationOutcome` object is generated. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | BaseResponse | A `BaseResponse` object populated with the provided or generated data. |

### `makeBaseErrorResponse`
#### Description
Creates a `BaseErrorResponse` object, which represents an error response in the IHE gateway context.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string (optional) | Unique identifier for the error response. If not provided, a random UUID is generated. |
| timestamp | string (optional) | Timestamp of the error response. If not provided, a recent date is generated. |
| responseTimestamp | string (optional) | Timestamp indicating when the error response was received. If not provided, a recent date is generated. |
| cxId | string (optional) | Correlation ID for the error response. If not provided, a random UUID is generated. |
| externalGatewayPatient | XCPDPatientId (optional) | Patient identifier from the external gateway. If not provided, a default `XCPDPatientId` object is generated. |
| patientId | string (optional) | Patient ID associated with the error response. If not provided, a random UUID is generated. |
| operationOutcome | OperationOutcome (optional) | Operation outcome associated with the error response. If not provided, a default `OperationOutcome` object is generated. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | BaseErrorResponse | A `BaseErrorResponse` object populated with the provided or generated data. |

### `makeIdSystem`
#### Description
Creates an `IdSystem` object, which represents an identifier with a system and an ID value.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string (optional) | ID value. If not provided, a random UUID is generated. |
| system | string (optional) | System URI for the ID. If not provided, a random word is generated. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | IdSystem | An `IdSystem` object populated with the provided or generated data. |

### `makeOutboundDocumentQueryResp`
#### Description
Creates an `OutboundDocumentQueryResp` object, which represents a response to a query for documents.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string (optional) | Unique identifier for the response. If not provided, a random UUID is generated. |
| timestamp | string (optional) | Timestamp of the response. If not provided, a recent date is generated. |
| responseTimestamp | string (optional) | Timestamp indicating when the response was received. If not provided, a recent date is generated. |
| cxId | string (optional) | Correlation ID for the response. If not provided, a random UUID is generated. |
| externalGatewayPatient | IdSystem (optional) | Patient identifier from the external gateway. If not provided, a default `IdSystem` object is generated. |
| patientId | string (optional) | Patient ID associated with the response. If not provided, a random UUID is generated. |
| operationOutcome | OperationOutcome (optional) | Operation outcome associated with the response. If not provided, a default `OperationOutcome` object is generated. |
| documentReference | DocumentReference[] (optional) | List of document references returned in the response. If not provided, a list containing a single `DocumentReference` object generated by `makeDocumentReferenceWithMetriportId` is used. |
| gateway | XCAGateway (optional) | Information about the XCA gateway. If not provided, a default `XCAGateway` object is generated. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | OutboundDocumentQueryResp | An `OutboundDocumentQueryResp` object populated with the provided or generated data. |

### `makeSamlAttributes`
#### Description
Creates a `SamlAttributes` object, which represents SAML attributes associated with a request or response.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| subjectId | string (optional) | Subject identifier. If not provided, a random UUID is generated. |
| subjectRole | \{ code: string; display: string \} (optional) | Subject role information. If not provided, a default object with random words for `code` and `display` is generated. |
| organization | string (optional) | Organization name. If not provided, a random word is generated. |
| organizationId | string (optional) | Organization identifier. If not provided, a random UUID is generated. |
| homeCommunityId | string (optional) | Home community identifier. If not provided, a random UUID is generated. |
| purposeOfUse | string (optional) | Purpose of use for the data. If not provided, a random word is generated. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | SamlAttributes | A `SamlAttributes` object populated with the provided or generated data. |

### `makeXcaGateway`
#### Description
Creates an `XCAGateway` object, which represents an XCA gateway.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| homeCommunityId | string (optional) | Home community identifier for the gateway. If not provided, a random UUID is generated. |
| url | string (optional) | URL of the gateway. If not provided, a random URL is generated. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | XCAGateway | An `XCAGateway` object populated with the provided or generated data. |

### `makeXcpdGateway`
#### Description
Creates an `XCPDGateway` object, which represents an XCPD gateway.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| oid | string (optional) | Object identifier for the gateway. If not provided, a random UUID is generated. |
| url | string (optional) | URL of the gateway. If not provided, a random URL is generated. |
| id | string (optional) | Unique identifier for the gateway. If not provided, a random UUID is generated. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | XCPDGateway | An `XCPDGateway` object populated with the provided or generated data. |

### `makeExternalGatewayPatient`
#### Description
Creates an `XCPDPatientId` object, which represents a patient identifier from an external gateway.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string (optional) | Patient ID value. If not provided, a random UUID is generated. |
| system | string (optional) | System URI for the patient ID. If not provided, a random word is generated. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | XCPDPatientId | An `XCPDPatientId` object populated with the provided or generated data. |

## Dependencies
- `@faker-js/faker`: Used for generating fake data.
- `@metriport/ihe-gateway-sdk`: Provides data models and schemas.

