---
title: "Overview"
---

Here's a summary of the Carequality integration within the API package:

## High-level description
This directory contains the implementation of Carequality integration for the API. It includes functionality for patient discovery, document querying, and managing Carequality-specific data for patients and organizations. The code interacts with external Carequality gateways, processes responses, and updates local data accordingly.

## What does it do?
The Carequality integration provides several key functionalities:

1. Patient Discovery: Initiates and processes patient discovery requests to Carequality gateways.
2. Document Querying: Retrieves and processes document references from Carequality-enabled organizations.
3. Organization Management: Handles registration and updates of organizations in the Carequality directory.
4. Data Normalization: Converts between internal data formats and Carequality-specific formats.
5. Gateway Management: Manages connections to Carequality gateways and processes responses.
6. Patient Data Management: Stores and retrieves Carequality-specific patient data.
7. Error Handling and Logging: Provides robust error handling and logging for Carequality operations.

## Entry points
The main entry points for the Carequality integration are:

1. `discover` function in `patient.ts`: Initiates the patient discovery process.
2. `getDocumentsFromCQ` function in `document/query-documents.ts`: Starts the document querying process.
3. `createOrUpdateCQOrganization` function in `command/cq-directory/create-or-update-cq-organization.ts`: Manages organization registration and updates in the Carequality directory.
4. `PatientUpdaterCarequality` class in `patient-updater-carequality.ts`: Handles batch updates of patient data in Carequality.

## Key Files
1. `patient.ts`: Contains core functionality for patient discovery and data management.
2. `document/query-documents.ts`: Implements document querying from Carequality gateways.
3. `command/cq-directory/create-or-update-cq-organization.ts`: Manages Carequality organization data.
4. `process-outbound-patient-discovery-resps.ts`: Processes responses from patient discovery requests.
5. `shared.ts`: Provides utility functions and shared logic for Carequality operations.
6. `models/`: Contains database models for Carequality-related data.
7. `command/`: Includes various command functions for specific Carequality operations.

## Dependencies
The Carequality integration relies on several key dependencies:

1. `@metriport/carequality-sdk`: Provides types and utilities for interacting with Carequality APIs.
2. `@metriport/ihe-gateway-sdk`: Offers functionality for IHE (Integrating the Healthcare Enterprise) gateway interactions.
3. `@metriport/core`: Supplies core utilities, types, and domain models.
4. `sequelize`: Used for database interactions and ORM functionality.
5. `dayjs`: Utilized for date and time manipulation.
6. Internal modules for patient management, error handling, and database operations.

## Configuration
The Carequality integration uses various configuration settings, including:

1. Feature flags for enabling/disabling Carequality functionality.
2. API keys and certificates for Carequality API authentication.
3. Database configuration for storing Carequality-related data.
4. Environment-specific settings (e.g., production, staging, development).

These configurations are typically accessed through a `Config` class or environment variables.

In summary, the Carequality integration provides a comprehensive set of functionalities for interacting with the Carequality network, managing patient and organization data, and facilitating health information exchange. It handles complex operations such as patient discovery and document querying while providing robust error handling and data management capabilities.