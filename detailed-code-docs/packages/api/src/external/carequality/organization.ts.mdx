---
title: "organization.ts"
---

## High-level description
The `CQOrganization` class represents an organization that needs to be registered or updated in the Carequality directory. It provides methods to construct the organization object from details, manage associated URLs, and generate an XML representation based on a template.

## Code Structure
The `CQOrganization` class is the main symbol in this code. It uses the `CQOrgDetails` and `CQOrgUrls` types for its data structure and relies on the `buildXmlStringFromTemplate` function to generate the XML representation. The `Config` class is used to retrieve configuration values.

## References
- `@metriport/core/domain/organization`: Used for importing the `OrganizationBizType` enum.
- `buildXmlStringFromTemplate`: A function that generates an XML string from a template and organization details.
- `CQOrgDetails`, `CQOrgUrls`, `cqOrgUrlsSchema`: Types and a schema related to Carequality organization details and URLs.
- `Config`: Used to access configuration values, specifically `CQ_ORG_URLS`.

## Symbols

### `CQOrganization`
#### Description
This class represents an organization for Carequality registration/update. It stores organization details and provides methods for XML representation.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | string | Name of the organization. |
| oid | string | Unique identifier for the organization. |
| addressLine1 | string | First line of the organization's address. |
| city | string | City of the organization. |
| state | string | State of the organization. |
| postalCode | string | Postal code of the organization. |
| lat | string | Latitude of the organization's location. |
| lon | string | Longitude of the organization's location. |
| contactName | string | Name of the contact person for the organization. |
| phone | string | Phone number of the contact person. |
| email | string | Email address of the contact person. |
| role | "Implementer" \| "Connection" | Role of the organization in Carequality. |
| active | boolean | Indicates if the organization is active in Carequality. |
| parentOrgOid? | string | Optional. Unique identifier of the parent organization. |
| organizationBizType? | OrganizationBizType | Optional. Type of business of the organization. |
| urlXCPD? | string | Optional. URL for Cross-Community Patient Discovery (XCPD). |
| urlDQ? | string | Optional. URL for Document Query (DQ). |
| urlDR? | string | Optional. URL for Document Retrieval (DR). |

#### Outputs
This class does not have explicit output values. It is used to create and manage an organization object.

#### Internal Logic
The class initializes its properties in the constructor. It provides methods to:
- Create an instance from `CQOrgDetails` using `fromDetails`.
- Add URLs to an instance using `addUrls`.
- Get organization details as `CQOrgDetails` using `getDetails`.
- Get organization URLs as `CQOrgUrls` using `getUrls`.
- Get both details and URLs as a combined object using `getDetailsAndUrls`.
- Build an XML string representation using `buildXmlStringFromTemplate`.
- Manage the internal XML string with `setXmlString` and `getXmlString`.

## Side Effects
- The `CQOrganization.urls` static property is initialized once, based on the `CQ_ORG_URLS` configuration value.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/core/domain/organization | Provides the `OrganizationBizType` enum. |
| @metriport/shared/config | Provides access to the `Config` class for configuration retrieval. |
| ./organization-template | Provides the `buildXmlStringFromTemplate` function. |
| ./shared | Provides types and schema related to Carequality organizations. | 
