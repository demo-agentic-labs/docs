---
title: "Overview"
---

## High-level description
This directory contains code for managing the integration between CommonWell Health Alliance and CareQuality (CQ) Bridge. It implements functionality for enhancing patient coverage, managing CQ link statuses, and handling patient data synchronization across these health information exchange networks.

## What does it do?
The code in this directory performs several key functions:

1. Enhanced Coverage: It implements a process to enhance patient coverage by linking patients to CareQuality organizations and performing document queries.

2. CQ Link Status Management: It provides functionality to set and update CQ link statuses for patients, which indicates their connection status with the CareQuality network.

3. Patient Data Synchronization: It handles the synchronization of patient data between the local system and the CommonWell/CareQuality networks, including updating patient records and triggering document queries.

4. Coverage Enhancement Storage: It manages the storage and retrieval of coverage enhancement data in a local database.

5. API Integration: It provides an API layer for interacting with the CommonWell Management API and performing coverage enhancement operations.

## Entry points
The main entry points for this module are:

1. `coverage-enhancement-init.ts`: This file sets up the Express router for handling internal patient-related operations, including initiating enhanced coverage and retrieving consolidated patient data.

2. `coverage-enhancer-factory.ts`: This file provides a factory function to create a `CoverageEnhancer` instance, which is the main interface for performing coverage enhancement operations.

3. `patient-event-listener.ts`: This file sets up an event listener for patient updates, triggering CQ link status updates when patients are modified.

## Key Files
1. `coverage-enhancement-complete.ts`: Implements the logic for completing the enhanced coverage process for patients.

2. `coverage-enhancement-get-patients.ts`: Retrieves patients eligible for coverage enhancement from the database.

3. `coverage-enhancement-storage.ts`: Manages the storage and retrieval of coverage enhancement data.

4. `cq-link-status.ts`: Provides functions for managing patient CQ link statuses.

5. `ec-updater-local.ts`: Implements local database updates for coverage enhancement data.

## Dependencies
The code relies on several external libraries and internal modules:

- Express and express-promise-router for API routing
- Sequelize for database operations
- dayjs for date and time manipulation
- @metriport/core and @metriport/shared for shared utilities and types
- Various internal modules for patient data management, CommonWell API integration, and error handling

## Configuration
The code uses configuration values from a `Config` class, including:

- CommonWell Management URL
- Cookie ARN for authentication
- AWS region
- Various timeouts and durations for different operations

Environment variables and configuration files are used to set these values, allowing for flexible deployment across different environments.

The code implements a complex workflow for enhancing patient coverage across different health information exchange networks. It handles various aspects of patient data management, API integration, and database operations to ensure efficient and consistent data synchronization between systems.