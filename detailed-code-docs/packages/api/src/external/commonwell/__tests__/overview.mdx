---
title: "Overview"
---

## High-level description
This directory contains test files for the CommonWell integration in the Metriport API. It includes tests for patient data handling, demographics normalization, facility registration, patient discovery, error categorization, and organization management within the CommonWell Health Alliance system.

## What does it do?
The tests in this directory verify the correct functionality of various components related to the CommonWell integration:

1. It tests the creation and manipulation of mock CommonWell patient data for testing purposes.
2. It verifies the normalization of patient demographics when interacting with CommonWell.
3. It checks the process of registering or updating facilities in CommonWell.
4. It tests the patient discovery process, including scheduling and running discovery operations.
5. It verifies the correct updating of patient discovery status and related fields.
6. It tests the updating of CommonWell patient data, including links and demographics history.
7. It checks the categorization and grouping of CommonWell-related errors.
8. It verifies the initialization and updating of Care Quality organization include lists.
9. It tests the validation of CommonWell enablement for patients based on various criteria.
10. It checks the updating of CommonWell IDs and integration status on patient records.

These tests ensure that the Metriport API correctly handles data exchange, patient management, and error handling when interacting with the CommonWell Health Alliance system.

## Key Files

1. `cw-patient-data.ts`: Contains utility functions for creating mock CommonWell patient data.

2. `cw.demographics.test.ts`: Tests the normalization of patient demographics for CommonWell.

3. `cw.register-facility.test.ts`: Verifies the process of registering or updating facilities in CommonWell.

4. `cw.run-or-schedule-patient-discovery.test.ts`: Tests the patient discovery process, including scheduling and execution.

5. `cw.set-discovery-fields.test.ts`: Checks the updating of patient discovery status and related fields.

6. `cw.update-patient-data.test.ts`: Tests the updating of CommonWell patient data, including links and demographics history.

7. `error-categories.test.ts`: Verifies the categorization and grouping of CommonWell-related errors.

8. `organization.test.ts`: Tests the initialization and updating of Care Quality organization include lists.

9. `patient.test.ts`: Checks the validation of CommonWell enablement for patients based on various criteria.

10. `set-commonwell-id.test.ts`: Verifies the updating of CommonWell IDs and integration status on patient records.

## Dependencies
The test files rely on several key dependencies:

1. @faker-js/faker: Used for generating random mock data in tests.
2. @metriport/core: Provides core types and utilities for the Metriport API.
3. @metriport/commonwell-sdk: CommonWell SDK for interacting with the CommonWell API.
4. Jest: The testing framework used for writing and running the tests.
5. Various internal modules from the Metriport API codebase.

These tests are crucial for ensuring the reliability and correctness of the CommonWell integration in the Metriport API, covering a wide range of scenarios and edge cases.