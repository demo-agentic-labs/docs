---
title: "organization.test.ts"
---

## High-level description
This code defines a test suite for the `initCQOrgIncludeList` function in the CommonWell organization module. It tests various scenarios related to updating the include list of Care Quality organizations for a given organization OID.

## Code Structure
The test suite uses Jest and includes several mocks for external dependencies. The main function being tested is `initCQOrgIncludeList`, and the tests focus on different aspects of its behavior, such as handling the absence of a management API, updating with a valid management API, and limiting the number of organizations in the include list.

## Symbols

### `initCQOrgIncludeList`
#### Description
This function initializes the Care Quality organization include list for a given organization OID. It retrieves high-priority organizations and updates the include list using the CommonWell Management API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| orgOID | string | The organization OID for which to initialize the include list |

#### Internal Logic
1. Attempts to create a CommonWell Management API instance
2. If successful, retrieves high-priority organizations
3. Updates the include list with the retrieved organizations, limiting to a maximum of 50
4. Handles errors without throwing exceptions

### `describe("organization")`
#### Description
This is the main test suite for the organization module.

### `describe("initCQOrgIncludeList")`
#### Description
This nested describe block contains specific tests for the `initCQOrgIncludeList` function.

### `it("dont update if no managementApi")`
#### Description
Tests that the function doesn't update the include list if no management API is available.

### `it("updates if when managementApi is present")`
#### Description
Verifies that the function updates the include list when a management API is available.

### `it("links to the high prio orgs")`
#### Description
Ensures that the function links to high-priority organizations when updating the include list.

### `it("limits to 50 orgs")`
#### Description
Checks that the function limits the number of organizations in the include list to 50.

### `it("dont throw on error")`
#### Description
Confirms that the function doesn't throw an error when an exception occurs during execution.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @faker-js/faker | Generates fake data for testing |
| @metriport/core | Imports core functionality and types |
| jest | Testing framework |

## Error Handling
The code includes a test case to ensure that the `initCQOrgIncludeList` function doesn't throw errors when exceptions occur during execution.