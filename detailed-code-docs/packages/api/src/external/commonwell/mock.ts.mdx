---
title: "mock.ts"
---

## High-level description
This code implements a mock version of the CommonWell API for testing and development purposes. It simulates the behavior of the actual CommonWell API by providing mock responses for various API endpoints related to patient and document management in healthcare systems.

## Code Structure
The `CommonWellMock` class implements the `CommonWellAPI` interface, providing mock implementations for various API methods. It uses helper functions from `sandbox-payloads.ts` to generate mock data. The class maintains internal state for organization name and OID.

## Symbols

### `CommonWellMock`
#### Description
A mock implementation of the CommonWell API for testing and development purposes.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| orgName | string | The name of the organization |
| oid | string | The OID (Object Identifier) of the organization |

#### Internal Logic
- Maintains internal state for organization name and OID
- Uses helper functions from `sandbox-payloads.ts` to generate mock data
- Implements various API methods with mock responses

### `makePatientId()`
#### Description
Generates a unique patient ID using UUID v7.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| patientId | string | A unique patient identifier |

### `CommonWellMock` Methods
The class implements various methods corresponding to the CommonWell API endpoints. Some notable methods include:

- `enrollPerson`: Simulates enrolling a person in the CommonWell network
- `searchPerson`: Simulates searching for a person in the CommonWell network
- `registerPatient`: Simulates registering a patient in the CommonWell network
- `queryDocuments`: Simulates querying for patient documents
- `getNetworkLinks`: Simulates retrieving network links for a patient

Each method typically returns mock data structured to mimic the real API responses.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/commonwell-sdk | Provides types and interfaces for the CommonWell API |
| @metriport/core/util/uuid-v7 | Generates UUID v7 for unique identifiers |
| nanoid | Generates unique IDs for various mock entities |

## Error Handling
The code uses `NotImplementedError` for methods that are not yet implemented in the mock version.

## Notes
- This mock implementation is intended for use in sandbox or testing environments, as indicated by the `isSandbox()` check in the related `makeCommonWellAPI` function.
- Some methods are marked with "NOT USED YET" comments, indicating they might be implemented in future versions or are not currently required for the mock functionality.
- The mock maintains internal state for timestamps and counters to simulate realistic behavior across multiple API calls.