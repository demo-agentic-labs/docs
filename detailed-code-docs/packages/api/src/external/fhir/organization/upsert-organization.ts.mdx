---
title: "upsert-organization.ts"
---

## High-level description
This code defines a function `upsertOrgToFHIRServer` that updates an Organization resource on a FHIR server. It utilizes a FHIR API client created for a specific customer to perform the update operation.

## Symbols

### `upsertOrgToFHIRServer`
#### Description
This asynchronous function updates an Organization resource on a FHIR server for a specific customer.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| cxId | string | Customer ID used to create the FHIR API client |
| organization | Organization | The Organization resource to be updated on the FHIR server |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | Promise&lt;void&gt; | A promise that resolves when the update operation is complete |

#### Internal Logic
1. Creates a FHIR API client using the `makeFhirApi` function with the provided customer ID.
2. Calls the `updateResource` method on the FHIR API client, passing the Organization resource to be updated.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @medplum/fhirtypes | Provides the Organization type definition |
| ../api/api-factory | Provides the `makeFhirApi` function to create a FHIR API client |

## References
The code references the following external components:
- `makeFhirApi` function from "../api/api-factory"
- `Organization` type from "@medplum/fhirtypes"

## Related Code Context
The related code snippet provides additional context for the `makeFhirApi` function used in the target file:

1. The `makeFhirApi` function is defined in the "packages/api/src/external/fhir/api/api-factory.ts" file.
2. It takes a customer ID (`cxId`) as an argument and returns a `FhirClient` instance.
3. The function internally calls `coreMakeFhirApi` from "@metriport/core/external/fhir/api/api-factory", passing the customer ID and the FHIR server URL obtained from the `Config` object.

This context helps understand that the `makeFhirApi` function creates a customer-specific FHIR API client, which is then used in the `upsertOrgToFHIRServer` function to perform the update operation.