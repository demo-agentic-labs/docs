---
title: "generate-empty-ccd.ts"
---

## High-level description
This code generates an empty Continuity of Care Document (CCD) in XML format for a given patient. It includes patient information, author details, custodian information, and a structured body with placeholder sections for allergies, medications, active problems, social history, plan of treatment, and results.

## Code Structure
The main function `generateEmptyCcd` takes a `Patient` object as input and returns a string containing the XML representation of the CCD. It uses several helper functions to build different sections of the document, such as `buildAddresses`, `buildAuthor`, `buildCustodian`, and `buildStructuredBody`.

## Symbols

### `generateEmptyCcd`
#### Description
Generates an empty CCD XML document for a given patient.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| patient | Patient | The patient object containing relevant information |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ccd | string | The generated CCD XML document as a string |

#### Internal Logic
1. Retrieves the organization associated with the patient
2. Builds addresses, telecom, author, and custodian sections
3. Generates the structured body
4. Constructs the full CCD XML document using template literals

### `buildAddresses`
#### Description
Builds the XML representation of addresses for the patient.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| addresses | Address[] | An array of address objects |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| addressesString | string | XML representation of addresses |

### `buildAddress`
#### Description
Builds the XML representation of a single address.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| addr | Address \| AddressStrict | An address object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| addressString | string | XML representation of the address |

### `buildTelecom`
#### Description
Builds the XML representation of telecom information for the patient.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| contacts | Contact[] \| undefined | An array of contact objects |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| telecomString | string | XML representation of telecom information |

### `buildAuthor`
#### Description
Builds the XML representation of the author section.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| org | OrganizationModel | The organization object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| authorString | string | XML representation of the author section |

### `buildCustodian`
#### Description
Builds the XML representation of the custodian section.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| org | Organization | The organization object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| custodianString | string | XML representation of the custodian section |

### `buildStructuredBody`
#### Description
Builds the XML representation of the structured body section.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| structuredBodyString | string | XML representation of the structured body |

### `getCurrentDate`
#### Description
Gets the current date in the format required for the CCD.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| currentDate | string | Current date in the required format |

## Dependencies
- @medplum/fhirtypes
- @metriport/core/domain/location-address
- @metriport/core/domain/patient
- @metriport/core/src/domain/address
- @metriport/core/src/domain/contact
- @metriport/shared/common/metriport-organization
- ../../command/medical/organization/get-organization
- ../../models/medical/organization
- ../../shared/config

## Configuration
The code uses the `Config` class to retrieve configuration values:
- `getSystemRootOID()`: Gets the system root OID
- `getSystemRootOrgName()`: Gets the system root organization name