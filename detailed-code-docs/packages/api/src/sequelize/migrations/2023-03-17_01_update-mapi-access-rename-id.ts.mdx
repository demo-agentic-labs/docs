---
title: "2023-03-17_01_update-mapi-access-rename-id.ts"
---

## High-level description
This migration script renames the `cx_id` column to `id` in the `mapi_access` table. This change is likely part of a larger schema update or standardization effort.

## References
- `MAPIAccess` from "../../models/medical/mapi-access"

## Symbols
### `up`
#### Description
This asynchronous function defines the steps to apply the migration (rename `cx_id` to `id`). It uses a transaction to ensure atomicity.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| \{ context: queryInterface \} | MigrationContext | An object containing the queryInterface, which provides access to Sequelize's schema manipulation methods. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise\&lt;void\&gt; | Promise | A promise that resolves when the migration is successfully applied. |

#### Internal Logic
1. Starts a database transaction using `queryInterface.sequelize.transaction`.
2. Renames the `cx_id` column to `id` in the `mapi_access` table using `queryInterface.renameColumn`.
3. The transaction is automatically committed if the migration steps are successful.

### `down`
#### Description
This asynchronous function defines the steps to revert the migration (rename `id` back to `cx_id`). It also uses a transaction for atomicity.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| \{ context: queryInterface \} | MigrationContext | An object containing the queryInterface. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise\&lt;void\&gt; | Promise | A promise that resolves when the migration rollback is successful. |

#### Internal Logic
1. Starts a database transaction.
2. Renames the `id` column back to `cx_id` in the `mapi_access` table.
3. The transaction is automatically committed if the rollback steps are successful.

## Dependencies
- "sequelize": Used for database interactions and schema management.
- "../../models/medical/mapi-access": Imports the `MAPIAccess` model, which defines the table name. 
