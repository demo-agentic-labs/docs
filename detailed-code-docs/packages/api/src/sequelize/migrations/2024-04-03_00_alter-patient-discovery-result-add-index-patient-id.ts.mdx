---
title: "2024-04-03_00_alter-patient-discovery-result-add-index-patient-id.ts"
---

## High-level description
This migration script alters the `patient_discovery_result` table in the database. It removes the existing primary key constraint on the `id` column and adds a new index on the `patient_id` column.

## References
This code references the `Migration` type from an external file.

## Symbols
### `up`
#### Description
This function defines the steps to apply the migration to the database. It performs the following actions within a transaction:
1. Removes the existing primary key constraint `patient_discovery_result_pkey` from the `patient_discovery_result` table.
2. Adds a new index `patient_discovery_result_patientid_index` on the `patient_id` column of the `patient_discovery_result` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| \{ context: queryInterface \} | Object | An object containing the Sequelize query interface. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise&lt;void&gt; | Promise | A promise that resolves when the migration is complete. |

### `down`
#### Description
This function defines the steps to revert the migration. It performs the following actions within a transaction:
1. Removes the index `patient_discovery_result_patientid_index` from the `patient_discovery_result` table.
2. Adds back the primary key constraint `patient_discovery_result_pkey` on the `id` column of the `patient_discovery_result` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| \{ context: queryInterface \} | Object | An object containing the Sequelize query interface. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise&lt;void&gt; | Promise | A promise that resolves when the migration rollback is complete. |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Migration | Defines the type for migration functions. |
