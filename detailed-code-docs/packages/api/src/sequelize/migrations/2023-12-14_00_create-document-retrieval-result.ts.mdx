---
title: "2023-12-14_00_create-document-retrieval-result.ts"
---

## High-level description
This code defines a database migration using Sequelize. It creates a table named "document_retrieval_result" to store information about document retrieval requests, including request ID, patient ID, status, data, and timestamps. The migration handles both the "up" (creation) and "down" (rollback) operations for the table.

## References
- This code references the `Migration` type from a local file.
- It uses the `DataTypes` and `literal` objects from the `sequelize` library.

## Symbols

### `tableName`
#### Description
A constant variable that stores the name of the table.

#### Inputs
_N/A_

#### Outputs
_N/A_

#### Internal Logic
The variable is assigned the string value `"document_retrieval_result"`.

### `up`
#### Description
An asynchronous function that defines the "up" migration, responsible for creating the "document_retrieval_result" table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| \{ context: queryInterface \} | object | An object containing the queryInterface, which provides methods for interacting with the database. |

#### Outputs
_N/A_ This function does not explicitly return a value.

#### Internal Logic
1. Starts a database transaction using `queryInterface.sequelize.transaction`.
2. Creates the "document_retrieval_result" table using `queryInterface.createTable`.
   - Defines columns for `id`, `requestId`, `patientId`, `status`, `data`, and `createdAt`.
   - Sets data types and constraints for each column.
   - Uses `literal("CURRENT_TIMESTAMP(6)")` as the default value for `createdAt`.
3. Commits the transaction implicitly by awaiting its completion.

### `down`
#### Description
An asynchronous function that defines the "down" migration, responsible for dropping the "document_retrieval_result" table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| \{ context: queryInterface \} | object | An object containing the queryInterface, which provides methods for interacting with the database. |

#### Outputs
_N/A_ This function does not explicitly return a value.

#### Internal Logic
1. Starts a database transaction using `queryInterface.sequelize.transaction`.
2. Drops the "document_retrieval_result" table using `queryInterface.dropTable`.
3. Commits the transaction implicitly by awaiting its completion.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| sequelize | Provides the ORM and migration utilities. |

## Side Effects
- **Database Modification:** This code directly modifies the database schema by creating or dropping the "document_retrieval_result" table.
