---
title: "2023-12-06_00_create-earth-distance.ts"
---

## High-level description
This code defines a database migration script that adds and removes the 'cube' and 'earthdistance' extensions in a PostgreSQL database. These extensions are commonly used for geospatial calculations.

## Symbols

### `up`
#### Description
This migration function adds the 'cube' and 'earthdistance' extensions to the database. It performs these operations within a transaction to ensure atomicity.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| \{ context: queryInterface \} | \{ context: QueryInterface \} | An object containing the query interface for interacting with the database. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise\&lt;void\&gt; | Promise\&lt;void\&gt; | A promise that resolves when the migration is complete. |

#### Internal Logic
1. Starts a database transaction.
2. Executes a query to create the 'cube' extension if it doesn't exist.
3. Executes a query to create the 'earthdistance' extension if it doesn't exist.
4. Commits the transaction.

### `down`
#### Description
This migration function removes the 'cube' and 'earthdistance' extensions from the database. It also uses a transaction to ensure atomicity.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| \{ context: queryInterface \} | \{ context: QueryInterface \} | An object containing the query interface for interacting with the database. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise\&lt;void\&gt; | Promise\&lt;void\&gt; | A promise that resolves when the migration is complete. |

#### Internal Logic
1. Starts a database transaction.
2. Executes a query to drop the 'cube' extension if it exists.
3. Executes a query to drop the 'earthdistance' extension if it exists.
4. Commits the transaction.

## References
- `Migration` type is imported from "..", which likely refers to a module defining the migration interface.
- `queryInterface` is assumed to be a Sequelize QueryInterface instance, providing methods for executing SQL queries.

## Dependencies
- This code depends on the 'sequelize' library for database interaction.

## Error Handling
The code uses database transactions to ensure that the operations are atomic. If any of the queries fail, the transaction will be rolled back, preventing the database from being left in an inconsistent state.
