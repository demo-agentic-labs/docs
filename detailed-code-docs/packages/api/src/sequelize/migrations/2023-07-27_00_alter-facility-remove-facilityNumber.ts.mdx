---
title: "2023-07-27_00_alter-facility-remove-facilityNumber.ts"
---

## High-level description
This code defines a database migration script using the `umzug` library. Its purpose is to remove the `facility_number` column from the `facility` table in the database. It also provides a `down` migration to revert this change if needed.

## References
- This code depends on the `umzug` library for database migration management.
- It references the `DataTypes` enum from the `sequelize` library for specifying column data types.

## Symbols

### `up`
#### Description
This asynchronous function defines the steps to apply the migration, removing the `facility_number` column from the `facility` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| \{ context: queryInterface \} | \{ context: QueryInterface \} | An object containing the `queryInterface` object, which provides methods for interacting with the database schema. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise&lt;void&gt; | Promise&lt;void&gt; | A promise that resolves when the migration is successfully applied. |

#### Internal Logic
1. Starts a database transaction using `queryInterface.sequelize.transaction`.
2. Removes the `facility_number` column from the `facility` table using `queryInterface.removeColumn`.
3. Commits the transaction if all operations are successful.

### `down`
#### Description
This function defines the steps to revert the migration, adding back the `facility_number` column to the `facility` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| \{ context: queryInterface \} | \{ context: QueryInterface \} | An object containing the `queryInterface` object, which provides methods for interacting with the database schema. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise&lt;void&gt; | Promise&lt;void&gt; | A promise that resolves when the migration rollback is successfully completed. |

#### Internal Logic
1. Starts a database transaction using `queryInterface.sequelize.transaction`.
2. Adds the `facility_number` column back to the `facility` table as an INTEGER type using `queryInterface.addColumn`.
3. Commits the transaction if all operations are successful.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| sequelize | Provides the database connection and schema management tools. |
| umzug     | Manages the execution and rollback of database migrations. |
