---
title: "2023-12-13_00_create-document-query-result.ts"
---

## High-level description
This code defines a database migration script using Sequelize.js. It creates a table named "document_query_result" to store results of document queries, including an ID, request ID, patient ID, status, data, and creation timestamp. The script also includes a rollback function to drop the table.

## Symbols

### `tableName`
#### Description
A constant variable storing the name of the table.

#### Inputs
_N/A_

#### Outputs
_N/A_

#### Internal Logic
The constant is initialized with the string `"document_query_result"`.

### `up`
#### Description
An asynchronous function defining the steps to apply the migration (creating the table).

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| \{ context: queryInterface \} | object | An object containing the Sequelize QueryInterface instance. |

#### Outputs
_N/A_

#### Internal Logic
1. Starts a database transaction.
2. Uses `queryInterface.createTable` to create the `document_query_result` table with the specified columns:
    - `id`: String, primary key.
    - `requestId`: UUID, stored as `request_id`.
    - `patientId`: UUID, stored as `patient_id`.
    - `status`: String.
    - `data`: JSONB (JSON binary).
    - `createdAt`: Date with 6-digit precision, defaults to the current timestamp, stored as `created_at`.

### `down`
#### Description
A function defining the steps to rollback the migration (dropping the table).

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| \{ context: queryInterface \} | object | An object containing the Sequelize QueryInterface instance. |

#### Outputs
_N/A_

#### Internal Logic
1. Starts a database transaction.
2. Uses `queryInterface.dropTable` to drop the `document_query_result` table.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| sequelize | Provides database abstraction and migration functionality. |
| DataTypes | Used to define data types for the table columns. |
| literal | Used to create SQL literals for default values. |


