---
title: "2022-12-22_00_update-settings-add-webhook-details.ts"
---

## High-level description
This database migration script adds two new columns, `webhook_key` and `webhook_status`, to the `settings` table. It also handles the rollback by removing these columns. This suggests an evolution of the application to incorporate webhook functionality.

## References
- `Settings` model from `../../models/settings.ts`

## Symbols
### `up`
#### Description
This asynchronous function defines the steps to apply the migration. It starts a database transaction and adds two new columns (`webhook_key` and `webhook_status`) to the `settings` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| \{ context: queryInterface \} | Object | An object containing the queryInterface, which provides methods for interacting with the database. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise&lt;void&gt; | Promise | A promise that resolves when the migration is successfully applied. |

#### Internal Logic
1. **Begin Transaction:** Starts a database transaction to ensure atomicity.
2. **Add `webhook_key` Column:** Adds a new column named `webhook_key` of type `STRING` to the `settings` table.
3. **Add `webhook_status` Column:** Adds a new column named `webhook_status` of type `STRING` to the `settings` table.

### `down`
#### Description
This asynchronous function defines the steps to rollback the migration. It starts a database transaction and removes the `webhook_key` and `webhook_status` columns from the `settings` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| \{ context: queryInterface \} | Object | An object containing the queryInterface, which provides methods for interacting with the database. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise&lt;void&gt; | Promise | A promise that resolves when the migration rollback is successfully completed. |

#### Internal Logic
1. **Begin Transaction:** Starts a database transaction to ensure atomicity.
2. **Remove `webhook_status` Column:** Removes the `webhook_status` column from the `settings` table.
3. **Remove `webhook_key` Column:** Removes the `webhook_key` column from the `settings` table.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| sequelize | Provides database interaction functionalities. |
| DataTypes | Used to define data types for the database columns. |
