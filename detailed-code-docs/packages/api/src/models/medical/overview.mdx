---
title: "Overview"
---

## High-level description
This directory contains model definitions and related utilities for medical-related entities in the API. It includes models for patients, facilities, organizations, document reference mappings, coverage enhancements, and API access management. These models serve as the database representation of domain objects and are used throughout the API for data persistence and retrieval.

## What does it do?
The models in this directory define the structure and behavior of medical-related data in the database. They provide an abstraction layer between the application logic and the database, allowing for easy manipulation and querying of medical data. Key functionalities include:

1. Defining database schemas for medical entities like patients, facilities, and organizations.
2. Providing methods for creating, updating, and querying these entities.
3. Implementing business logic and data validation at the model level.
4. Managing relationships between different medical entities.
5. Handling API access control for medical data.

For example, the `PatientModel` allows the API to store and retrieve patient information, including their associated facilities and external identifiers. The `FacilityModel` manages data about healthcare facilities, including their status in different health information exchanges like Carequality and CommonWell.

## Key Files

### patient.ts
Defines the `PatientModel` class, representing a patient in the system. It includes fields for customer ID, facility IDs, external ID, and patient data. This model is crucial for storing and retrieving patient information throughout the API.

### facility.ts
Contains the `FacilityModel` class, representing a healthcare facility. It includes attributes such as facility number, OID, and status flags for different health information exchanges. This model is essential for managing facility data and their integration with external systems.

### organization.ts
Defines the `OrganizationModel` class, representing an organization in the system. It includes fields for organization type, identifiers, and activation statuses for different services. This model is used to manage organizational data and their relationships with facilities and patients.

### docref-mapping.ts
Contains the `DocRefMappingModel` class, which represents a mapping between external document references and internal patient data. This model is crucial for managing document references across different systems and associating them with the correct patients.

### coverage-enhancement.ts
Defines the `CoverageEnhancementModel` class, representing coverage enhancement data for patients. This model is used in the context of CommonWell Health Alliance's Coverage Enhancement functionality.

### mapi-access.ts
Contains the `MAPIAccess` model, which manages access to the Medical API (MAPI) for customers. This model is essential for controlling and tracking which customers have access to specific API functionalities.

## Dependencies
The models in this directory primarily depend on the following libraries and internal modules:

1. Sequelize: Used as the ORM for database interactions.
2. @metriport/core: Provides domain-specific types and interfaces.
3. Internal domain layer: Imports interfaces and types from the corresponding domain objects.

## Configuration
The models in this directory use Sequelize for ORM configuration. Common configuration options include:

- Table names: Each model specifies its corresponding table name in the database.
- Timestamps: Most models include `createdAt` and `updatedAt` timestamps.
- Underscored naming: Table and column names use snake_case.
- Freezing table names: Prevents Sequelize from pluralizing table names.

Example configuration for the `PatientModel`:

```typescript
{
  tableName: "patient",
  underscored: true,
  timestamps: true,
  freezeTableName: true,
}
```

These models form the backbone of the medical data management system in the API, providing a structured and consistent way to interact with the database for medical-related operations. They encapsulate the complexity of data storage and retrieval, allowing other parts of the application to work with domain objects seamlessly.