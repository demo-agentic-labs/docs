---
title: "docref-mapping.ts"
---

## High-level description
This code defines a Sequelize model for the `DocRefMapping` entity, which represents a mapping between external document references and internal patient data. It is used to store and retrieve information about document references in a medical context.

## Code Structure
The main symbol in this code is the `DocRefMappingModel` class, which extends `BaseModel`. It defines the structure and behavior of the `DocRefMapping` entity in the database. The `docRefMappingModelColumns` object is used to define column names for the model.

## Symbols

### `docRefMappingModelColumns`
#### Description
An object that defines the column names for the `DocRefMapping` model. It is used exclusively by the `getOrCreateDocRefMapping()` function in `get-docref-mapping.ts`.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| docRefMappingModelColumns | object | An object containing column name mappings |

### `DocRefMappingModel`
#### Description
A Sequelize model class that represents the `DocRefMapping` entity in the database. It extends `BaseModel` and implements the `DocRefMapping` interface.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| sequelize | Sequelize | The Sequelize instance used to initialize the model |

#### Internal Logic
- Defines the table name as "docref_mapping"
- Declares properties for `externalId`, `cxId`, `patientId`, `requestId`, and `source`
- Implements a static `setup` method to initialize the model with Sequelize
- Defines the model's attributes, including those inherited from `BaseModel`
- Sets up model options, including the table name

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/core/external/index | Imports the `MedicalDataSource` enum |
| sequelize | Imports Sequelize types and functions |
| ../../domain/medical/docref-mapping | Imports the `DocRefMapping` interface |
| ../_default | Imports the `BaseModel` and `ModelSetup` types |

## References
This code is referenced by:
- `packages/api/src/command/medical/docref-mapping/get-docref-mapping.ts`: Uses the `DocRefMappingModel` for database operations
- `packages/api/src/models/medical/__tests__/docref-mapping.ts`: Creates test instances of `DocRefMappingModel`

## Notes
- The `DocRefMappingModel` is designed to work with Sequelize ORM and provides a structured way to interact with the `docref_mapping` table in the database.
- The model includes fields for tracking external IDs, customer IDs, patient IDs, request IDs, and the source of medical data.
- The `setup` method allows for easy initialization of the model within a Sequelize instance.