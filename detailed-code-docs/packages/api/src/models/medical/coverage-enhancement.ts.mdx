---
title: "coverage-enhancement.ts"
---

## High-level description
This code defines a Sequelize model for a CoverageEnhancement entity in a medical context. It represents a database table structure for storing coverage enhancement data, including patient and coverage-related information.

## Code Structure
The `CoverageEnhancementModel` class extends `BaseModelNoId` and implements the `CoverageEnhancement` interface. It defines the structure and setup for the coverage enhancement database table.

## References
- `BaseModelNoId` from "../_default"
- `CoverageEnhancement` and `CoverageEnhancementData` from "../../domain/medical/coverage-enhancement"

## Symbols

### CoverageEnhancementModel
#### Description
A Sequelize model class representing the coverage enhancement table in the database.

#### Inputs
N/A (This is a class definition)

#### Outputs
N/A (This is a class definition)

#### Internal Logic
- Extends `BaseModelNoId` and implements `CoverageEnhancement`
- Defines table name as "coverage-enhancement"
- Declares properties: `ecId`, `patientId`, `cxId`, and `data`
- Implements a static `setup` method to initialize the model with Sequelize

### CoverageEnhancementModel.setup
#### Description
A static method that initializes the CoverageEnhancementModel with Sequelize.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| sequelize | Sequelize | Sequelize instance for database connection |

#### Outputs
N/A (This method initializes the model)

#### Internal Logic
- Calls `CoverageEnhancementModel.init()` with model attributes and options
- Defines the table structure with the following fields:
  - `ecId`: UUID, primary key
  - `patientId`: UUID, primary key
  - `cxId`: UUID
  - `data`: JSONB
- Uses `BaseModelNoId.attributes()` and `BaseModelNoId.modelOptions()` for common fields and options

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| sequelize | ORM for database interactions |

## Configuration
The model is configured with the following options:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| tableName | string | "coverage-enhancement" | Name of the database table |
| freezeTableName | boolean | true | Prevents Sequelize from pluralizing the table name |
| underscored | boolean | true | Uses snake_case for automatically added attributes |
| timestamps | boolean | true | Adds createdAt and updatedAt timestamps |

## Performance Considerations
- The use of UUID for primary keys (`ecId` and `patientId`) may have performance implications for large datasets compared to auto-incrementing integer keys.
- The `data` field uses JSONB type, which allows for flexible data storage but may impact query performance if not properly indexed.

This model is used in related files for creating, updating, and querying coverage enhancement data, particularly in the context of CommonWell Health Alliance's Coverage Enhancement functionality.