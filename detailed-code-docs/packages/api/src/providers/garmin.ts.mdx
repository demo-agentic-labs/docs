---
title: "garmin.ts"
---

## High-level description
This code defines a `Garmin` class that extends the `Provider` class and implements the `OAuth1` interface. It's designed to handle OAuth1 authentication for the Garmin Connect API, allowing users to connect their Garmin accounts to the application.

## Code Structure
The `Garmin` class inherits from `Provider` and implements `OAuth1`. It uses an `OAuth1DefaultImpl` instance to handle OAuth1-specific operations. The class provides methods for the OAuth1 authentication process and deregistration.

## Symbols

### Garmin
#### Description
The `Garmin` class represents the Garmin provider in the application. It sets up the OAuth1 authentication process and defines which consumer health data types are supported (all disabled in this implementation).

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| oauth | OAuth1 | An instance of OAuth1 implementation (optional, defaults to OAuth1DefaultImpl) |

#### Internal Logic
The constructor initializes the `Provider` superclass with all consumer health data types set to `false`, indicating that synchronous mode is disabled for all data types. It also sets up the OAuth1 implementation with Garmin-specific endpoints and credentials.

### processStep1
#### Description
Initiates the first step of the OAuth1 authentication process.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| token | string | The token used for the first step of authentication |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise&lt;any&gt; | Promise&lt;any&gt; | The result of the first step of the OAuth1 process |

### processStep2
#### Description
Completes the second step of the OAuth1 authentication process.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| userToken | UserToken | The user token object |
| oauth_verifier | string | The OAuth verifier string |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise&lt;any&gt; | Promise&lt;any&gt; | The result of the second step of the OAuth1 process |

### deregister
#### Description
Deregisters user access tokens from the Garmin service.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| userAccessTokens | string[] | An array of user access tokens to deregister |
| cxId | string | Optional customer ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise&lt;void&gt; | Promise&lt;void&gt; | A promise that resolves when deregistration is complete |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| UserToken | Represents a user token in the authentication process |
| Config | Provides configuration settings for the application |
| PROVIDER_GARMIN | Constant representing the Garmin provider |
| OAuth1, OAuth1DefaultImpl | Interfaces and implementation for OAuth1 authentication |
| Provider, ConsumerHealthDataType | Base class and enum for health data providers |

## Configuration
The Garmin class uses the following configuration options:
| Option | Type | Description |
|:-------|:-----|:------------|
| PROVIDER_GARMIN | string | Identifier for the Garmin provider |
| Config.getGarminConsumerKey() | string | Garmin API consumer key |
| Config.getGarminConsumerSecret() | string | Garmin API consumer secret |

These configuration options are used to set up the OAuth1 authentication process for Garmin.