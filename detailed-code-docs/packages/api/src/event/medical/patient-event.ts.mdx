---
title: "patient-event.ts"
---

## High-level description
This code defines a `PatientEvents` class that extends `EventEmitter` to handle patient-related events in a medical API. It provides methods to emit events for patient creation, updates, deletions, and Canvas integration. The code also includes a singleton pattern to ensure only one instance of `PatientEvents` is used throughout the application.

## Code Structure
The main symbols in this code are the `PatientEvents` class and the `patientEvents` function. The `patientEvents` function is used to access the singleton instance of `PatientEvents`. The `PatientEvents` class defines event types and methods to emit these events.

## Symbols

### `patientEvents()`
#### Description
This function implements the singleton pattern for the `PatientEvents` class. It ensures that only one instance of `PatientEvents` is created and used throughout the application.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| patientEventsInstance | PatientEvents | The singleton instance of PatientEvents |

### `PatientEvents`
#### Description
This class extends `EventEmitter` and provides methods to emit various patient-related events.

#### Internal Logic
- Defines static constants for event types: `CREATED`, `UPDATED`, `DELETED`, and `CANVAS_INTEGRATION`.
- Implements methods to emit each event type with specific data.

### `PatientEvents.emitCreated()`
#### Description
Emits a 'patient-created' event with patient data.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| patient | PatientEvent | Object containing patient id and cxId |

### `PatientEvents.emitUpdated()`
#### Description
Emits a 'patient-updated' event with patient data.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| patient | PatientEvent | Object containing patient id and cxId |

### `PatientEvents.emitDeleted()`
#### Description
Emits a 'patient-deleted' event with patient data.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| patient | PatientEvent | Object containing patient id and cxId |

### `PatientEvents.emitCanvasIntegration()`
#### Description
Emits a 'canvas-integration' event with Canvas integration data.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| canvas | CanvasIntegrationEvent | Object containing patient id, cxId, metadata, and webhook type |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| events | Used to extend the EventEmitter class |
| @metriport/core/domain/patient | Imports the Patient type |
| ../../domain/webhook | Imports the MAPIWebhookType |

## References
This module is referenced in several other parts of the codebase:
1. In `update-patient.ts`, it's used to emit patient update events.
2. In `document-webhook.ts`, it's used to emit Canvas integration events.
3. In `cq-bridge/patient-event-listener.ts`, it sets up a listener for patient update events.
4. In `canvas/canvas-event-listener.ts`, it sets up a listener for Canvas integration events.

These references show that the `PatientEvents` class is central to the application's event-driven architecture for patient-related operations.