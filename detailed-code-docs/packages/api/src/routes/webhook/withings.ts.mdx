---
title: "withings.ts"
---

## High-level description
This code defines a webhook endpoint for Withings data in an Express.js application. It handles POST and HEAD requests to process incoming Withings data and confirm successful webhook connection, respectively.

## Code Structure
The code exports a Router object with two routes: a POST route for processing Withings data and a HEAD route for confirming webhook connection. Both routes use the `asyncHandler` utility for error handling.

## References
- `asyncHandler` from "../util"
- `processData` from "../../command/webhook/withings"

## Symbols

### routes
#### Description
An Express Router object that defines the routes for the Withings webhook.

### POST "/"
#### Description
Handles POST requests to process incoming Withings data.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| req | Request | Express Request object containing the Withings data in the body |
| res | Response | Express Response object |

#### Internal Logic
1. Logs the incoming Withings data payload
2. Calls `processData` function with the request body
3. Sends a 200 OK status response

### HEAD "/"
#### Description
Handles HEAD requests to confirm successful webhook connection.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| req | Request | Express Request object |
| res | Response | Express Response object |

#### Internal Logic
Sends a 200 OK status response to confirm the webhook connection.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| express | Web application framework |
| express-promise-router | Router for handling asynchronous routes |

## Error Handling
The code uses the `asyncHandler` utility to wrap the route handlers, which likely provides centralized error handling for asynchronous operations.

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.