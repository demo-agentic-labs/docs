---
title: "fitbit.ts"
---

## High-level description
This code defines a route handler for a Fitbit webhook endpoint in an Express.js application. It processes incoming Fitbit data notifications and responds with an HTTP 200 OK status.

## Code Structure
The code exports a router object with a single POST route. The route uses an asyncHandler wrapper and processes the incoming data using a schema validation before calling a processData function.

## References
- `processData` from "../../command/webhook/fitbit"
- `asyncHandler` from "../util"
- `fitbitWebhookNotificationSchema` from "../../mappings/fitbit"

## Symbols

### `routes`
#### Description
An Express Router instance created using `express-promise-router`.

### POST "/"
#### Description
Defines a POST route handler for the "/webhook/fitbit" endpoint.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| req | Request | The incoming HTTP request object |
| res | Response | The HTTP response object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | Response | HTTP 200 OK status |

#### Internal Logic
1. Parses and validates the request body using `fitbitWebhookNotificationSchema`.
2. Calls `processData` with the parsed request body.
3. Sends an HTTP 200 OK status response.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| express | Web application framework |
| express-promise-router | Router for handling asynchronous routes |
| http-status | HTTP status codes |

## Error Handling
The route is wrapped with `asyncHandler`, which likely handles any errors thrown during request processing. The exact error handling mechanism is defined in the `asyncHandler` function from the "util" module.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /webhook/fitbit | POST | Fitbit webhook notification data | 200 OK | Receives and processes Fitbit data for all data types for the specified user ID |