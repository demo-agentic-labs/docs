---
title: "index.ts"
---

## High-level description
This code defines a router for handling webhook routes in an Express.js application. It imports and sets up routes for different providers (Garmin, Apple, Withings, Fitbit, and Tenovi) and applies middleware for authentication.

## Code Structure
The main `routes` object is created using `Router()` from `express-promise-router`. It then uses the `use()` method to set up routes for each provider. The Apple route includes an additional middleware `processCxId` for authentication.

## Symbols

### `routes`
#### Description
An Express.js router object that handles webhook routes for different providers.

#### Internal Logic
- Creates routes for Garmin, Withings, Apple, Fitbit, and Tenovi
- Applies the `processCxId` middleware specifically to the Apple route

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| express-promise-router | Creates an Express router that allows the use of async functions |
| garmin | Handles Garmin-specific webhook routes |
| apple | Handles Apple-specific webhook routes |
| withings | Handles Withings-specific webhook routes |
| fitbit | Handles Fitbit-specific webhook routes |
| tenovi | Handles Tenovi-specific webhook routes |
| processCxId | Middleware for processing customer ID in authentication |

## References
- `processCxId`: This middleware is imported from `"../middlewares/auth"` and is used specifically for the Apple route.

## API/Interface Reference
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| /webhook/garmin | * | Handles Garmin webhook requests |
| /webhook/withings | * | Handles Withings webhook requests |
| /webhook/apple | * | Handles Apple webhook requests (with authentication) |
| /webhook/fitbit | * | Handles Fitbit webhook requests |
| /webhook/tenovi | * | Handles Tenovi webhook requests |

Note: The actual HTTP methods and specific functionalities for each endpoint are defined in their respective route handlers, which are not shown in this file.