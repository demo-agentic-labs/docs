---
title: "query.ts"
---

## High-level description
This code provides a utility function `queryToSearchParams` that converts a parsed query string object into a URLSearchParams object. It also includes a helper function `isString` to check if a value is a string.

## Symbols

### `queryToSearchParams`
#### Description
This function takes a parsed query string object and converts it into a URLSearchParams object, which is useful for constructing URLs with query parameters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | QueryString.ParsedQs | A parsed query string object from the 'qs' library |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| searchParams | URLSearchParams | A URLSearchParams object containing the converted query parameters |

#### Internal Logic
1. If the input query is falsy, return an empty URLSearchParams object.
2. Create a new URLSearchParams object.
3. Iterate through each key in the query object:
   - Skip undefined values.
   - If the value is an array, append each string element to the searchParams.
   - If the value is a string, append it to the searchParams.
4. Return the populated URLSearchParams object.

### `isString`
#### Description
A type guard function that checks if a given value is a string.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| value | unknown | The value to be checked |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | boolean | True if the value is a string, false otherwise |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| QueryString from "qs" | Provides the ParsedQs type for the input query object |

## References
- The code uses the `URLSearchParams` API, which is a built-in JavaScript object for manipulating URL query parameters.

## Performance Considerations
The function iterates through the query object once, so its time complexity is O(n) where n is the number of key-value pairs in the query object. For large query objects, this could potentially impact performance.