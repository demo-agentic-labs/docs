---
title: "activity.ts"
---

## High-level description
This code defines a route handler for the GET /activity endpoint in an Express.js application. It retrieves activity data for all connected providers for a specified user ID and date.

## Code Structure
The main component is the router, which uses the `asyncHandler` to handle asynchronous operations. The route handler calls `getProviderDataForType` to fetch activity data and returns the results as a JSON response.

## References
- `@metriport/api-sdk`: Imports the `Activity` type.
- `../providers/provider`: Imports `ConsumerHealthDataType`.
- `./helpers/provider-route-helper`: Imports `getProviderDataForType`.
- `./util`: Imports `asyncHandler`.

## Symbols

### router
#### Description
An Express.js router instance created using `express-promise-router`.

### GET "/"
#### Description
Defines a GET route handler for the root path ("/") of the activity endpoint.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| req.query.userId | string | The user ID to fetch activity data for |
| req.query.date | string | The date to fetch activity data for |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| res.body | Activity[] | An array of Activity objects containing the user's activity data |

#### Internal Logic
1. Calls `getProviderDataForType` with the request object and `ConsumerHealthDataType.Activity`.
2. Sets the response status to OK (200).
3. Sends the results as a JSON response.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/api-sdk | Provides the Activity type |
| express | Web application framework |
| express-promise-router | Router for handling asynchronous routes |
| http-status | HTTP status codes |

## Error Handling
The route uses `asyncHandler`, which likely handles any errors thrown during the execution of the route handler.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /activity | GET | Query params: userId, date | JSON array of Activity objects | Retrieves activity data for a user on a specific date |