---
title: "uuid.ts"
---

## High-level description
This code defines a module for handling UUID-related operations in an Express.js application. It provides utility functions for validating and retrieving UUIDs from different parts of an HTTP request, such as query parameters, headers, or path parameters.

## Code Structure
The code exports several functions and constants:
- `uuidSchema`: A Zod schema for validating UUIDs.
- `validateUUID`: A function to validate a UUID string.
- `getUUIDFromOrFail`: A function to retrieve and validate a UUID from a request context.
- `getUUIDFromOptional`: A function to optionally retrieve and validate a UUID from a request context.
- `getUUIDFrom`: A function that returns an object with methods to retrieve UUIDs from a request context.

## Symbols

### `uuidSchema`
#### Description
A Zod schema that validates if a string is a valid UUID.

### `validateUUID`
#### Description
Validates a given string as a UUID using the `uuidSchema`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string | The string to validate as a UUID |
| propName | string \| undefined | Optional property name for error reporting |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| validatedUUID | string | The validated UUID string |

### `getUUIDFromOrFail`
#### Description
Retrieves a UUID from the specified context and fails if not found or invalid.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| context | Context | The context to retrieve the UUID from |
| propName | string | The property name to look for |
| req | Request | The Express request object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| uuid | string | The validated UUID |

### `getUUIDFromOptional`
#### Description
Optionally retrieves and validates a UUID from the specified context.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| context | Context | The context to retrieve the UUID from |
| propName | string | The property name to look for |
| req | Request | The Express request object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| uuid | string \| undefined | The validated UUID or undefined if not found |

### `getUUIDFrom`
#### Description
Returns an object with methods to retrieve UUIDs from a request context.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| context | Context | The context to retrieve the UUID from |
| req | Request | The Express request object |
| propName | string | The property name to look for (default: "id") |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | GetWithoutParams | An object with `optional` and `orFail` methods |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| express | For Request type |
| zod | For schema validation |
| ../util | For utility functions |

This module provides a robust way to handle UUID validation and retrieval in an Express.js application, ensuring that UUIDs are properly validated before being used in the application logic.