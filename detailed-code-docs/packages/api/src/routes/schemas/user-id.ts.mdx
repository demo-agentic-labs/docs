---
title: "user-id.ts"
---

## High-level description
This code defines utility functions for handling user IDs in API routes. It provides a standardized way to extract and validate user IDs from different parts of an HTTP request (query parameters, URL parameters, or headers) in Express.js applications.

## Code Structure
The main function `getUserIdFrom` is defined, which returns an object with methods to retrieve the user ID optionally or with a required check. It uses the `getUUIDFrom` function from the "uuid" module to perform the actual extraction and validation.

## Symbols

### `userIdPropName`
#### Description
A constant string that defines the name of the property used to store the user ID.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| userIdPropName | string | The name of the user ID property, set to "userId" |

### `getUserIdFrom`
#### Description
A function that returns an object with methods to retrieve the user ID from a specified context in the request.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| context | Context | The context to search for the user ID (query, params, or headers) |
| req | Request | The Express request object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| GetWithoutParams | object | An object with `optional` and `orFail` methods to retrieve the user ID |

#### Internal Logic
The function uses the `getUUIDFrom` utility to extract the user ID from the specified context in the request. It returns an object with two methods:
1. `optional`: Returns the user ID if present, or undefined if not found.
2. `orFail`: Returns the user ID if present, or throws an error if not found.

## Dependencies
- The code imports `Request` from "express" for type definitions.
- It imports `Context` and `GetWithoutParams` from "../util" for type definitions.
- It uses the `getUUIDFrom` function from "./uuid" to perform the actual user ID extraction and validation.

This utility provides a consistent way to handle user IDs across different routes in the API, making it easier to maintain and reducing the likelihood of errors when working with user identifiers.