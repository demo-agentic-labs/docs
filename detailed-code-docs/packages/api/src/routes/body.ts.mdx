---
title: "body.ts"
---

## High-level description
This code defines an Express router for handling GET requests to the "/body" endpoint. It retrieves body data for all connected providers for a specified user ID and date, utilizing the `getProviderDataForType` helper function to fetch and aggregate the data.

## Code Structure
The main components of this code are:
1. The Express router setup
2. The GET route handler for "/body"
3. The `getProviderDataForType` helper function (imported)
4. The `asyncHandler` utility function (imported)

## Symbols

### router
#### Description
An instance of Express Router used to define the "/body" route.

### GET "/"
#### Description
Defines a GET route handler for the "/body" endpoint. It uses the `asyncHandler` to wrap the asynchronous function that processes the request.

#### Internal Logic
1. Calls `getProviderDataForType` with the request object and `ConsumerHealthDataType.Body` as parameters.
2. Sets the response status to OK (200) and sends the results as JSON.

## References
- `Body` from "@metriport/api-sdk"
- `ConsumerHealthDataType` from "../providers/provider"
- `getProviderDataForType` from "./helpers/provider-route-helper"
- `asyncHandler` from "./util"

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| express | Web application framework |
| express-promise-router | Router for handling asynchronous routes |
| http-status | HTTP status codes |

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /body | GET | Query params: userId, date | Body[] | Retrieves body data for all connected providers for the specified user ID and date |

## Error Handling
Error handling is managed by the `asyncHandler` utility, which catches any errors thrown within the route handler and passes them to the next middleware.

## Performance Considerations
The performance of this endpoint depends on the implementation of `getProviderDataForType`, which fetches data from multiple providers. The response time may increase with the number of connected providers for the user.