---
title: "medical-records-local.ts"
---

## High-level description
This code reads a FHIR Bundle from a JSON file, converts it to HTML format using the `bundleToHtml` function, and writes the resulting HTML to a file. It's primarily used for local testing or development of FHIR Bundle to HTML conversion functionality.

## Symbols

### `bundleToHtml`
#### Description
This function is imported from an external module and is used to convert a FHIR Bundle to HTML format.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| bundleParsed | object | A parsed FHIR Bundle JSON object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| html | string | The HTML representation of the FHIR Bundle |

### Main script
#### Description
The main script reads a JSON file containing a FHIR Bundle, parses it, converts it to HTML, and writes the result to a file.

#### Internal Logic
1. Read the contents of "test-bundle.json" file.
2. Parse the JSON content into a JavaScript object.
3. Call `bundleToHtml` function with the parsed bundle.
4. Write the resulting HTML to "test.html" file.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/core/external/aws/lambda-logic/bundle-to-html | Provides the `bundleToHtml` function for converting FHIR Bundles to HTML |
| fs | Node.js File System module for reading and writing files |

## Side Effects
- Reads from file system: "test-bundle.json"
- Writes to file system: "test.html"

## TODOs
There is a commented-out alternative implementation that suggests the possibility of using a different structure for the input:
```javascript
// const html = bundleToHtml(bundleParsed.fhirResource);
```
This indicates that there might be plans to support a different input format where the FHIR Bundle is nested under a `fhirResource` property.