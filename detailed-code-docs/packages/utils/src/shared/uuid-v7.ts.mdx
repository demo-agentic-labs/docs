---
title: "uuid-v7.ts"
---

## High-level description
This file implements a UUID version 7 generator and related utilities. It provides functionality to generate UUIDs that are both time-ordered and contain random components, following the proposed UUID version 7 specification.

## Code Structure
The main symbols in this code are the `UUID` class and the `V7Generator` class. The `UUID` class represents a UUID and provides methods for creation, manipulation, and comparison. The `V7Generator` class encapsulates the logic for generating UUIDs version 7. There are also utility functions like `uuidv7` and `uuidv4` that provide easy access to UUID generation.

## Symbols

### `UUID`
#### Description
A class representing a UUID as a 16-byte byte array.

#### Internal Logic
- Stores the UUID as a 16-byte `Uint8Array`.
- Provides methods for creating UUIDs from various inputs (byte array, field values, string).
- Implements methods for converting to string, comparing UUIDs, and getting variant/version information.

### `V7Generator`
#### Description
A class that generates UUIDs version 7, maintaining monotonicity and handling timestamp rollbacks.

#### Internal Logic
- Maintains internal state (timestamp and counter) to ensure monotonically increasing UUIDs.
- Provides methods to generate UUIDs, with options to handle significant timestamp rollbacks.

### `uuidv7()`
#### Description
A function that generates a UUIDv7 string.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| UUID | string | A UUIDv7 string in the format "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" |

### `uuidv7obj()`
#### Description
A function that generates a UUIDv7 object.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| UUID | UUID | A UUIDv7 object |

### `uuidv4()`
#### Description
A function that generates a UUIDv4 string.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| UUID | string | A UUIDv4 string in the format "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" |

### `uuidv4obj()`
#### Description
A function that generates a UUIDv4 object.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| UUID | UUID | A UUIDv4 object |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| crypto | Used for cryptographically strong random number generation |

## Error Handling
The code implements error handling for invalid inputs, such as throwing `TypeError` for invalid byte array lengths and `RangeError` for out-of-range field values.

## Performance Considerations
The code uses a buffered random number generator (`DefaultRandom`) to improve performance when generating multiple UUIDs.