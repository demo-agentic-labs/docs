---
title: "Overview"
---

## High-level description
This directory contains utility functions and classes for various shared operations in the project. It includes file system operations, UUID generation, customer data retrieval, logging utilities, and folder management functions. These utilities are designed to be used across different parts of the application to provide consistent functionality for common tasks.

## What does it do?
The shared utilities in this directory perform several key functions:

1. File and Folder Management:
   - Initialize files with optional headers
   - Create and manage a "runs" folder in the user's home directory
   - Perform various file system operations like checking if a path is a directory, reading and writing file contents, and creating directories

2. UUID Generation:
   - Generate UUID version 7 (time-ordered) and version 4 (random) identifiers
   - Provide a class for UUID manipulation and comparison

3. Customer Data Retrieval:
   - Fetch customer data from an API endpoint using a customer ID
   - Extract and return essential information about organizations and facilities

4. Logging:
   - Log warnings for non-dry runs with colored output
   - Append error messages and stack traces to specified files

These utilities simplify common tasks and provide a consistent interface for operations that are used throughout the project.

## Key Files

1. `file.ts`: Contains the `initFile` function for initializing files with optional headers.

2. `folder.ts`: Provides functions for managing a "runs" folder, creating symlinks, and generating file paths.

3. `fs.ts`: Offers various file system utility functions for operations like checking file existence, reading/writing file contents, and creating directories.

4. `get-cx-data.ts`: Implements the `getCxData` function to retrieve customer data from an API endpoint.

5. `log.ts`: Contains logging utilities for warning messages and error logging to files.

6. `uuid-v7.ts`: Implements UUID version 7 generation and related utilities, including a `UUID` class and a `V7Generator` class.

## Dependencies
The shared utilities rely on several external libraries and Node.js built-in modules:

- `fs`: For file system operations
- `path`: For handling file and directory paths
- `os`: For operating system-related utilities
- `axios`: For making HTTP requests to retrieve customer data
- `dotenv`: For loading environment variables
- `@metriport/api-sdk`: For type definitions related to customer data
- `@metriport/core/util/env-var`: For retrieving environment variables
- `crypto`: For cryptographically strong random number generation in UUID creation

## Configuration
Some of the utilities use environment variables for configuration:

- `API_URL`: Used in `get-cx-data.ts` to specify the API endpoint for retrieving customer data

The `folder.ts` file also uses the user's home directory to create a "runs" folder, which is determined using `os.homedir()`.

## Code Snippets

Here's an example of how the `initFile` function from `file.ts` can be used:

```typescript
import { initFile } from './shared/file';

const outputFileName = 'output.csv';
const csvHeader = 'Column1,Column2,Column3\n';
initFile(outputFileName, csvHeader);
```

And here's an example of generating a UUID version 7 using the utilities in `uuid-v7.ts`:

```typescript
import { uuidv7 } from './shared/uuid-v7';

const newUUID = uuidv7();
console.log('Generated UUID:', newUUID);
```

These shared utilities provide a solid foundation for common operations across the project, promoting code reuse and consistency in implementation.