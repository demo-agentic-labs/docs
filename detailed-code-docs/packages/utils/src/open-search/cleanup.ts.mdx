---
title: "cleanup.ts"
---

## High-level description
This code is a utility script for cleaning up XML/CDA files using the OpenSearchFileIngestorDirect class. It reads a file, processes its contents using a cleanup method, and writes the cleaned content to a new file with a ".cleaned" extension.

## Code Structure
The main functionality is implemented in the `main` function, which uses a `Tester` class that extends `OpenSearchFileIngestorDirect`. The `Tester` class provides access to the `cleanUpContents` method through its `testIt` method.

## Symbols

### `Tester`
#### Description
A class that extends `OpenSearchFileIngestorDirect` to expose the `cleanUpContents` method for testing purposes.

#### Internal Logic
The `testIt` method simply calls and returns the result of the `cleanUpContents` method from the parent class.

### `main`
#### Description
The main function that orchestrates the file reading, cleaning, and writing process.

#### Internal Logic
1. Records the start time.
2. Reads the contents of the specified file.
3. Creates a `Tester` instance and calls its `testIt` method with the file contents.
4. Writes the cleaned contents to a new file with the ".cleaned" extension.
5. Logs the total processing time.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/core/external/opensearch/file-ingestor-direct | Provides the OpenSearchFileIngestorDirect class for file processing |
| fs | File system operations |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| fileName | string | "" | The path to the file to be processed |

## TODOs
The `fileName` variable is empty by default. Users need to update this variable with the full path to the file they want to process before running the script.

## Performance Considerations
The script measures and logs the total execution time, which can be useful for performance monitoring.

## Side Effects
The script creates a new file in the same directory as the input file, with the same name plus a ".cleaned" extension. This new file contains the cleaned contents of the original file.