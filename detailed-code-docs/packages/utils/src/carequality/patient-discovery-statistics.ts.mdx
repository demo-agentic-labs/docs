---
title: "patient-discovery-statistics.ts"
---

## High-level description
This code is a script that retrieves and logs Cross-Community Patient Discovery (XCPD) statistics for a specific patient using Carequality. It utilizes environment variables for configuration and calls a function from an external module to fetch the statistics.

## Code Structure
The code imports necessary dependencies, sets up environment variables, defines the main function, and executes it.

## Symbols

### `main`
#### Description
An asynchronous function that retrieves XCPD statistics for a patient and logs the results.

#### Internal Logic
1. Calls `getXcpdStatisticsForPatient` with the required parameters.
2. Logs the returned statistics string to the console.

### `getXcpdStatisticsForPatient`
#### Description
An imported function that retrieves XCPD statistics for a patient.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| apiUrl | string | The API URL |
| sqlDBCreds | string | SQL database credentials |
| cxId | string | Customer ID |
| dateString | string | Date string for the query |
| patientId | string | ID of the patient |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| xcpdResultsString | string | XCPD statistics results as a string |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| dotenv | To load environment variables from a .env file |
| @metriport/core/external/carequality/pd/get-xcpd-statistics | To retrieve XCPD statistics |
| @metriport/api/src/shared/config | To access environment variables |

## Configuration
The script uses the following environment variables:
| Option | Type | Description |
|:-------|:-----|:------------|
| API_URL | string | The API URL |
| CX_ID | string | Customer ID |
| DB_CREDS | string | SQL database credentials |

## TODOs
The script has empty string values for `patientId` and `dateString`, which should be filled with appropriate values before running the script.