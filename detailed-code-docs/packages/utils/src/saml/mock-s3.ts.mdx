---
title: "mock-s3.ts"
---

## High-level description
This code defines a `MockS3Utils` class that extends the `S3Utils` class, providing mock implementations for S3 operations. It's designed for testing purposes, simulating S3 functionality without actually interacting with AWS S3 services.

## Code Structure
The `MockS3Utils` class overrides three methods from the parent `S3Utils` class: `uploadFile`, `getFileInfoFromS3`, and `buildFileUrl`. These methods provide mock implementations that return predefined responses instead of interacting with actual S3 services.

## Symbols

### MockS3Utils
#### Description
A class that extends `S3Utils` to provide mock implementations of S3 operations for testing purposes.

#### Inputs
This class inherits the constructor from `S3Utils`, which takes a `region` parameter.

| Name | Type | Description |
|:-----|:-----|:------------|
| region | string | The AWS region to be used for S3 operations |

#### Methods

### uploadFile
#### Description
Mocks the file upload process to S3.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| bucket | string | The name of the S3 bucket |
| key | string | The key (path) of the file in the bucket |
| file | Buffer | The file content to be uploaded |
| contentType | string (optional) | The content type of the file |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | AWS.S3.ManagedUpload.SendData | A mock response simulating a successful S3 upload |

#### Internal Logic
- Logs the mock upload operation with the provided bucket, key, and content type.
- Returns a mock response object with predefined values for Location, ETag, Bucket, and Key.

### getFileInfoFromS3
#### Description
Mocks the process of retrieving file information from S3.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | \{ exists: false \} | A mock response indicating the file doesn't exist |

#### Internal Logic
- Always returns an object indicating that the file doesn't exist in S3.

### buildFileUrl
#### Description
Mocks the process of building a file URL for S3.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| bucket | string | The name of the S3 bucket |
| key | string | The key (path) of the file in the bucket |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| url | string | A mock S3 URL for the file |

#### Internal Logic
- Constructs and returns a mock S3 URL using the provided bucket, key, and the region from the class instance.

## Dependencies
This code depends on the `@metriport/core/external/aws/s3` module, which provides the `S3Utils` class that `MockS3Utils` extends.

## Performance Considerations
As this is a mock implementation, performance considerations are not applicable. The mock methods are designed to return predefined responses quickly without any actual S3 operations.
