---
title: "person-management.ts"
---

## High-level description
This code implements person management functionality for the CommonWell Health Alliance API. It demonstrates various operations such as enrolling a person, searching for a person, updating person details, matching patients, and unenrolling/deleting a person.

## Code Structure
The code exports a single async function `personManagement` that performs a series of operations using the CommonWell SDK. It utilizes helper functions and data from the `payloads.ts` file to create and manipulate person and patient data.

## References
This code references several functions and objects from the `@metriport/commonwell-sdk` package and the `payloads.ts` file.

## Symbols

### `personManagement`
#### Description
This async function demonstrates various person management operations using the CommonWell SDK.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| commonWell | CommonWell | An instance of the CommonWell SDK |
| queryMeta | RequestMetadata | Metadata for the API requests |

#### Internal Logic
1. Enrolls a person with and without a strong ID
2. Searches for a person using a strong ID and patient demographics
3. Updates person details
4. Matches patients to a person
5. Unenrolls and deletes persons

#### Side Effects
- Creates and deletes person and patient records in the CommonWell system
- Logs operation results to the console

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/commonwell-sdk | Provides the CommonWell SDK for API interactions |
| nanoid | Generates unique IDs |

## Error Handling
The code includes basic error handling, throwing errors when expected IDs are not present in API responses.

## Logging
The code uses `console.log` to output the results of each operation, providing a way to track the progress and results of the person management operations.

## TODOs
- The code includes a comment "Note: will be deleting both persons created in this run" before deleting persons, which might indicate a potential area for improvement or clarification.