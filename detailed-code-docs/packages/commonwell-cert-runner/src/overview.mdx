---
title: "Overview"
---

## High-level description
This directory contains the source code for the CommonWell certification runner, which is a tool designed to test and validate integration with the CommonWell Health Alliance API. The code implements various functionalities required for CommonWell certification, including organization management, person management, patient management, link management, and document operations.

## What does it do?
The CommonWell certification runner performs a series of operations to test and validate the integration with the CommonWell Health Alliance API. These operations include:

1. Organization management: Creating, updating, and managing organizations and their certificates.
2. Person management: Enrolling, searching, updating, and deleting person records.
3. Patient management: Registering patients, updating demographics, searching, merging records, and managing patient links.
4. Link management: Linking patients to persons, upgrading and downgrading link assurance levels.
5. Document operations: Querying and retrieving documents associated with patients, as well as contributing documents to the network.

The runner executes these operations in a structured manner, simulating real-world scenarios to ensure compliance with CommonWell standards and proper functionality of the integration.

## Entry points
The main entry point for the certification runner is the `index.ts` file. This file sets up the necessary configurations, initializes CommonWell API clients for different organizations, and orchestrates the execution of various certification test cases.

The workflow typically follows this pattern:
1. Initialize CommonWell API clients using configuration from environment variables.
2. Execute a series of certification test cases, each focusing on a specific aspect of CommonWell operations.
3. Log the results and any errors encountered during the process.

## Key Files
1. `index.ts`: The main entry point that orchestrates the certification process.
2. `org-management.ts`: Implements organization management operations.
3. `person-management.ts`: Handles person-related operations such as enrollment and searching.
4. `patient-management.ts`: Manages patient-related operations including registration and merging.
5. `link-management.ts`: Implements patient-person link management operations.
6. `document-consumption.ts` and `document-contribution.ts`: Handle document querying, retrieval, and contribution.
7. `payloads.ts`: Provides utility functions for creating various data payloads used in API requests.
8. `util.ts`: Contains utility functions for environment variable management and other helper operations.

## Dependencies
The certification runner relies on several key dependencies:

1. `@metriport/commonwell-sdk`: Provides the CommonWell SDK for interacting with the CommonWell Health Alliance API.
2. `axios`: Used for making HTTP requests to the CommonWell API.
3. `commander`: Implements command-line interface parsing for the certification runner.
4. `dotenv`: Loads environment variables from a .env file for configuration.
5. `zod`: Used for schema validation of API request and response data.
6. `lodash`: Provides utility functions, particularly for deep cloning objects.
7. `dayjs`: Used for date manipulation in various operations.
8. `nanoid`: Generates unique IDs for various entities.

## Configuration
The certification runner uses environment variables for configuration. Key configuration options include:

- CommonWell API credentials and certificates
- Organization identifiers and names
- Document contribution settings
- Patient and person demographic information for testing

These configurations are typically loaded from a .env file specified via the `--env-file` command-line option when running the certification tool.

In summary, this codebase provides a comprehensive tool for testing and validating CommonWell Health Alliance API integration, covering various aspects of patient data management, document handling, and organization operations within the CommonWell network.