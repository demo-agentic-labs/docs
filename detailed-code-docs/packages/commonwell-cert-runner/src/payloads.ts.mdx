---
title: "payloads.ts"
---

## High-level description
This code defines various payload structures and utility functions for creating and managing patient and person data in the CommonWell Health Alliance system. It includes functions for generating identifiers, creating patient and person objects, and handling document-related operations.

## Code Structure
The code is organized into several sections, including constant definitions, utility functions for generating IDs, and functions for creating patient and person objects. It also includes configurations for certificates and document contribution.

## Symbols

### `makeId()`
#### Description
Generates a random 6-digit ID using a custom alphabet.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string | A 6-digit random ID |

### `makeOrgId(orgId?: string)`
#### Description
Generates an organization ID, optionally using a provided orgId.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| orgId | string | Optional organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string | Generated organization ID |

### `makeFacilityId(orgId?: string)`
#### Description
Generates a facility ID, optionally using a provided orgId.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| orgId | string | Optional organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string | Generated facility ID |

### `makePatientId({ orgId, facilityId }: { orgId?: string; facilityId?: string } = {})`
#### Description
Generates a patient ID, optionally using provided orgId or facilityId.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| orgId | string | Optional organization ID |
| facilityId | string | Optional facility ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string | Generated patient ID |

### `makePatient({ facilityId = makeFacilityId(), details = mainDetails }: { facilityId?: string; details?: Demographics } = {})`
#### Description
Creates a patient object with the given facilityId and details.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| facilityId | string | Optional facility ID |
| details | Demographics | Optional demographic details |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| patient | Patient | Created patient object |

### `makeMergePatient({ facilityId = makeFacilityId() }: { facilityId?: string } = {})`
#### Description
Creates a patient object for merging purposes.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| facilityId | string | Optional facility ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| patient | Patient | Created patient object for merging |

### `makeDocPatient({ firstName, lastName, dob, gender, zip, facilityId }: PersonDataOnOrg = {})`
#### Description
Creates a patient object with document-specific information.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| firstName | string | Patient's first name |
| lastName | string | Patient's last name |
| dob | string | Patient's date of birth |
| gender | string | Patient's gender |
| zip | string | Patient's ZIP code |
| facilityId | string | Optional facility ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| patient | Patient | Created patient object with document-specific information |

### `makeDocPerson(init?: PersonDataOnOrg)`
#### Description
Creates a person object with document-specific information.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| init | PersonDataOnOrg | Optional initialization data |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| person | Person | Created person object with document-specific information |

### `makeOrganization(suffixId?: string)`
#### Description
Creates an organization object with a randomly generated name.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| suffixId | string | Optional suffix for the organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organization | Organization | Created organization object |

### `makeDocContribOrganization(suffixId?: string)`
#### Description
Creates an organization object for document contribution purposes.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| suffixId | string | Optional suffix for the organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organization | Organization | Created organization object for document contribution |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @metriport/commonwell-sdk | Provides types and utilities for CommonWell integration |
| crypto | Used for X509Certificate handling |
| dayjs | Date manipulation library |
| nanoid | Generates unique IDs |
| unique-names-generator | Generates random names for organizations |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| COMMONWELL_OID | string | N/A | CommonWell organization identifier |
| COMMONWELL_ORG_NAME | string | N/A | CommonWell organization name |
| COMMONWELL_ORG_CERTIFICATE | string | N/A | CommonWell organization certificate |
| DOCUMENT_PATIENT_FIRST_NAME | string | N/A | First name for document patient |
| DOCUMENT_PATIENT_LAST_NAME | string | N/A | Last name for document patient |
| DOCUMENT_PATIENT_DATE_OF_BIRTH | string | N/A | Date of birth for document patient |
| DOCUMENT_PATIENT_GENDER | string | N/A | Gender for document patient |
| DOCUMENT_PATIENT_ZIP | string | N/A | ZIP code for document patient |
| DOCUMENT_CONTRIBUTION_URL | string | N/A | URL for document contribution |
| DOCUMENT_CONTRIBUTION_AUTH_URL | string | N/A | Authentication URL for document contribution |
| DOCUMENT_CONTRIBUTION_CLIENT_ID | string | N/A | Client ID for document contribution |
| DOCUMENT_CONTRIBUTION_CLIENT_SECRET | string | N/A | Client secret for document contribution |

This code provides a comprehensive set of utilities and data structures for managing patient and organization information within the CommonWell Health Alliance system, including support for document contribution and retrieval.