---
title: "Overview"
---

## High-level description
This "samples" directory contains two subdirectories demonstrating the implementation of Metriport API integrations using different technologies: Python with FastAPI and TypeScript with Express. Both samples showcase how to interact with the Metriport Medical API, handle patient data, and process webhook events.

## What does it do?
The samples in this directory provide developers with working examples of how to:

1. Create and manage patients using the Metriport API
2. Perform document and consolidated data queries
3. Handle webhook events from Metriport, including document downloads, conversions, and consolidated data updates
4. Implement a mock webhook server for testing and development purposes
5. Interact with cloud services (simulated in the Python example with Google Cloud Platform)

These samples demonstrate the workflow of creating patients, triggering webhooks, and processing incoming webhook events to perform actions such as querying for consolidated data and saving results.

## Entry points
The main entry points for each sample are:

Python FastAPI:
1. `create_patient_trigger_webhook.py`: Contains utility functions for interacting with the Metriport API.
2. `mock-webhook.py`: Implements the FastAPI webhook endpoint for handling incoming Metriport events.

TypeScript Express:
1. `index.ts`: Contains the main application logic for creating patients and querying documents.
2. `mock-webhook.ts`: Implements a mock webhook server for handling Metriport API events.

Both samples follow a similar flow: creating patients and triggering webhooks, then receiving and processing webhook events through their respective mock webhook servers.

## Key Files
Python FastAPI:
1. `env.py`: Manages environment variables.
2. `gcp.py`: Simulates interactions with Google Cloud Platform services.

TypeScript Express:
1. `.eslintrc.js`: Configures ESLint for the TypeScript project.
2. `tsconfig.json` and `tsconfig.ref.json`: Configure TypeScript compiler options.

## Dependencies
Both samples rely on specific libraries and frameworks:

Python FastAPI:
- FastAPI: Web framework for building APIs
- httpx: Asynchronous HTTP client
- pydantic: Data validation and settings management
- python-dotenv: Loading environment variables

TypeScript Express:
- @metriport/api-sdk: Metriport API client
- @metriport/shared: Shared utilities for Metriport integrations
- express: Web application framework
- dotenv: Loading environment variables
- TypeScript: Static typing for JavaScript

Dependencies are specified in `requirements.txt` for Python and `package.json` for TypeScript.

## Configuration
Both samples use environment variables for configuration, typically loaded from a `.env` file:

Common variables:
- IS_PROD: Determines if the environment is production
- METRIPORT_API_KEY/METRIPORT_SECRET_KEY: API key for Metriport authentication
- FACILITY_ID/METRIPORT_FACILITY_ID: Facility ID for Metriport operations
- METRIPORT_WH_KEY/WH_KEY: Webhook key for verifying incoming webhook signatures

Python FastAPI specific:
- PATIENT_ID: Metriport patient ID used in webhook processing

Both samples also define constants for Metriport API URLs (sandbox and production).

To set up and run the samples:

Python FastAPI:
1. Create and activate a Python virtual environment
2. Install dependencies: `pip install -r samples/requirements.txt`
3. Run the FastAPI webhook server: `uvicorn mock-webhook:app --reload --port 8088`
4. Use ngrok to expose the local server
5. Update the Metriport dashboard with the ngrok URL
6. Run `python3 -m create_patient_trigger_webhook` to create a patient and trigger a webhook

TypeScript Express:
1. Install dependencies: `npm install`
2. Create a `.env` file with required variables
3. Run the main application: `npm run start`
4. Run the mock webhook server: `npm run mock-webhook`
5. Use ngrok for exposing the local server

These samples provide developers with a quick start for integrating the Metriport API into their applications, demonstrating best practices and common workflows in both Python and TypeScript environments.