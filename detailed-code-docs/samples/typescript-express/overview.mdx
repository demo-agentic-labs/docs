---
title: "Overview"
---

## High-level description
This directory contains a TypeScript Express application that demonstrates the usage of the Metriport Medical API. It includes a main application for creating patients and querying documents, a mock webhook server for testing webhook events, and necessary configuration files for TypeScript and ESLint.

## What does it do?
The application showcases two main functionalities:

1. Patient Creation and Document Query:
   - Creates a new patient using the Metriport API
   - Initiates a document query for the created patient
   - Logs the response from the document query

2. Mock Webhook Server:
   - Simulates a webhook server that handles various Metriport API events
   - Processes events such as document downloads, document conversions, and consolidated data queries
   - Verifies webhook signatures and performs corresponding actions based on the event type

These functionalities demonstrate how to integrate with the Metriport Medical API, handle patient data, and process webhook events in a real-world application scenario.

## Entry points
The main entry points for this application are:

1. `index.ts`: This file contains the main application logic for creating patients and querying documents. It demonstrates the basic usage of the Metriport Medical API.

2. `mock-webhook.ts`: This file implements a mock webhook server that handles various types of webhook events from the Metriport API. It's useful for testing and development purposes.

The application flow starts with `index.ts` for the main functionality and `mock-webhook.ts` for simulating webhook events. Both files utilize the Metriport API SDK to interact with the Metriport Medical API.

## Key Files
1. `index.ts`: Main application file that demonstrates patient creation and document querying.
2. `mock-webhook.ts`: Implements a mock webhook server for testing Metriport API events.
3. `.eslintrc.js`: Configures ESLint for the TypeScript project.
4. `tsconfig.json` and `tsconfig.ref.json`: Configure TypeScript compiler options for the project.
5. `package.json`: Defines project dependencies and scripts.

## Dependencies
The project relies on several key dependencies:

1. @metriport/api-sdk (version not specified): Provides the Metriport API client for interacting with the Metriport Medical API.
2. @metriport/shared (version not specified): Offers shared utilities for Metriport integrations.
3. express (version ^4.18.2): A web application framework for Node.js, used for creating the mock webhook server.
4. dotenv (version ^16.0.3): Loads environment variables from a .env file.
5. TypeScript (version ^5.0.4): Adds static typing to JavaScript, improving developer productivity and code quality.

These dependencies were chosen to provide a robust development environment for working with the Metriport API, handling HTTP requests, and maintaining code quality through static typing and linting.

## Configuration
The project uses several configuration files and environment variables:

1. `.env` file (not included in the repository):
   - METRIPORT_API_KEY: API key for authenticating with Metriport
   - IS_PROD: Flag to determine if the application is running in production
   - FACILITY_ID: ID of the facility used in API calls
   - METRIPORT_WH_KEY: Webhook key for signature verification

2. `.eslintrc.js`:
   - Extends recommended ESLint and TypeScript-ESLint rules
   - Integrates with Prettier for code formatting
   - Uses the TypeScript parser for ESLint

3. `tsconfig.json` and `tsconfig.ref.json`:
   - Extend the base configuration for Node.js 18 from @tsconfig/node18
   - Enable composite project build mode for better performance in larger projects

To set up the project:
1. Install dependencies with `npm install`
2. Create a `.env` file and set the required environment variables
3. Run the main application with `npm run start`
4. Run the mock webhook server with `npm run mock-webhook`

For webhook testing, use a tool like ngrok to expose your local server to the internet and configure the webhook URL in your Metriport dashboard.

This configuration allows for flexible development and testing of Metriport API integrations while maintaining code quality through linting and static typing.