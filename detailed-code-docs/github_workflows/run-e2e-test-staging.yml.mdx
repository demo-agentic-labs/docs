---
title: "run-e2e-test-staging.yml"
---

## High-level description
This GitHub Actions workflow file defines a job to run End-to-End (E2E) tests against a staging environment. It is manually triggered and uses a reusable workflow to execute the E2E tests with specific configuration for the staging environment.

## Code Structure
The workflow consists of a single job named `e2e-tests` that uses a reusable workflow defined in `./.github/workflows/_e2e-tests.yml`. It passes various input parameters and secrets to the reusable workflow.

## Symbols

### Workflow: Run E2E tests against Staging
#### Description
This workflow is designed to run E2E tests against a staging environment. It is manually triggered and uses a reusable workflow to execute the tests.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| deploy_env | string | The deployment environment, set to "staging" |
| api_url | string | The API URL for the staging environment |
| fhir_url | string | The FHIR server URL for the staging environment |
| test_patient_id | string | The test patient ID |

#### Secrets
| Name | Description |
|:-----|:------------|
| AWS_ACCESS_KEY_ID | AWS access key ID |
| AWS_SECRET_ACCESS_KEY | AWS secret access key |
| TEST_API_KEY | API key for testing in the staging environment |
| DOCKERHUB_USERNAME | DockerHub username |
| DOCKERHUB_TOKEN | DockerHub authentication token |
| NGROK_AUTHTOKEN | Ngrok authentication token |
| CW_CERTIFICATE | CW certificate for staging |
| CW_PRIVATE_KEY | CW private key for staging |
| CW_MEMBER_CERTIFICATE | CW member certificate for staging |
| CW_MEMBER_PRIVATE_KEY | CW member private key for staging |
| CW_MEMBER_NAME | CW member name for staging |
| CW_MEMBER_OID | CW member OID for staging |

#### Internal Logic
1. The workflow is triggered manually using the `workflow_dispatch` event.
2. It defines a single job named `e2e-tests`.
3. The job uses a reusable workflow defined in `./.github/workflows/_e2e-tests.yml`.
4. It passes various input parameters and secrets to the reusable workflow, including environment-specific URLs, API keys, and certificates.

## Dependencies
The workflow depends on a reusable workflow defined in `./.github/workflows/_e2e-tests.yml`.