---
title: "restart_api_sandbox.yml"
---

## High-level description
This GitHub Actions workflow file, named "Restart API - Sandbox," is designed to restart an API service in a sandbox environment. It uses a reusable workflow to perform the restart operation on an Amazon ECS (Elastic Container Service) cluster.

## Code Structure
The workflow consists of a single job named "restart" that utilizes a reusable workflow defined in `./.github/workflows/_restart-ecs.yml`. It passes various environment-specific parameters and secrets to the reusable workflow.

## Symbols

### `restart` (job)
#### Description
This job is responsible for restarting the API service in the sandbox environment. It accomplishes this by calling a reusable workflow and providing it with the necessary inputs and secrets.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| deploy_env | string | The deployment environment, set to "sandbox" |
| ECR_REPO_URI | string | The URI of the ECR repository for the sandbox environment |
| ECS_CLUSTER | string | The name of the ECS cluster for the sandbox environment |
| ECS_SERVICE | string | The name of the ECS service for the sandbox environment |
| AWS_REGION | string | The AWS region for the sandbox API |

#### Secrets
| Name | Description |
|:-----|:------------|
| AWS_ACCESS_KEY_ID | AWS access key ID for authentication |
| AWS_SECRET_ACCESS_KEY | AWS secret access key for authentication |
| DOCKERHUB_USERNAME | DockerHub username for authentication |
| DOCKERHUB_TOKEN | DockerHub token for authentication |

#### Internal Logic
1. The job uses a reusable workflow defined in `./.github/workflows/_restart-ecs.yml`.
2. It passes environment-specific variables and secrets to the reusable workflow.
3. The actual restart logic is implemented in the reusable workflow, which is not visible in this file.

## Dependencies
This workflow depends on the following external resources:
| Dependency | Purpose |
|:-----------|:--------|
| ./.github/workflows/_restart-ecs.yml | Reusable workflow that contains the actual restart logic |
| GitHub Actions | Execution environment for the workflow |
| Amazon ECS | Target service being restarted |
| Amazon ECR | Container registry for the API image |
| DockerHub | Possibly used for base images or dependencies |

## Configuration
The workflow uses GitHub Actions variables and secrets for configuration:
| Option | Type | Description |
|:-------|:-----|:------------|
| vars.ECR_REPO_URI_SANDBOX | string | ECR repository URI for the sandbox environment |
| vars.ECS_CLUSTER_SANDBOX | string | ECS cluster name for the sandbox environment |
| vars.ECS_SERVICE_SANDBOX | string | ECS service name for the sandbox environment |
| vars.API_REGION_SANDBOX | string | AWS region for the sandbox API |

## Error Handling
Error handling is not explicitly defined in this workflow file. It likely relies on the default error handling provided by GitHub Actions and the reusable workflow.

## Logging
Logging is not explicitly defined in this workflow file. It likely relies on the default logging provided by GitHub Actions and the reusable workflow.

This workflow provides a convenient way to manually trigger a restart of the sandbox API service using GitHub Actions, with all the necessary configuration and authentication handled through GitHub secrets and variables.